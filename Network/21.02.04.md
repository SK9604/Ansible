# RIP(Routing Information Protocol)

### RIP의 특징

1. RIPver1 과 RIPver2 가 있다.
2. 라우팅 정보 전송을 위하여 UDP Port Number 520을 사용한다.
3. 설정이 비교적 쉽다.
4. 거의 모든 라우터에서 지원하는 표준 Routing Protocol 이다.
5. 경로 결정 시 Metric으로 Hop Count를 사용하고 링크의 속도는 반영하지 않는다.
6. Hop Count가 16이상이면 도달 불가능한 네트워크로 간주한다.
7. 라우팅 정보 전송 방식이 비효율적이다. 30초마다 주기적 업데이트(Periodic Update) 한다. 다른 동적 라우팅 프로토콜들은 트리거드 업데이트(Triggered Update) 한다.
8. 소규모 네트워크에 사용하기 적합하다.

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/baa90529-3e83-412b-ba8f-3ceaee4ca9b5/screenshot-onedrive-live-com-redir-1612399408544.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/baa90529-3e83-412b-ba8f-3ceaee4ca9b5/screenshot-onedrive-live-com-redir-1612399408544.png)

### 기본적인 RIP 설정

```
R1(config)#router rip 
R1(config-router)#network [광고할 주 네트워크] 
R1(config-router)#version [1or2]
```

1. RIP 라우터 설정 모드로 들어간다. 
2. 광고할 네트워크를 Network라는 명령으로 광고한다. 광고는 주 네트워크 단위로 한다. 
3. RIPver1 또는 RIPver2를 설정한다.

1. network 명령은 라우터의 Interface에 설정된 네트워크를 인접한 라우터에게 광고하는 기능과 특정 Interface로 RIP 광고를 전송하는 기능이다.
2. 광고를 원하지 않는 네트워크는 광고에 포함시키지 않아도 되지만 RIP 라우팅 정보가 전송되는 Interface의 네트워크는 반드시 포함시켜야 프로토콜이 동작한다.

### RIP ver1과 RIP ver2 비교

```
RIP ver1 - Subnet Mask 정보 없음, Classful Routing, VLSM 지원 안 함, Broadcast(255.255.255.255)
RIP ver2 - Subnet Mask 정보 있음, Classless Routing, VLSM 지원, Multicast(224.0.0.9), Authentication 지원,Manually Summary 지원
공통점   - Distance Vector, Split Horizon,, Auto Summary
```

### RIP 정보 전송 차단

1. 기본적으로 RIP ver1은 Broadcast 주소(255.255.255.255)를 수신지로 설정하고 RIP ver2는 Multicast 주소(224.0.0.9)를 수신지로 설정하여 모든 Interface를 통해 광고한다.
2. 광고가 불필요한 Interface로의 광고 차단을 위해 다음과 같은 명령을 사용한다.

    ```
    R1(config-router)#passive-interface [광고 차단할 interface]
    ```

### RIP 광고 주기

1. 기본적으로 RIP은 인접한 라우터에게 30초마다 라우팅 정보를 보낸다.
2. 실제로는 여러 대의 라우터가 동시에 라우팅 정보를 보내어 부하를 발생시키는 것을 방지하기 위하여 약 15% 시차를 두어 라우팅 정보를 전송한다. 이를 RIP jitter라고 한다.

### RIP 메트릭(Metric)

1. RIP은 Hop Count를 Metric으로 사용한다.
2. Metric 16부터는 Routing Table에 경로 정보가 올려지지 않는다. (Inaccessible: 도달 불가능한 네트워크)

### RIP 타이머(Timer)

1. Update Timer : 30초
2. Invalid Timer : 180초. 라우팅 광고를 수신 받으면 다시 업데이트 된다.
3. HoldDown Timer : 180초. Routing Loop 방지. 라우팅 광고를 수신 받아도 무시된다.
4. Flush Timer : 240초. 만료되면 라우팅 테이블에서 지워진다.

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7a5ab550-e893-4121-b7a9-cb647020d416/screenshot-onedrive-live-com-redir-1612399853561.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7a5ab550-e893-4121-b7a9-cb647020d416/screenshot-onedrive-live-com-redir-1612399853561.png)

### RIP 정보 전송 규칙

1. Split Horizon: 라우팅 정보를 수신한 동일 Interface로는 동일한 라우팅 정보를 전송하지 않는다.
2. Route Poisoning: 특정 네트워크가 다운되면 해당 네트워크의 Metric을 16으로 설정한다.
3. Poison Reverse: 다운된 네트워크의 Metric 16을 수신 받으면 해당 네트워크를 다른 라우터에게 Route Poisonig 하고 수신 받은 Interface로는 Poison Reverse 한다.
4. 대체경로가 있는 경우 Route Poisoning에 대해 무시한다.

### RIP 기본 경로(Default Route)

```
R1(config)#ip default-network [주 네트워크]
```

현 라우터에 직접 연결된 네트워크의 임의의 주 네트워크를 사용하여 Default Network를 다른 라우터에게 전파할 수 있다.

```
R1(config-router)#default-information originate
```

현 라우터가 Default Network가 됨을 전파한다.

### RIP 축약(Summary)

1. Routing Protocol에서 축약 기능은 네트워크의 안정성과 성능을 향상시킬 수 있지만, 축약 기능을 잘 못 사용하면 아무리 성능 좋은 장비와 빠른 회선을 사용하여도 네트워크가 불안정해 질 수 있다.
2. RIP은 자동축약과 수동축약이 있다.
3. RIP 자동축약(Auto-Summary)
    1. RIP은 주 네트워크 경계(Major Network Boundary)에서 자동축약(Auto-Summary)이 이루어진다.
    2. 광고하는 라우터의 Routing Table과 주 네트워크 경계을 지나는 다른 라우터의 Routing Table을 확인하여 차이점을 확인한다.
    3. 비연속 네트워크(Discontiquous Network)를 만들면 Routing Table을 제대로 만들지 못한다.
    4. RIP ver1에서는 자동축약 기능이 중지되지 않는다.
    5. RIP ver2에서는 자동축약 기능을 중지시킬 수 있다.

    ```
    R1(config-router)#no auto-summary
    ```

### RIP 수동축약

1. 주 네트워크 범위 내에서만 축약시킬 수 있다.
2. 서로 다른 주 네트워크를 하나로 축약할 수 없으며, RIP 외의 라우팅 프로토콜은 주 네트워크 범위 내에서만 축약한다는 제약 사항이 없다.
3. 축약내용을 보내고자 하는 Interface에서 ip summary-address rip 명령어를 사용한다.

```
R1(config-if)#ip summary-address rip [네트워크] [서브넷마스크]
```

### RIP 네트워크 보안

1. RIP은 다른 라우팅 프로토콜에 비해서 특히 라우팅 정보 송,수신 시 보안에 주의해야 한다.
2. 다른 라우팅 프로토콜은 반드시 네이버(Neighbor) 관계를 맺은 후 정보를 교환하지만, RIP은 네이버(Neighbor) 관계를 맺지 않고 전송 가능한 모든 Interface로 라우팅 정보를 송신한다.
3. 따라서, Passive-interface 명령을 통해 라우팅 정보를 전송하지 못하게 적절히 차단할 필요가 있다.
4. 하지만, Passive-interface 명령을 사용해도 상대측에서 전송하는 라우팅 정보를 수신하여 Routing Table에 저장시킨다. 또, 동일한 주 네트워크를 사용하는 경우라면 network 명령으로 특정 인터페이스를 라우팅 프로세스에서 제외할 수도 없다.
5. 보안대책을 세우지 않은 RIP 네트워크는 해킹에 취약하다.

### 라우팅 정보 인증(Authentication)

1. 라우팅 정보 인증은 라우팅 정보 수신 시 암호를 확인하여 Routing Table에 저장시키는 것을 말한다.
2. RIP ver1은 인증(Authentication)을 지원하지 않고, RIP ver2는 인증(Authentication)을 지원한다.
3. 암호 설정

    ```
    R1(config)#key chain [WORD] 
    R1(config-keychain)#key [0~2^31] 
    R1(config-keychain-key)#key-string [암호]
    ```

    1. Key의 이름을 설정한다. 라우터 간에 서로 달라도 된다.
    2. Key의 IP를 설정한다. 라우터 간에 반드시 일치해야 한다.
    3. Key의 암호를 설정한다. 라우터 간에 반드시 일치해야 한다.
4. 암호 적용

    ```
    R1(config-if)#ip rip authentication key-chain [WORD] 
    R1(config-if)#ip rip authentication mode [text/md5]
    ```

    1. 설정된 Key를 상대 라우터와 연결된 인터페이스에 적용한다.

    인증방식은 평문 방식과 MD5 암호화 방식이 있으며 MD5 암호화 방식이 보안에 좋다.

    또한, 양측 라우터에는 동일한 인증방식을 사용해야 한다.
