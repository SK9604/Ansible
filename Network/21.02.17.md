# NAT

### 실습 네트워크

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/da192ab7-6dfe-4acc-8f9e-5cfc99566b74/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/da192ab7-6dfe-4acc-8f9e-5cfc99566b74/Untitled.png)

### 정적 NAT

1. 내부에서 사용하는(Inside) 사설(Private) IP와 공인(Public) IP가 1:1 정적으로 지정한다.
2. 정적(Static) NAT는 외부에서 내부의 사설(Private) IP 주소를 가진 장비에 접속이 필요할 경우 주로 사용한다.

### 정적(Static) NAT 설정 및 확인

```
1)
R1(config)# ip nat inside source static [Private IP] [Public IP] 
2)
R1(config)# interface [외부 인터페이스] 
R1(config-if)# ip nat outside 
R1(config)# interface [내부 인터페이스] 
R1(config-if)# ip nat inside
3) 
R1# show ip nat translations
```

1. 구성모드에서 ip nat inside source static 명령으로 Private IP 및 Public IP 지정한다.
2. 내부망과 연결되는 Interface에 ip nat inside 적용하고 인터넷망과 연결되는 Interface에 ip nat outside 적용한다.
3. NAT 동작 확인

### 동적(Dynamic) NAT

1. 사설(Private) IP와 변환되는 공인(Public) IP가 사전에 지정되지 않고 필요할 때(인터넷을 할 때) 정해지는 것을 말한다.
2. 다수의 사설 IP주소와 다수의 공인 IP주소가 M:N 동적으로 지정되는 것을 말한다.

### 동적(Dynamic) NAT 설정 및 확인

```
1)
R1(config)# access-list 1 permit [Private Network] [Wildcard Mask] 
2)
R1(config)# ip nat pool [NAME] [시작 Public IP] [끝 Public IP] netmask [Subnet Mask] 
3)
R1(config)# ip nat inside source list 1 pool [Pool Name] 
4)
R1(config)# interface [외부 인터페이스] 
R1(config-if)# ip nat outside 
R1(config)# interface [내부 인터페이스] 
R1(config-if)# ip nat inside 
5)
R1# show ip nat translations
```

1. Private IP 주소로 사용할 네트워크를 ACL로 지정한다.
2. Public IP 주소로 사용할 네트워크를 Pool로 지정한다.
3. ACL 및 Pool를 병합하여 NAT 설정한다.
4. 내부망과 연결되는 Interface에 ip nat inside 적용하고 인터넷망과 연결되는 Interface에 ip nat outside 적용한다.
5. NAT 동작 확인

### PAT(Port Address Translation)

1. 다수의 사설(Private) IP를 하나의 공인(Public) IP로 M:1 지정되는 것을 말한다.  
2. 하나의 공인(Public) IP에 서로 다른 포트(Port) 번호를 부여함으로써 구분하여 변환한다.

### PAT 설정 및 확인

```
1)
R1(config)# access-list 1 permit [Private Network] [Wildcard Mask] 
2)
R1(config)# ip nat inside source list 1 interface [Interface Name] overload 
3)
R1(config)# interface [외부 인터페이스] 
R1(config-if)# ip nat outside 
R1(config)# interface [내부 인터페이스] 
R1(config-if)# ip nat inside 
4)
R1# show ip nat translations
```

1. Private IP 주소로 사용할 네트워크를 ACL로 지정한다.
2. ACL 와 인터페이스 정보로 NAT-PAT 설정한다.
3. 내부망과 연결되는 Interface에 ip nat inside 적용하고 인터넷망과 연결되는 Interface에 ip nat outside 적용한다.
4. NAT 동작 확인
