# AWS

### 앞으로 계획

1 Course 

AWS Technical Essencial : AWS 서비스에서 가장 많이 사용되는 기술(2day, Qwiklab-1day)

2 Course

Architecting on AWS : AWS 서비스를 업무에 최적화 시키는 설계(5day, Qwiklab-3day)

3 Course

3 docker container (5day, VM) : container → kubernetes → CI/CD | Ansible → MSA & Serverless(서버관리X) - 업무 집중!(개발)

>>사전 지식 : 리눅스, 네트워크

[https://kgit.qwiklabs.com/](https://kgit.qwiklabs.com/) 가입하고 계정 생성

### Cloud 서비스 주요 키워드

- Elastic : 탄력적 = 융통성 있는 → 필요할 때 사용 → 쿠팡(day/week)

    증설? scale-up(자원 증설), scale-out(서버 증설)

    기업 서버 CPU 사용률이 60% 넘어가면 부하가 일어난다고 판단한다. 초과할 경우 자동 scale-out → 서버 부하가 적어지면 scale-in

- Agile : 민첩한, 빠른
- IaC(Infrastructure as Code) : code로 인프라를 개발한다.
- 이관작업(온프레미스 환경 → 클라우드) → lift and shift (6R)
- container 실체 = process + OS의 특정 경로

EC2 : Elastic Computing Cloud = VM

### AWS로 취업할 시 알아야 할 기본적인 것들

VPC(EC2 + Auto Scaling group + ELB(Elastic Load Balancing) + Web Service)

보안 그룹, 방화벽

EC2(VM), VPC, S3, EBS, IAM(사용자 관리), RDS(RDBMS+NoSQL, 정형DB, 비정형DB 식별), ELB, Auto Scaling, CloudWatch(log)

T자형 인간 : 여러 분야의 IT 기술을 다룰 수 있는 자 + 주무기를 장착한 자

파이형 인간 : 주무기 두 개 이상..

☝Architecting on AWS 자격증 필수

### AWS 클라우드의 장점

종량 과금제 : 쓴 만큼의 비용 지불

서버 운영비 > 클라우드 사용비 (평균 5%정도 절감됨). 비용 효율적인 서비스 운영

서버 구매시 고려해야 할 것

- OS, CPU, Memory, Disk...
- 근거 : 애플리케이션 + 일일 500명
- 피크타임 사용량 추정 + 10% = 용량 추정

CSP(Cloud Service Provider) : AWS, Azure, GCP

MSP(Managed Service Provider) : 메가존, 베스핀글로벌...

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/961b4b6d-cdad-4c5c-a9fc-9f3694681cd9/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/961b4b6d-cdad-4c5c-a9fc-9f3694681cd9/Untitled.png)

EBS(Elastic Block Storage) : disk ext4

EFS(공유파일시스템) = NFS

Cloud = 구름 = internet (web) 환경으로 접속 = 원하는 서비스를 사용할 수 있다.

internet = network = OSI 7

[네트워크 동영상](https://www.youtube.com/watch?v=XwphKCS_Kgw) 최소 3번 이상 시청하기!

CDN → free domai → hosting (Route53)

### 데이터베이스

비정형(nosql) **DynamoDB**

인메모리DB    Elasticache(redis, memcached)

정형DB            **RDS**

redshift            DW계열 (데이터 창고 → 분석) ⇒ 진열대 분석

### 분석

SQL select ~ 조회 → 분석

### 애플리케이션 서비스

서버리스 환경에서 사용되는 서비스들

### AWS 글로벌 인프라

- 리전

    지리적 위치

    최소한 2개 이상의 가용 영역으로 구성됨

- 가용 영역

    데이터 센터의 클러스터

    다른 사용 영역의 장애로부터 격리됨

### 설계도

draw.io 프로그램 사용

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0069b1a6-0108-4e04-808f-2f2cd6182b35/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0069b1a6-0108-4e04-808f-2f2cd6182b35/Untitled.png)

### CDN(Contents Delivery Network)

콘텐츠 → S3 → CloudFront → AWS인증서 발급 → free domaiin → Route53 (hosting)

### 짧은 Quiz

Q: 리전 내에 물리적으로 구별된 데이터 센터 그룹을 부르는 AWS 용어는 무엇입니까?

가용 영역

Q: 엣지 로케이션 보다 리전의 수가 더 많다?

NO

Q: AWS에서는 애플리케이션 서비스에 필요한 인프라를 소유 및 유지 관리하고, 고객은 필요에 따라 이를 프로비저닝(영역)하여 사용한다.

YES

Q: 리전 내 가용 영역 간의 관계는 무엇입니까?

각 가용 영역은 기본적으로 서로 격리되어 있지만, 한 리전의 가용 역역들은 지연 시간이 짧은 링크를 통해 연결되어 있습니다.

# AWS 기본 서비스

### Amazon Elastic Compute Cloud (Amazon EC2)

VM image와 동일

AMI(Amazon Machine Image) : 사전에 생성해 놓은 OS image

### Amazon Virtual Private Cloud (Amazon VPC) : 격리 영역(AZ, Subnet)

QwikLab 실습 1: VPC 구축 및 웹 서버 시작

### Amazon 스토리지 서비스

Amazon Simple Storage Service (Amazon S3) : 정적 콘텐츠 서비스

Amazon Elastic Block Store (Amazon EBS) : disk(=volume)

### EBS

linux + disk 10G add.

boot → kernel 인식 → fdisk /dev/sdc → partition → /dev/sdc1 → mkdir /DATA → mkfs.ext4 /dev/sdc1 → mount /dev/sdc1 /DATA → df -h → /etc/fstab 등록 → reboot

# Amazon EC2 (Elastic Compute Cloud)

크기 조정(scale) 가능한 컴퓨팅 파워

컴퓨팅 리소스 완전 제어

새로운 서버 인스턴스 확보 및 부팅 시간을 단축 (AMI, EBS (볼륨) 추가)

서버 조정 : 수평적 확장(scale-in, scale-out), 수직적 확장(scale-up, scale-down)

4대 컴퓨팅 리소스 : cpu, memory, disk, network(packet)

자료구조, cpu scheduler → 컴퓨터 구조

memory = physical memory, virtual memory(pagefile, swap)

disk : SSD(Flash mem), HDD

클라우드에서는 SSD를 기본으로 사용한다. IOPS N (provisioning)(IO Per Sec), MBPS (MB Per Sec)

컴퓨팅 요구 사항의 변화에 따라 컴퓨팅 리소스 파워를 조정

실제로 사용한 용량 만큼만 지불

Linux 또는 Windows 선택

안정성을 위해 여러 AWS 리전과 가용 영역에 걸쳐 배포(가용성, 내결함성)

태그를 사용하여 Amazon EC2 리소스를 관리

EC2는 다양한 사용 사례와 워크로드 요구 사항에 최적화된 다양한 인스턴스 유형을 제공합니다.

인스턴스를 선택할 때 고려할 사항:

- 코어수
- 메모리 크기
- 스토리지 크기 및 유형
- 네트워크 성능
- CPU 기술들 (GPU)

대부분의 AWS 인스턴스 유형에는 최신 세대 Intel ® Xeon 프로세서가 포함됩니다.

2 세대 Intel Xeon 확장형 프로세서의 최신 세대

최신 세대 Amazon EC2 인스턴스 유형에서 사용 가능

최대:

- CPU당 28개 코어
- 6개의 메모리 채널
- 대역폭/처리량 48개 PCle lane
- 100Gbps 네트워크 대역폭(C5n.16xlarge)

### EC2 Step

1. AMI 선택

    ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fd609eb5-0f35-46e6-9cfc-b8696c1daf31/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fd609eb5-0f35-46e6-9cfc-b8696c1daf31/Untitled.png)

2. 인스턴스 유형 선택

    ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d149b08c-6d89-4d60-8bf1-a4c10ade5910/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d149b08c-6d89-4d60-8bf1-a4c10ade5910/Untitled.png)

    ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e7249918-f204-442e-b429-8fe4c79b6350/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e7249918-f204-442e-b429-8fe4c79b6350/Untitled.png)

3. 인스턴스 구성

    ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c6aa8d5c-1528-44fa-ab00-9a786743e518/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c6aa8d5c-1528-44fa-ab00-9a786743e518/Untitled.png)

4. 스토리지 추가

    ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a0699b8e-20f2-4515-8584-c264cc5f95a2/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a0699b8e-20f2-4515-8584-c264cc5f95a2/Untitled.png)

5. 태그 추가

    ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2cfd3913-55b0-4543-af1f-6ba341a4e755/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2cfd3913-55b0-4543-af1f-6ba341a4e755/Untitled.png)

6. 보안 그룹 구성

    ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7c378962-079d-4b98-b576-f4f0c672bdbd/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7c378962-079d-4b98-b576-f4f0c672bdbd/Untitled.png)

7. 검토

    ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3c4604bb-bedc-47a9-acd7-6ebf6a7041cb/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3c4604bb-bedc-47a9-acd7-6ebf6a7041cb/Untitled.png)

8. EC2 접속을 위한 키

    EC2 접속 ec2_user + key(*.pem→ private key 변환) (ID/Password, root 사용금지)

    ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ad7407a3-6456-4ffa-b8d2-7649fe8a0d56/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ad7407a3-6456-4ffa-b8d2-7649fe8a0d56/Untitled.png)

    다운로드 후 관리를 잘 해야한다.

9. 확인

    ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/92028562-8225-415d-914d-652916d5929d/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/92028562-8225-415d-914d-652916d5929d/Untitled.png)

cat /etc/os-release, cat /etc/r-release

CIDR 계산법 알아야 함

0.0.0.0/0 : 모든 네트워크 연결 허용

::/0 : IPv6

Putty에 AWS_EC2_exam 으로 저장 (퍼블릭 IPv4 DNS, putty gen으로 만든 private key 장착)

Putty에서 

```
cat /etc/os-release
ifconfig
sudo su -
exit
df -h
sudo yum -y update
sudo yum -y install httpd
sudo service httpd start
sudo service httpd status
curl localhost:80
cd /var/www/html
ls
sudo vi index.html
<h1> Hello, Kim SeonKyeong. </h1>
curl localhost:80
```

퍼블릭 IPv4 주소를 인터넷 브라우저에 검색할 경우 아래 페이지가 뜨면 성공

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3ef7ed4d-443a-4014-80d4-b175ad768bce/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3ef7ed4d-443a-4014-80d4-b175ad768bce/Untitled.png)
