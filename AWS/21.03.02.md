# 정적 웹 사이트 호스팅 실습

정적 웹 사이트는 백엔드 처리 없이 고정 콘텐츠를 갖습니다. 이런 정적 웹 사이트는 HTML 페이지, 이미지, 스타일 시트 및 웹 사이트를 렌더링하는 데 필요한 모든 파일을 포함하지만 서버 측 스크립팅 또는 데이터베이스가 없습니다. 원하는 경우, 웹 페이지는 사용자의 웹 브라우저에서 실행되는 JavaScript를 사용하여 상호 작용하고 프로그래밍 로직을 실행할 수 있습니다.

Amazon Simple Storage Service(Amazon S3)에 원하는 콘텐츠를 업로드하고 공개적인 액세스를 허용하여 손쉽게 정적 웹 사이트를 호스팅할 수 있습니다. Amazon S3를 사용하면 서버 없이도 인터넷을 통해 언제 어디서든 원하는 양의 데이터를 저장하고 검색할 수 있습니다.

### 목표

- Amazon S3에 버킷 생성
- S3 버킷에 콘텐츠 업로드
- S3 버킷 객체에 대한 퍼블릭 액세스 활성화
- Amazon S3에 호스팅된 정적 웹 사이트 업데이트

### Qwiklab 캡처

- 실습

# Route 53 호스팅

- 캡처

Console → Route 53 → 호스팅 영역 생성 → 도메인 이름: 본인 도메인 → 설명 : "my domain hosting for cloudfront service and Route 53" → 호스팅 영역 생성 → 레코드에 NS 유형 값/트래픽 라우팅 대상 4개 copy → freenom 홈페이지에 manage domain → nameserver 설정에 붙여넣기

## ACM 인증서

- 캡처

Console → ACM 검색 → certificate manager → 인증서 프로비저닝 시작하기 → 공인 인증서 요청 → 도메인 입력 → DNS 검증 → 검토 → 확인 및 요청 → 검증 보류 상태 → 도메인 클릭 → Route 53에서 레코드 생성 클릭 → CNAME 유형 값 확인 → Route 53에 CNAME 유형의 레코드가 생성 되었음을 확인 → 인증서에 상태가 검증 보류에서 발급 완료로 바뀌면 완료 → cloudfront 페이지 → web 선택 → Distribution Settings 클릭 → edit 클릭 → SSL Certificate 에 Custom SSL Certificate 에 인증서 선택 → Route 53에서 A 레코드 추가(Cloud front 도메인 입력) → 나의 도메인 주소로 들어가 확인 → 성공!💡

# 컴퓨팅 계층 추가

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d366d1bc-9949-4080-b999-4487aa5c7d56/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d366d1bc-9949-4080-b999-4487aa5c7d56/Untitled.png)

# Amazon EC2를 사용하여 컴퓨팅 추가

## Amazon EC2

- 웹 호스팅 = Web + App
- 데이터베이스
- 인증 (자격 증명)
- 서버가 처리할 수 있는 모든 것 (S/W)

Amazon Linux 를 쓰는 EC2 인스턴스 시작 하고 PuTTY 연결 → 퍼블릭 IPv4 DNS 바뀌었을 것 → 수정 후 연결

```
EC2, Docker Container ⇒ yum, apt
```

### 가상 머신과 물리적 서버

Amazon EC2는 온프레미스 서버로 해결하기 어려운 몇몇 문제를 해결할 수 있습니다.

일회용 리소스를 사용하는 경우 → EC2 서버가 아닌 EC2 instance

데이터 기반 의사 결정, 빠른 반복, 자유로운 실수

# Amazon 머신 이미지(AMI)를 사용하여  Amazon EC2 인스턴스 시작

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3b801e2b-9e3f-4a67-a881-21970c9ef13f/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3b801e2b-9e3f-4a67-a881-21970c9ef13f/Untitled.png)

Amazon 머신 이미지(AMI)는 클라우드의 가상 서버인 인스턴스를 시작하는 데 필요한 정보를 제공합니다. 인스턴스를 시작할 때 소스 AMI를 지정해야 합니다. 동일한 구성의 인스턴스가 여러 개 필요할 때는 한 AMI에서 여러 인스턴스를 시작할 수 있습니다. 예를 들어, 단일 AMI를 사용해 일단의 (IP 주소만 제외하고 동일한) 인스턴스를 시작하고 하나의 로드 밸런서 뒤에 배치할 수 있습니다. 또한 여러 AMI를 사용하여 다양한 유형의 인스턴스를 시작할 수도 있습니다. 예를 들어, 아키텍처에서 한 AMI를 사용해 웹 서버 인스턴스를 구현하고 다른 AMI를 사용해 애플리케이션 서버 인스턴스를 구현할 수 있습니다.

### AMI에 포함되는 것들

- 하나 이상의 EBS 볼륨
- 루트 볼륨용 템플릿
- 시작 권한
- 블록 디바이스 매핑

### AMI는 어디서 가져옵니까?

- 사전 구축
- AWS Marketplace
- 자체 생성

### AMI는 어떠한 도움을 줍니까?

- 반복성
- 재사용성
- 복구 가능성 → AMI는 장애가 발생한 시스템을 동일한 AMI에서 생성된 새 인스턴스로 교체하는데 이상적이다.
- Marketplace 솔루션
- 백업

### EC2 Image Builder

원본 이미지 → EC2 Image Builder → 이미지에 설치된 소프트웨어 사용자 지정 → 원본 이미지와 AWS 제공 또는 사용자 지정 템플릿 → 테스트 이미지 → 골듬(Golden) 이미지 배포

# 사용자 데이터를 사용하여 Amazon EC2 인스턴스 시작

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f7df0bba-e95d-4ee5-90fd-b31273f4aad9/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f7df0bba-e95d-4ee5-90fd-b31273f4aad9/Untitled.png)

```
#!/bin/bash          // shellscript(셸) type
yum update -y        // 사전 yum update
yum -y install httpd // httpd(아파치 서비스) 설치
service httpd start  // httpd 서비스 시작
chkconfig httpd on   // 부팅 시 자동 켜지는 서비스 등록
```

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/434d40f3-4859-4032-b596-c4cc0ac5ce9a/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/434d40f3-4859-4032-b596-c4cc0ac5ce9a/Untitled.png)

hvm 가상화

PuTTY

```
$ curl http://169.254.169.254/latest/meta-data
ami-id
ami-launch-index
ami-manifest-path
block-device-mapping/
events/
hibernation/
hostname
identity-credentials/
instance-action
instance-id
instance-life-cycle
instance-type
local-hostname
local-ipv4
mac
metrics/
network/
placement/
profile
public-hostname
public-ipv4
public-keys/
reservation-id
security-groups
$ curl http://169.254.169.254/latest/meta-data/public-hostname
ec2-52-79-239-44.ap-northeast-2.compute.amazonaws.com
```

# Amazon EC2 및 데이터 저장

### Amazon Elastic Block Store(Amazon EBS)는 어떤 문제를 해결합니까?

- 애플리케이션에는 블록 수준 스토리지가 필요합니다
- 인스턴스 스토어는 휘발성입니다
- 종료 후에도 데이터가 지속되어야 합니다 → 영속성, 지속성 → 보존되어야 한다. 데이터베이스의 데이터파일
- 데이터 볼륨을 백업할 수 있어야 합니다

유의 사항 : 동일한 인스턴스에 여러 Amazon EBS 볼륨이 있을 수 있지만 각 볼륨은 한 번에 하나의 인스턴스에만 연결할 수 있습니다.

## EBS 볼륨 유형

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/29b4d436-f61f-4c92-8f8e-0c3e7aa6454f/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/29b4d436-f61f-4c92-8f8e-0c3e7aa6454f/Untitled.png)

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d0709d40-4f25-4bc6-b163-27ffd293fa1c/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d0709d40-4f25-4bc6-b163-27ffd293fa1c/Untitled.png)

### Amazon EBS 최적화 인스턴스

- 최적화된 구성 스택
- Amazon EBS I/O를 위한 추가 전용 용량
- Amazon EBS와 기타 트래픽 간 경합을 최소화
- 425Mbps ~ 14,000Mbps 범위의 옵션

### 공유 파일 시스템

여러 인스턴스가 동일한 스토리지를 사용해야 하는 경우 어떻게 합니까?

- Amazon EBS는 하나의 인스턴스에만 연결됩니다.
- Amazon S3가 하나의 옵션이지만 이상적인 것은 아닙니다.
- 이런 작업에는 Amazon EFS 및 Amazon FSx가 적합합니다.

## Amazon Elastic File System(EFS)

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/78cd93ee-4822-4cbb-86f3-d298c356c4a2/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/78cd93ee-4822-4cbb-86f3-d298c356c4a2/Untitled.png)

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c1ebd2f1-865e-415c-a746-52926b820697/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c1ebd2f1-865e-415c-a746-52926b820697/Untitled.png)

# Amazon EC2 인스턴스 유형

## Demo

### 개요

EC2 인스턴스 실행중 → PuTTY 연결

10G 짜리 볼륨 올려보기

t2.micro : 8G~30G 가능

- 캡처

Console → EC2 → 볼륨 → 볼륨 생성 → gp2로 10기가 생성 → 이름 EC2-vol1으로 설정 → 볼륨 우클릭 → 볼륨 연결 → 인스턴스 id → 디바이스 입력 → 연결 → PuTTY에서 lsblk → df -h 확인 → sudo reboot 

```
$ sudo fdisk /dev/xvdf

Welcome to fdisk (util-linux 2.30.2).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

Device does not contain a recognized partition table.
Created a new DOS disklabel with disk identifier 0x0781caf2.

Command (m for help): n
Partition type
   p   primary (0 primary, 0 extended, 4 free)
   e   extended (container for logical partitions)
Select (default p): p
Partition number (1-4, default 1): 1
First sector (2048-20971519, default 2048):
Last sector, +sectors or +size{K,M,G,T,P} (2048-20971519, default 20971519):

Created a new partition 1 of type 'Linux' and of size 10 GiB.

Command (m for help): w
The partition table has been altered.
Calling ioctl() to re-read partition table.
Syncing disks.

$ mkdir DATA
$ cd DATA/
$ sudo fdisk -l
Disk /dev/xvda: 8 GiB, 8589934592 bytes, 16777216 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: gpt
Disk identifier: D9A255FF-D4AA-4A93-888D-AF818AFCEEC1

Device       Start      End  Sectors Size Type
/dev/xvda1    4096 16777182 16773087   8G Linux filesystem
/dev/xvda128  2048     4095     2048   1M BIOS boot

Partition table entries are not in disk order.

Disk /dev/xvdf: 10 GiB, 10737418240 bytes, 20971520 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x0781caf2

Device     Boot Start      End  Sectors Size Id Type
/dev/xvdf1       2048 20971519 20969472  10G 83 Linux
$ sudo mkfs.ext4 /dev/xvdf1
mke2fs 1.42.9 (28-Dec-2013)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
655360 inodes, 2621184 blocks
131059 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=2151677952
80 block groups
32768 blocks per group, 32768 fragments per group
8192 inodes per group
Superblock backups stored on blocks:
        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632

Allocating group tables: done
Writing inode tables: done
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done

$ sudo file -s /dev/xvdf1
/dev/xvdf1: Linux rev 1.0 ext4 filesystem data, UUID=e007bb1b-f91b-4f65-8685-e794b55bf3cd (extents) (64bit) (large files) (huge files)
$ sudo vi /etc/fstab
	#
	UUID=bc07e2f4-d5ff-494b-adf1-6f6da7608cd6     /           xfs    defaults,noatime  1   1
	UUID=e007bb1b-f91b-4f65-8685-e794b55bf3cd     /home/ec2-user/DATA  ext4  defaults,noatime  0   2
$ sudo mount -a
$ df -h
Filesystem      Size  Used Avail Use% Mounted on
devtmpfs        482M     0  482M   0% /dev
tmpfs           492M     0  492M   0% /dev/shm
tmpfs           492M  408K  492M   1% /run
tmpfs           492M     0  492M   0% /sys/fs/cgroup
/dev/xvda1      8.0G  1.9G  6.2G  24% /
tmpfs            99M     0   99M   0% /run/user/1000
/dev/xvdf1      9.8G   37M  9.2G   1% /home/ec2-user/DATA
$ sudo reboot
$ df -h
Filesystem      Size  Used Avail Use% Mounted on
devtmpfs        482M     0  482M   0% /dev
tmpfs           492M     0  492M   0% /dev/shm
tmpfs           492M  412K  492M   1% /run
tmpfs           492M     0  492M   0% /sys/fs/cgroup
/dev/xvda1      8.0G  1.9G  6.2G  24% /
/dev/xvdf1      9.8G   37M  9.2G   1% /home/ec2-user/DATA
tmpfs            99M     0   99M   0% /run/user/1000
$ sudo chown -R ec2-user.ec2-user DATA/
$ cd DATA/
$ sudo echo 'hello, AWS.EBS' > aws_ebs.txt
$ ll
total 20
-rw-rw-r-- 1 ec2-user ec2-user    15 Mar  2 04:11 aws_ebs.txt
drwx------ 2 ec2-user ec2-user 16384 Mar  2 04:02 lost+found
```

볼륨 분리 전 ftab 에 UUID 줄 삭제 → 볼륨 분리 → PuTTY sudo reboot

## EC2 인스턴스: 이름에 포함된 의미

m5.large

m - 패밀리 이름 (t,m,c,x,r,p,f,h,i,d,g)

5 - 세대 번호

large - 인스턴스 크기

ex) t2.large, c5.xlarge, p3.2xlarge

### 유형

다음을 위해 올바른 유형을 선택하는 것은 매우 중요합니다.

효율적인 인스턴스 사용률, 불필요한 비용을 절감

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e8c7a158-ddd5-44e9-a197-5b99404c42c7/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e8c7a158-ddd5-44e9-a197-5b99404c42c7/Untitled.png)

범용 - 웹 사이트 및 웹 애플리케이션 같은 일시적으로 폭증할 수 있는 워크로드에 적합

컴퓨팅 최적화 - 컴퓨팅 집약적, 워크로드에 최적화

메모리 최적화 - 메모리 집약적 애플리케이션 또는 CPU보다 RAM이 더 필요한 경우

가속화 컴퓨팅 - 고성능 GPU 기반 인스턴스, 일반적으로 기계 학습/딥러닝에 사용

스토리지 최적화 - 디스크 처리량이 높은 최대 16TB의 HDD 기반 로컬 스토리지

### 사이트

[AWS Document 사이트](https://aws.amazon.com/ko/ec2/instance-types/) 항상 최신성을 유지하고 있는 레퍼런스 사이트이다.

### 패킷 유입량을 보기 위한 iptraf-ng 패킷 관제 도구 설치

```
- 설치
$ sudo yum -y install iptraf-ng
- 실행
$ sudo iptraf-ng
```

docker nic 다수

# Amazon EC2 요금 옵션

- 온디맨드 인스턴스
    - 컴퓨팅 파워에 대한 초당(Amazon Linux 및 Ubuntu) 또는 시간당(다른 모든 OS) 비용을 지불
    - 장기 약정 필요 없음
    - 선결제 금액 없음
    - 애플리케이션의 수요에 따라 컴퓨팅 파워를 확장 또는 축소
- 예약 인스턴스(RI)

    ```
    수요가 꾸준한 애플리케이션
    피크가 존재하는 애플리케이션
    컴퓨팅 비용을 절감하기 위한 수단
    ```

    아키텍처에 대해 상당한 할인을 제공할 수 있음

    - 용량에 대한 비용을 미리 지불
    - 3가지 선결제 방법
    - 여러 계정(결제 패밀리 내) 사이에서 공유 가능

    미리 용량을 예약하여 비용을 절감할 수 있음

- Savings Plans

    ```
    약정
    ```

    - Computing Savings Plans는 최대의 유연성과 최대 66%의 비용 절감을 지원
    - EC2 Instance Savings Plans는 리전 내 특정 인스턴스 패밀리에 적용되며 최대 72% 할인 혜택(스탠다드 RI와 마찬가지로 최대 72%)을 제공
    - MSA / Serverless
        - Fargate (docker container 배포 서비스) / ECR / ECS / EKS

    RI 구매를 조정할 필요가 없음

- 스팟인스턴스
    - 미사용 Amazon EC2 용량 구매
    - 입찰 불필요! - 장기적 수요 및 공급 추세에 따른 가격
    - 인스턴스 종료 2분 전에 중단 공지를 제공
    - 유연성이 성공의 핵심

    스팟 인스턴스는 온디맨드 요금 대비 최대 90%를 제공

    스팟 인스턴스는 상태 비저장, 내결함성 워크로드에 적합

### EC2 전용 옵션

- 전용 인스턴스

    다른 AWS 계정과 물리적으로 격리됩니다.

    규정 준수 또는 소프트웨어 라이선스 사용에 대한 요구 사항을 충족하는 데 도움이 됩니다.

- 전용 호스트

    고객 전용의 EC2 인스턴스 용량을 갖춘 물리적 서버입니다.

    규정 준수 또는 소프트웨어 라이선스 사용에 대한 엄격한 요구 사항을 충족하는 데 도움이 됩니다.

### 테넌시(Tenancy)

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d2c0e1f5-e9d6-4a5d-82ae-f439b95039cb/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d2c0e1f5-e9d6-4a5d-82ae-f439b95039cb/Untitled.png)

### AWS Compute Optimizer

AWS Compute Optimizer는 기계 학습(ML)을 사용하여 과거 사용률 지표를 분석함으로써 비용을 절감하고 성능을 개선할 수 있도록 워드로드에 가장 적합한 AWS 컴퓨팅 리소스를 제안합니다.

최대 25% 비용 절감

실행 가능한 권장 사항을 통해 성능 최적화

### 사용자의 인스턴스 추적

다음 작업에 도움이 되도록 AWS 리소스에 메타데이터 태그를 할당합니다.

관리, 검색, 필터링

### 태그 지정 모범 사례

- 태그에 대한 표준화된 대/소문자 구분방식
- 리소스 태그를 관리하는 데 도움이 되는 자동화된 도구를 구현합니다.
- 태그는 너무 적게 사용하는 것보다 너무 많이 사용하는 것이 낫습니다.
- 태그는 수정하기 쉽습니다.
- 예: 앱 버전, ENV, DNS  이름, 앱 스택 식별자

리소스가 어떤 기능을 수행하고 비용에 미치는 영향은 무엇인지 이해하는 데 도움이 됩니다.

# Amazon EC2 고려 사항

- 컴퓨팅 계층이 가능한 한 가장 짧은 지연 시간 및 가장 높은 초당 패킷 네트워크 성능을 요구합니까?

    클러스터 배치 그룹

- 애플리케이션에 서로 분리되어야 하는 소수의 크리티컬 인스턴스가 있습니까?

    분산형 배치 그룹

- HDFS, HBase, Cassandra 같은 대규모의 분산 및 복제 워크로드가 EC2에서 실행되고 있습니까?

    파티션 배치 그룹

# 지식 확인

### AMI란?

- AMI는 새로운 EC2 인스턴스를 생성할 때 사용되며 루트 볼륨에 대한 템플릿을 포함합니다.

### 인스턴스가 실행될 호스트를 선택하는 경우, 어떤 옵션을 사용해야 합니까?

- 전용 호스트

### Amazon EBS란 무엇입니까?

- 한 번에 한 개의 인스턴스에 연결되는 블록 스토리지 디바이스, Amazon S3에 백업할 수 있습니다.

# 데이터베이스 계층 추가

```
정형 : RDS 계열(oracle, mysql, mariadb, postgreSQL, ms-sql)
	     DynamooDB, mongoDB와 유사
```

### 고려할 사항

- 확장성

    얼마나 많은 처리량이 필요한가? 선택한 솔루션이 필요한 경우 나중에 확장이 가능한가?

- 총 스토리지 요구 사항

    데이터베이스가 얼마나 커야 하는가? 데이터가 GB, TB 또는 PB 규모인가? (IOPS/MBPS)

- 객체 크기 및 유형

    단순 데이터 구조, 대용량 데이터 객체, 또는 모두를 저장해야 하는가?

- 내구성

    어떤 수순의 데이터 내구성, 데이터 가용성 및 복구성이 필요한가? 관련 규제 의무가 있는가?

### 데이터베이스 유형

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5331ff11-5e60-403d-b29c-ebe64249bdb9/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5331ff11-5e60-403d-b29c-ebe64249bdb9/Untitled.png)

### 데이터 모델링

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4c764774-71ca-4e07-b64b-b48206e3e0b9/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4c764774-71ca-4e07-b64b-b48206e3e0b9/Untitled.png)

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/747fb895-bdb2-4a47-b24d-81bc0c245ca1/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/747fb895-bdb2-4a47-b24d-81bc0c245ca1/Untitled.png)

### 관계형

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/114746ae-2cfe-4ef6-b014-8b7cc6367e21/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/114746ae-2cfe-4ef6-b014-8b7cc6367e21/Untitled.png)

관계형 데이터베이스를 선택해야 할 경우:

- 엄격한 스키마 규칙 및 데이터 품질 적용이 필요
- 데이터베이스가 과도한 읽기/쓰기 용량을 필요로 하지 않음
- 최상의 성능을 필요로 하지 않는 관계형 데이터베이스의 경우 RDBMS가 자원 소비가 적은 최고의 솔루션이 될 수 있습니다.

비관계형 데이터베이스를 선택해야 할 경우:

- 데이터베이스를 수평적으로 확장해야 함
- 데이터가 기존 스키마에 적합하지 않음
- 읽기/쓰기 속도가 기존 SQL DB에서 경제적으로 지원할 수 있는 범위를 초과

SQL (struct

### 구조화된 데이터 스토리지 비교 및 대조

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5eeb07bd-5bde-4ae3-8585-471dfc54eda6/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5eeb07bd-5bde-4ae3-8585-471dfc54eda6/Untitled.png)

관계형 데이터베이스에서 가장 중요한 것 : ACID (atomicity, consistency, isolation, durability (원자성, 일관성, 고립성, 지속성))

### 비관리형 데이터베이스

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/46802985-dd70-4b39-93e7-6695939006c8/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/46802985-dd70-4b39-93e7-6695939006c8/Untitled.png)

### 관리형 데이터베이스

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c26e5fbb-a6b3-4de4-a610-0a6140fe54a6/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c26e5fbb-a6b3-4de4-a610-0a6140fe54a6/Untitled.png)

관리형 AWS 데이터베이스 서비스에서 데이터베이스를 호스팅하는 경우

## Amazon RDS 및 Amazon DynamoDB

### 데이터베이스 옵션

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1bff1cce-4c94-4984-83bf-5cb43cf06e70/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1bff1cce-4c94-4984-83bf-5cb43cf06e70/Untitled.png)

관계형 : RDS

비관계형 : Amazon DynamoDB

### Amazon RDS 계열 (관계형)

완전 관리형 관계형 데이터베이스 서비스

몇 분이면 새 인스턴스를 프로비저닝

몇 번의 마우스 클릭으로 수직으로 조정

다음과 같은 애플리케이션에 적합

보다 복잡한 데이터를 사용

데이터 세트를 결합하고 연결해야 함

구문 규칙을 적용해야 함

### Amazon RDS 및 Amazon Aurora

Amazon Aurora는 MySQL 및 PostgreSQL과 호환되는 완전 관리형 관계형 데이터베이스엔진입니다.

- MySQL 처리량의 최대 5배
- PostgreSQL의 처리량의 최대 3배
- 3개의 가용 영역에 6개의 복제본
- 기존 애플리케이션을 최소한으로 변경
- Aurora 글로벌 데이터베이스 지원

### Dynamo DB, Global Application Service

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/544e6774-cd13-492a-ba1d-ea9a429d4f56/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/544e6774-cd13-492a-ba1d-ea9a429d4f56/Untitled.png)

### RDS 사용 사례

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/04924111-e3b0-4a4d-a9c9-376b372e154e/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/04924111-e3b0-4a4d-a9c9-376b372e154e/Untitled.png)

고객으로 부터 데이터를 수집하고 사용자는 계속해서 로그가 남는다. 그 데이터들을 S3에 담는 이유는 분석을 위해서. 싸고 가용성이 좋고 속도를 어느정도 보장받을 수 있기 때문에 S3를 맨 앞단에 둔다. EC2 중간단. 원시데이터를 그대로 분석하려면 굉장히 오래걸린다. 정제하기 위해 EC2인스턴스에 원시 데이터를 넣고 정제된 데이터를 새로운 데이터 베이스에 넣든 분석을 할 수 있도록 한다.

### Amazon DynamoDB (비관계형)

완전 관리형 비관계형 데이터베이스 서비스

이벤트(triger) 중심 (람다)프로그래밍(서버리스 컴퓨팅)

최상의 수평 확장 가능

다음과 같은 애플리케이션에 적합:

대용량의 단순 데이터를 보유

신속하고 간편하게 확장해야 함

복잡한 조인이 필요하지 않음

### DynamoDB 데이터 모델

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/cb7c7e87-cd60-4e3c-a6d7-e03bc0313924/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/cb7c7e87-cd60-4e3c-a6d7-e03bc0313924/Untitled.png)

### DynamoDB의 글로벌 테이블

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/62f6cbed-1f49-446a-84b8-d589744558b4/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/62f6cbed-1f49-446a-84b8-d589744558b4/Untitled.png)

서로 다른 리전에 복제본이 있다.

일관성을 유지시키는 작업

### 사용 사례

순위표 및 점수 매기기

임시 데이터(온라인 카트), 장바구니

### DynamoDB 일관성 옵션

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/001f1cef-3453-41d4-bac6-e874ae03bc37/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/001f1cef-3453-41d4-bac6-e874ae03bc37/Untitled.png)

## 보안 제어: Amazon RDS 및 DynamoDB

### Amazon RDS 보안 제어

몇 가지 고려할 사항:

DB 자체에 대한 액세스

저장 시 암호화

전송 중 암호화

이벤트 알림

### DynamoDB 보안 제어

몇 가지 고려할 사항:

정의 가능한 액세스 권한

저장 시 암호화

SSL/TLS

고객 관리형 키

## AWS 데이터베이스로 데이터 마이그레이션

### AWS Database Migration Service(AWS DMS)

대부분의 상용 및 오픈 소스 데이터베이스와의 마이그레이션을 지원합니다.

Amazon EC2, Amazon RDS, Amazon S3 및 온프레미스의 데이터베이스 간 마이그레이션에 사용할 수 있습니다.

이기종 마이그레이션 → AWS Schema Conversion Tool

### 마이그레이션 옵션

일회성 마이그레이션

지속적 마이그레이션

### AWS Snowball Edge 및 AWS DMS를 사용

데이터 마이그레이션이 힘든 경우:

데이터베이스가 너무 큼

연결이 너무 느림

개인 정보 보호 및 보안 문제

AWS Snowball Edge 를 권장

AWS DMS에는 Snowball Edge와 연동할 수 있는 접점이 있습니다.

Snowball Edge 디바이스를 사용하여 하나 이상의 데이터베이스를 마이그레이션할 수 있습니다.

멀티 테라바이트 스토리지

인터넷 또는 DX 대역폭을 사용하지 않음

# AWS에서 웹 애플리케이션 배포

- Qwiklab 캡처
