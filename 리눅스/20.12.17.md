## ğŸ™‹ğŸ»â€â™€ï¸ ì—´ì—¬ëŸë²ˆì§¸ ë¹„ëŒ€ë©´ ìˆ˜ì—…

---

# ë‚´ìš© ì •ë¦¬

---

# íŒŒí‹°ì…˜(Partition) ì‘ì—…

---

- **íŒŒí‹°ì…˜ ì„¤ì • íˆ´**

    **fdisk, sfdisk, parted**

- **fdisk ëª…ë ¹ì–´**

    ```bash
    # fdisk /dev/sda
    # fdisk â€“l /dev/sda
    # fdisk â€“l | grep â€“I disk
    ```

- **sfdisk ëª…ë ¹ì–´**

    ```bash
    # sfdisk â€“d /dev/sdb > sdb.txt
    # sfdisk /dev/sdc < sdb.txt
    # sfdisk â€“d /dev/sdb | sfdisk /dev/sdc
    ```

- **parted ëª…ë ¹ì–´**

    ```bash
    # parted
    # parted /dev/sda print
    ```

---

**(ì£¼ì˜)** fdisk ëª…ë ¹ì–´ëŠ” 2TB ì´ìƒì˜ ë””ìŠ¤í¬ì—ì„œ íŒŒí‹°ì…˜ ì„¤ì •ì„ í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ ì´ëŸ° ê²½ìš°ì—ëŠ” parted ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒí‹°ì…˜ ì„¤ì •ì„ í•´ì•¼ í•œë‹¤. í˜„ì¬ 2TB íŒŒí‹°ì…˜ ìš©ëŸ‰ì„ í•´ê²° í•˜ê¸° ìœ„í•´ì„œ PC-BIOS íŒŒí‹°ì…˜ í…Œì´ë¸”ì„ GTP(GUID íŒŒí‹°ì…˜ í…Œì´ë¸”)ë¡œ ëŒ€ì²´ ë˜ì—ˆë‹¤. fdisk ëª…ë ¹ì–´ëŠ” GTP íŒŒí‹°ì…˜ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ì´ëŸ° ê²½ìš° ë°˜ë“œì‹œ parted ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

parted ëª…ë ¹ì–´ ì‚¬ìš©ë²•ì— ëŒ€í•œ ë¶€ë¶„ì€ ì´ êµì¬ì—ì„œ ë‹¤ë£¨ì§€ ì•ŠëŠ”ë‹¤. ì´ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” parted ë§¤ë‰´ì–¼ í˜ì´ì§€ë¥¼ ì°¸ê³ í•œë‹¤. ë˜ëŠ” ì¸í„°ë„·ìƒì˜ ì •ë³´ë¥¼ ì°¸ê³ í•˜ê¸° ë°”ë€ë‹¤.

## fdisk ëª…ë ¹ì–´ë¥¼ í†µí•œ ë””ìŠ¤í¬ íŒŒí‹°ì…˜ êµ¬ì„±

fdiskë¥¼ ì´ìš©í•´ ìƒˆë¡œìš´ íŒŒí‹°ì…˜ì˜ ìƒì„±, ê¸°ì¡´ íŒŒí‹°ì…˜ì˜ ì‚­ì œ, íŒŒí‹°ì…˜ì˜ íƒ€ì… ê²°ì • ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ°ë°, ë˜ë“œí—· ê³„ì—´ì˜ ë°°í¬íŒì€ ì„¤ì¹˜ì‹œ ëŒ€ë¶€ë¶„ Disk Druid ìœ í‹¸ë¦¬í‹°ë¥¼ ì´ìš©í•´ì„œ íŒŒí‹°ì…˜ì„ ë¶„í• í•œë‹¤. ê·¸ë ‡ì§€ë§Œ, ì „í†µì ìœ¼ë¡œ fdiskë¥¼ ì‚¬ìš©í•˜ë©° ì´ê²ƒì€ ë””ìŠ¤í¬ ë“œë£¨ì´ë“œë³´ë‹¤ ìœ ì—°í•˜ê¸° ë•Œë¬¸ì— ì•„ì§ë„ ì„¤ì¹˜ì‹œì— ì´ í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•œë‹¤.

fdisk í”„ë¡œê·¸ë¨ì€ í•œë²ˆì— í•œ ë””ìŠ¤í¬ì— ëŒ€í•´ì„œë§Œ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤. fdiskëŠ” ëª…ë ¹ì–´ í”„ë¡¬í”„íŠ¸ ì¤‘ì‹¬ì˜ ë§¤ìš° ê°„ë‹¨í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆë‹¤.

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# fdisk -l         (# fdisk -l | grep Disk)
# fdisk â€“l /dev/sda 

# fdisk /dev/sda
```

[ëª…ë ¹ì–´ ì˜µì…˜]

**ì˜µì…˜ : ì„¤ëª…**

**-l :** List the partition tables
-v : Print version number of fdisk program and exit
-s : The size of the partition (in blocks) is printed on the standard output
-b sectorsize : Specify the sector size of the disk

### [EX1] íŒŒí‹°ì…˜ ì •ë³´ í™•ì¸

```bash
# fdisk -l /dev/sda
Disk /dev/sda: 32.2 GB, 32212254720 bytes
255 heads, 63 sectors/track, 3916 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1        3465    27832581   83  Linux
/dev/sda2            3466        3596     1052257+  82  Linux swap / Solaris
/dev/sda3            3597        3660      514080   83  Linux
/dev/sda4            3661        3916     2056320    5  Extended
/dev/sda5            3661        3724      514048+  83  Linux
/dev/sda6            3725        3788      514048+  83  Linux
/dev/sda7            3789        3852      514048+  83  Linux
/dev/sda8            3853        3916      514048+  83  Linux
```

```bash
# fdisk -l 

Disk /dev/sda: 107.4 GB, 107374182400 bytes, 209715200 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk label type: dos
Disk identifier: 0x000d99dd

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1            2048     4196351     2097152   82  Linux swap / Solaris
/dev/sda2         4196352     5220351      512000   83  Linux
/dev/sda3         5220352     6244351      512000   83  Linux
/dev/sda4         6244352   209715199   101735424    5  Extended
/dev/sda5         6246400     7270399      512000   83  Linux
/dev/sda6         7272448     8296447      512000   83  Linux
/dev/sda7         8298496     9322495      512000   83  Linux
/dev/sda8   *     9324544   209715199   100195328   83  Linux

Disk /dev/sdb: 2147 MB, 2147483648 bytes, 4194304 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
-> ëª¨ë“  ë””ìŠ¤í¬/íŒŒí‹°ì…˜ì— ëŒ€í•œ ì •ë³´ ì¶œë ¥

# fdisk -s /dev/sda1   (# fdisk -l /dev/sda | grep sda1)
27832581
# fdisk -s /dev/sda3   (# fdisk -l /dev/sda | grep sda3)
514080
```

### [EX2] íŒŒí‹°ì…˜ ì‘ì—…

```bash
# fdisk /dev/sdb
Device contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel
Building a new DOS disklabel. Changes will remain in memory only,
until you decide to write them. After that, of course, the previous
content won''t be recoverable.

Warning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)

command (m for help) : m                 /* fdisk command menuì˜ ì •ë³´ê°€ ë³´ì¸ë‹¤*/
Command action
   a   toggle a bootable flag              /* ë¶€íŠ¸ ê°€ëŠ¥í•œ í”Œë˜ê·¸ë¡œ ë³€ê²½ (ë¶€íŠ¸ íŒŒí‹°ì…˜ ì €ì¥) */
   b   edit bsd disklabel                  /* bsd ë””ìŠ¤í¬ ë ˆì´ë¸”ì„ í¸ì§‘ */
   c   toggle the dos compatibility flag   /* ë„ìŠ¤ í˜¸í™˜ í”Œë˜ê·¸ë¡œ ë³€ê²½ */
   **d   delete a partition                 /* íŒŒí‹°ì…˜ ì‚­ì œ */**
   **l   list known partition types        /* ì•Œë ¤ì§„ íŒŒí‹°ì…˜ í˜•íƒœì˜ ëª©ë¡ (ì§€ì› ê°€ëŠ¥í•œ íŒŒí‹°ì…˜ ë³´ê¸°) */**
   m   print this menu                    /* ë©”ë‰´ë¥¼ ì¶œë ¥ */
   **n   add a new partition                 /* ìƒˆë¡œìš´ íŒŒí‹°ì…˜ ì¶”ê°€ */**
   o   create a new empty DOS partition table /* ìƒˆë¡œìš´ ë„ìŠ¤ íŒŒí‹°ì…˜ í…Œì´ë¸”ì„ ìƒì„± */
   **p   print the partition table         /* íŒŒí‹°ì…˜ í…Œì´ë¸”ì„ ì¶œë ¥ (íŒŒí‹°ì…˜ ì„¤ì • ìƒíƒœ í™•ì¸) */**
   q   quit without saving changes     /* ë³€ê²½ì„ ì €ì¥í•˜ì§€ ì•Šê³  ì¢…ë£Œ */
   s   create a new empty Sun disklabel  /* ìƒˆë¡œìš´ Sun ë””ìŠ¤í¬ ë ˆì´ë¸”ì„ ìƒì„± */
   t   change a partition's system id    /* íŒŒí‹°ì…˜ì˜ ì‹œìŠ¤í…œ idë¥¼ ë³€ê²½ (íŒŒì¼ ì‹œìŠ¤í…œ ìœ í˜• ë³€ê²½) */
   u   change display/entry units          /* í‘œì‹œ/ì—”íŠ¸ë¦¬ ë‹¨ìœ„ë¥¼ ë³€ê²½ */
   v   verify the partition table         /* íŒŒí‹°ì…˜ í…Œì´ë¸”ì„ ì ê²€ */
   w   write table to disk and exit      /* ë””ìŠ¤í¬ì— í…Œì´ë¸”ì„ ê¸°ë¡í•˜ê³  ë¹ ì ¸ë‚˜ê°(íŒŒí‹°ì…˜ ì •ë³´ ì €ì¥) */
   **x   extra functionality (experts only)**

Command (m for help): p

Disk /dev/sdb: 2147 MB, 2147483648 bytes, 4194304 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk label type: dos
Disk identifier: 0x807e9ace

   Device Boot      Start         End      Blocks   Id  System
Command (m for help): n
Partition type:
   p   primary (0 primary, 0 extended, 4 free)
   e   extended
Select (default p): p
Partition number (1-4, default 1): 1
First sector (2048-4194303, default 2048): 
Using default value 2048
Last sector, +sectors or +size{K,M,G} (2048-4194303, default 4194303): +200M
Partition 1 of type Linux and of size 200 MiB is set

Command (m for help): p

Disk /dev/sdb: 2147 MB, 2147483648 bytes, 4194304 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk label type: dos
Disk identifier: 0x807e9ace

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1            2048      411647      204800   83  Linux

Command (m for help): w
The partition table has been altered!

Calling ioctl() to re-read partition table.
Syncing disks.

(í•„ìš”í•˜ë©´ ëª…ë ¹ì–´ ìˆ˜í–‰)
# ls â€“l /dev/sdb* 
# fdisk -l /dev/sdb
```

### [EX3] íŒŒí‹°ì…˜ ìƒì„± 2

MBRì—ì„œ íŒŒí‹°ì…˜ì„ ìƒì„±í•˜ëŠ” ê²½ìš°ì— íŒŒí‹°ì…˜ì€ ê¸°ë³¸ 4ê°œê¹Œì§€ ìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤

íŒŒí‹°ì…˜ì„ êµ¬ì„±í•˜ëŠ” ì´ìœ  : ìš©ëŸ‰ì„ ë¶„í• í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, 

```bash
# fdisk /dev/sdb
Welcome to fdisk (util-linux 2.32.1).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

Device does not contain a recognized partition table.
Created a new DOS disklabel with disk identifier 0x1871582e.

Command (m for help): m
Help:

  DOS (MBR)
   a   toggle a bootable flag
   b   edit nested BSD disklabel
   c   toggle the dos compatibility flag

  Generic
   d   delete a partition
   F   list free unpartitioned space
   l   list known partition types
   n   add a new partition
   p   print the partition table
   t   change a partition type
   v   verify the partition table
   i   print information about a partition

  Misc
   m   print this menu
   u   change display/entry units
   x   extra functionality (experts only)

  Script
   I   load disk layout from sfdisk script file
   O   dump disk layout to sfdisk script file

  Save & Exit
   w   write table to disk and exit
   q   quit without saving changes

  Create a new label
   g   create a new empty GPT partition table
   G   create a new empty SGI (IRIX) partition table
   o   create a new empty DOS partition table
   s   create a new empty Sun partition table

Command (m for help): p
Disk /dev/sdb: 2 GiB, 2147483648 bytes, 4194304 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xf9b18818

Command (m for help): n
Partition type
   p   primary (0 primary, 0 extended, 4 free)
   e   extended (container for logical partitions)
Select (default p):  p
Partition number (1-4, default 1): 1
First sector (2048-4194303, default 2048): 2048
Last sector, +sectors or +size{K,M,G,T,P} (2048-4194303, default 4194303): 4194303

Created a new partition 1 of type 'Linux' and of size 2 GiB.

Command (m for help): p
Disk /dev/sdb: 2 GiB, 2147483648 bytes, 4194304 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xf9b18818

Device     Boot Start     End Sectors Size Id Type
/dev/sdb1        2048 4194303 4192256   2G 83 Linux

Command (m for help): w
The partition table has been altered.
Calling ioctl() to re-read partition table.
Syncing disks.

# fdisk -l /dev/sdb
Disk /dev/sdb: 2 GiB, 2147483648 bytes, 4194304 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xa9b7cf8d

Device     Boot Start     End Sectors Size Id Type
/dev/sdb1        2048 4194303 4192256   2G 83 Linux
```

### [EX4] íŒŒí‹°ì…˜ ì‚­ì œ

```bash
# fdisk /dev/sdb
Command (m for help): p

Disk /dev/sdb: 2147 MB, 2147483648 bytes, 4194304 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk label type: dos
Disk identifier: 0x807e9ace

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1            2048      411647      204800   83  Linux
/dev/sdb2          411648      616447      102400    5  Extended
/dev/sdb5          413696      616447      101376   83  Linux
Command (m for help): d
Partition number (1,2,5, default 5): 5
Partition 5 is deleted

Command (m for help): p

Disk /dev/sdb: 2147 MB, 2147483648 bytes, 4194304 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk label type: dos
Disk identifier: 0x807e9ace

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1            2048      411647      204800   83  Linux
/dev/sdb2          411648      616447      102400    5  Extended

Command (m for help): d
Partition number (1,2, default 2): 2
Partition 2 is deleted

Command (m for help): p

Disk /dev/sdb: 2147 MB, 2147483648 bytes, 4194304 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk label type: dos
Disk identifier: 0x807e9ace

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1            2048      411647      204800   83  Linux

Command (m for help): w 
The partition table has been altered!

Calling ioctl() to re-read partition table.
Syncing disks.
```

```bash
1G
1Gib ì˜ ì°¨ì´
# man units
Decimal prefixes
       The SI system of units uses prefixes that indicate powers of ten.  A
       kilometer is 1000 meter, and a megawatt is 1000000 watt.  Below the
       standard prefixes.

              Prefix   Name    Value
              y        yocto   10^-24 = 0.000000000000000000000001
              z        zepto   10^-21 = 0.000000000000000000001
              a        atto    10^-18 = 0.000000000000000001
              f        femto   10^-15 = 0.000000000000001
              p        pico    10^-12 = 0.000000000001
              n        nano    10^-9  = 0.000000001
              Âµ        micro   10^-6  = 0.000001
              m        milli   10^-3  = 0.001
              c        centi   10^-2  = 0.01
              d        deci    10^-1  = 0.1
              da       deka    10^ 1  = 10
              h        hecto   10^ 2  = 100
              k        kilo    10^ 3  = 1000
              M        mega    10^ 6  = 1000000
              G        giga    10^ 9  = 1000000000
              T        tera    10^12  = 1000000000000
              P        peta    10^15  = 1000000000000000
              E        exa     10^18  = 1000000000000000000
              Z        zetta   10^21  = 1000000000000000000000
              Y        yotta   10^24  = 1000000000000000000000000

       The symbol for micro is the Greek letter mu, often written u in an
       ASCII context where this Greek letter is not available.  See also

              âŸ¨http://physics.nist.gov/cuu/Units/prefixes.htmlâŸ©

   Binary prefixes
       The binary prefixes resemble the decimal ones, but have an additional
       'i' (and "Ki" starts with a capital 'K').  The names are formed by
       taking the first syllable of the names of the decimal prefix with
       roughly the same size, followed by "bi" for "binary".

              Prefix   Name   Value
              Ki       kibi   2^10 = 1024
              Mi       mebi   2^20 = 1048576
              Gi       gibi   2^30 = 1073741824
              Ti       tebi   2^40 = 1099511627776
              Pi       pebi   2^50 = 1125899906842624
              Ei       exbi   2^60 = 1152921504606846976

       See also
```

- ì£¼ íŒŒí‹°ì…˜ : íŒŒí‹°ì…˜ ìì²´ë¡œ ì‚¬ìš©
- í™•ì¥ íŒŒí‹°ì…˜ : ë…¼ë¦¬ íŒŒí‹°ì…˜ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê»ë°ê¸°

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/27b1e4a1-bff4-407a-b55e-4a1bf0af574f/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/27b1e4a1-bff4-407a-b55e-4a1bf0af574f/Untitled.png)

```bash
Command (m for help): p
Disk /dev/sdb: 2 GiB, 2147483648 bytes, 4194304 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xa9b7cf8d

Device     Boot   Start     End Sectors  Size Id Type
/dev/sdb1       2099200 2508799  409600  200M 83 Linux
/dev/sdb2       2508800 2918399  409600  200M 83 Linux
/dev/sdb3       2918400 4194303 1275904  623M 83 Linux
/dev/sdb4          2048 2099199 2097152    1G  5 Extended
/dev/sdb5          4096  208895  204800  100M 83 Linux
/dev/sdb6        210944 2099199 1888256  922M 83 Linux

Partition table entries are not in disk order.
```

(ì¶”ê°€ì ì¸ ì‹¤ìŠµ) fdisk ëª…ë ¹ì–´ë¥¼ í†µí•œ íŒŒí‹°ì…˜ ì‘ì—…

[ì‹¤ìŠµ1]

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/339049c0-8ff8-452d-a3c7-aea6b0a09f56/_2020-03-03__6.08.42.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/339049c0-8ff8-452d-a3c7-aea6b0a09f56/_2020-03-03__6.08.42.png)

```bash
ì£¼ íŒŒí‹°ì…˜1 - 200M
ì£¼ íŒŒí‹°ì…˜2 - 200M
ì£¼ íŒŒí‹°ì…˜3 - 200M
ì£¼ íŒŒí‹°ì…˜4 - ë‚˜ë¨¸ì§€ ìš©ëŸ‰

# fdisk /dev/sdb
Command (m for help): n
Partition type
   p   primary (0 primary, 0 extended, 4 free)
   e   extended (container for logical partitions)
Select (default p): p
Partition number (1-4, default 1):
First sector (2048-4194303, default 2048):
Last sector, +sectors or +size{K,M,G,T,P} (2048-4194303, default 4194303): +200M

Created a new partition 1 of type 'Linux' and of size 200 MiB.

Command (m for help): n
Partition type
   p   primary (1 primary, 0 extended, 3 free)
   e   extended (container for logical partitions)
Select (default p): p
Partition number (2-4, default 2): 2
First sector (411648-4194303, default 411648):
Last sector, +sectors or +size{K,M,G,T,P} (411648-4194303, default 4194303): +200M

Created a new partition 2 of type 'Linux' and of size 200 MiB.

Command (m for help): n
Partition type
   p   primary (2 primary, 0 extended, 2 free)
   e   extended (container for logical partitions)
Select (default p): p
Partition number (3,4, default 3):
First sector (821248-4194303, default 821248):
Last sector, +sectors or +size{K,M,G,T,P} (821248-4194303, default 4194303): +200M

Created a new partition 3 of type 'Linux' and of size 200 MiB.

Command (m for help): n
Partition type
   p   primary (3 primary, 0 extended, 1 free)
   e   extended (container for logical partitions)
Select (default e): p

Selected partition 4
First sector (1230848-4194303, default 1230848):
Last sector, +sectors or +size{K,M,G,T,P} (1230848-4194303, default 4194303):

Created a new partition 4 of type 'Linux' and of size 1.4 GiB.

Command (m for help): p
Disk /dev/sdb: 2 GiB, 2147483648 bytes, 4194304 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xa9b7cf8d

Device     Boot   Start     End Sectors  Size Id Type
/dev/sdb1          2048  411647  409600  200M 83 Linux
/dev/sdb2        411648  821247  409600  200M 83 Linux
/dev/sdb3        821248 1230847  409600  200M 83 Linux
/dev/sdb4       1230848 4194303 2963456  1.4G 83 Linux
```

```bash
Command (m for help): d
ë‹¤ ì§€ìš°ê¸°
```

[ì‹¤ìŠµ2]

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/092f5749-bc87-47d7-a802-33d5fb17f037/_2020-03-03__6.09.33.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/092f5749-bc87-47d7-a802-33d5fb17f037/_2020-03-03__6.09.33.png)

```bash
ì£¼ íŒŒí‹°ì…˜1   - 200M
ì£¼ íŒŒí‹°ì…˜2   - 200M
í™•ì¥ íŒŒí‹°ì…˜3 - ë‚˜ë¨¸ì§€ ìš©ëŸ‰
ë…¼ë¦¬ íŒŒí‹°ì…˜5 - 200M
ë…¼ë¦¬ íŒŒí‹°ì…˜6 - 200M
ë…¼ë¦¬ íŒŒí‹°ì…˜7 - ë‚˜ë¨¸ì§€ ìš©ëŸ‰

# fdisk /dev/sdb

Command (m for help): n
Partition type
   p   primary (0 primary, 0 extended, 4 free)
   e   extended (container for logical partitions)
Select (default p): p
Partition number (1-4, default 1):
First sector (2048-4194303, default 2048):
Last sector, +sectors or +size{K,M,G,T,P} (2048-4194303, default 4194303): +200M

Created a new partition 1 of type 'Linux' and of size 200 MiB.

Command (m for help): n
Partition type
   p   primary (1 primary, 0 extended, 3 free)
   e   extended (container for logical partitions)
Select (default p): p
Partition number (2-4, default 2):
First sector (411648-4194303, default 411648):
Last sector, +sectors or +size{K,M,G,T,P} (411648-4194303, default 4194303): +200M

Created a new partition 2 of type 'Linux' and of size 200 MiB.

Command (m for help): n
Partition type
   p   primary (2 primary, 0 extended, 2 free)
   e   extended (container for logical partitions)
Select (default p): e
Partition number (3,4, default 3):
First sector (821248-4194303, default 821248):
Last sector, +sectors or +size{K,M,G,T,P} (821248-4194303, default 4194303):

Created a new partition 3 of type 'Extended' and of size 1.6 GiB.

Command (m for help): n
All space for primary partitions is in use.
Adding logical partition 5
First sector (823296-4194303, default 823296):
Last sector, +sectors or +size{K,M,G,T,P} (823296-4194303, default 4194303): +200M

Created a new partition 5 of type 'Linux' and of size 200 MiB.

Command (m for help): n
All space for primary partitions is in use.
Adding logical partition 6
First sector (1234944-4194303, default 1234944):
Last sector, +sectors or +size{K,M,G,T,P} (1234944-4194303, default 4194303): +200M

Created a new partition 6 of type 'Linux' and of size 200 MiB.

Command (m for help): n
All space for primary partitions is in use.
Adding logical partition 7
First sector (1646592-4194303, default 1646592):
Last sector, +sectors or +size{K,M,G,T,P} (1646592-4194303, default 4194303):

Created a new partition 7 of type 'Linux' and of size 1.2 GiB.

Command (m for help): p
Disk /dev/sdb: 2 GiB, 2147483648 bytes, 4194304 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xa9b7cf8d

Device     Boot   Start     End Sectors  Size Id Type
/dev/sdb1          2048  411647  409600  200M 83 Linux
/dev/sdb2        411648  821247  409600  200M 83 Linux
/dev/sdb3        821248 4194303 3373056  1.6G  5 Extended
/dev/sdb5        823296 1232895  409600  200M 83 Linux
/dev/sdb6       1234944 1644543  409600  200M 83 Linux
/dev/sdb7       1646592 4194303 2547712  1.2G 83 Linux
```

[ì‹¤ìŠµ3]

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3ab37435-9190-46d5-966a-4d6fb373cf6f/_2020-03-03__6.10.11.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3ab37435-9190-46d5-966a-4d6fb373cf6f/_2020-03-03__6.10.11.png)

```bash
í™•ì¥ íŒŒí‹°ì…˜1 - ì „ì²´ ìš©ëŸ‰
ë…¼ë¦¬ íŒŒí‹°ì…˜5 - 200M
ë…¼ë¦¬ íŒŒí‹°ì…˜6 - 200M
ë…¼ë¦¬ íŒŒí‹°ì…˜7 - 200M
ë…¼ë¦¬ íŒŒí‹°ì…˜8 - ë‚˜ë¨¸ì§€ ìš©ëŸ‰

# fdisk /dev/sdb

Command (m for help): n
Partition type
   p   primary (0 primary, 0 extended, 4 free)
   e   extended (container for logical partitions)
Select (default p): e
Partition number (1-4, default 1): 1
First sector (2048-4194303, default 2048):
Last sector, +sectors or +size{K,M,G,T,P} (2048-4194303, default 4194303):

Created a new partition 1 of type 'Extended' and of size 2 GiB.

Command (m for help): n
All space for primary partitions is in use.
Adding logical partition 5
First sector (4096-4194303, default 4096):
Last sector, +sectors or +size{K,M,G,T,P} (4096-4194303, default 4194303): +200M

Created a new partition 5 of type 'Linux' and of size 200 MiB.

Command (m for help): n
All space for primary partitions is in use.
Adding logical partition 6
First sector (415744-4194303, default 415744):
Last sector, +sectors or +size{K,M,G,T,P} (415744-4194303, default 4194303): +200M

Created a new partition 6 of type 'Linux' and of size 200 MiB.

Command (m for help): n
All space for primary partitions is in use.
Adding logical partition 7
First sector (827392-4194303, default 827392):
Last sector, +sectors or +size{K,M,G,T,P} (827392-4194303, default 4194303): +200M

Created a new partition 7 of type 'Linux' and of size 200 MiB.

Command (m for help): n
All space for primary partitions is in use.
Adding logical partition 8
First sector (1239040-4194303, default 1239040):
Last sector, +sectors or +size{K,M,G,T,P} (1239040-4194303, default 4194303):

Created a new partition 8 of type 'Linux' and of size 1.4 GiB.

Command (m for help): p
Disk /dev/sdb: 2 GiB, 2147483648 bytes, 4194304 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xa9b7cf8d

Device     Boot   Start     End Sectors  Size Id Type
/dev/sdb1          2048 4194303 4192256    2G  5 Extended
/dev/sdb5          4096  413695  409600  200M 83 Linux
/dev/sdb6        415744  825343  409600  200M 83 Linux
/dev/sdb7        827392 1236991  409600  200M 83 Linux
/dev/sdb8       1239040 4194303 2955264  1.4G 83 Linux
```

[ì‹¤ìŠµ4]

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/198385c5-c6d6-4e68-9518-793afe42bb3f/_2020-03-03__6.11.00.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/198385c5-c6d6-4e68-9518-793afe42bb3f/_2020-03-03__6.11.00.png)

```bash
ì£¼ íŒŒí‹°ì…˜ 2  - 200M
í™•ì¥ íŒŒí‹°ì…˜1 - ë‚˜ë¨¸ì§€ ìš©ëŸ‰
ë…¼ë¦¬ íŒŒí‹°ì…˜5 - ë‚˜ë¨¸ì§€ ìš©ëŸ‰

# fdisk /dev/sdb

Command (m for help): n
Partition type
   p   primary (0 primary, 0 extended, 4 free)
   e   extended (container for logical partitions)
Select (default p): p
Partition number (1-4, default 1): 2
First sector (2048-4194303, default 2048):
Last sector, +sectors or +size{K,M,G,T,P} (2048-4194303, default 4194303): +200M

Created a new partition 2 of type 'Linux' and of size 200 MiB.

Command (m for help): n
Partition type
   p   primary (1 primary, 0 extended, 3 free)
   e   extended (container for logical partitions)
Select (default p): e
Partition number (1,3,4, default 1):
First sector (411648-4194303, default 411648):
Last sector, +sectors or +size{K,M,G,T,P} (411648-4194303, default 4194303):

Created a new partition 1 of type 'Extended' and of size 1.8 GiB.

Command (m for help): n
Partition type
   p   primary (1 primary, 1 extended, 2 free)
   l   logical (numbered from 5)
Select (default p): l

Adding logical partition 5
First sector (413696-4194303, default 413696):
Last sector, +sectors or +size{K,M,G,T,P} (413696-4194303, default 4194303):

Created a new partition 5 of type 'Linux' and of size 1.8 GiB.

Command (m for help): p
Disk /dev/sdb: 2 GiB, 2147483648 bytes, 4194304 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xa9b7cf8d

Device     Boot  Start     End Sectors  Size Id Type
/dev/sdb1       411648 4194303 3782656  1.8G  5 Extended
/dev/sdb2         2048  411647  409600  200M 83 Linux
/dev/sdb5       413696 4194303 3780608  1.8G 83 Linux
```

**(ë³µì›)** ì¶”ê°€ì ì¸ ì‹¤ìŠµì´ ëë‚˜ë©´ ì›ë˜ íŒŒí‹°ì…˜ìœ¼ë¡œ ë³µì›í•œë‹¤.

- /dev/sdb1 (1G)
- Parted

ì‹¤ì œë¡œ ë…¼ë¦¬ íŒŒí‹°ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ì€ê°€ìš”?

ì„¤ì¹˜ìš© ë””ìŠ¤í¬

ë„¤íŠ¸ì›Œí¬ ë””ìŠ¤í¬

ë³´í†µì€ ì› íŒŒí‹°ì…˜ìœ¼ë¡œ êµ¬ì„±ì„ í•˜ê¸° ë•Œë¬¸ì— ë…¼ë¦¬ íŒŒí‹°ì…˜ì„ ìƒì„±í•  ì¼ì´ ê±°ì˜ ì—†ë‹¤.

### ê°™ì€ ìš©ëŸ‰ì˜ ê°™ì€ ê°¯ìˆ˜ì˜ ë””ìŠ¤í¬ íŒŒí‹°ì…˜ì„ êµ¬ì„±í•  ë•Œ êµ¬ì„±í•´ë‘” íŒŒí‹°ì…˜ ì„¤ì • ë³µì‚¬í•˜ê¸°

```bash
# sfdisk -d /dev/sdb > sdb.backup
# cat sdb.backup
label: dos
label-id: 0xa9b7cf8d
device: /dev/sdb
unit: sectors

/dev/sdb1 : start=        2048, size=      409600, type=83
/dev/sdb2 : start=      411648, size=      409600, type=83
/dev/sdb3 : start=      821248, size=      409600, type=83
/dev/sdb4 : start=     1230848, size=     2963456, type=83

# sfdisk /dev/sdc < sdb.backup
ë˜ëŠ”
# sfdisk -d /dev/sdb | sfdisk /dev/sdc
Checking that no-one is using this disk right now ... OK

Disk /dev/sdc: 2 GiB, 2147483648 bytes, 4194304 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes

>>> Script header accepted.
>>> Script header accepted.
>>> Script header accepted.
>>> Script header accepted.
>>> Created a new DOS disklabel with disk identifier 0xa9b7cf8d.
/dev/sdc1: Created a new partition 1 of type 'Linux' and of size 200 MiB.
/dev/sdc2: Created a new partition 2 of type 'Linux' and of size 200 MiB.
/dev/sdc3: Created a new partition 3 of type 'Linux' and of size 200 MiB.
/dev/sdc4: Created a new partition 4 of type 'Linux' and of size 1.4 GiB.
All partitions used.

New situation:
Disklabel type: dos
Disk identifier: 0xa9b7cf8d

Device     Boot   Start     End Sectors  Size Id Type
/dev/sdc1          2048  411647  409600  200M 83 Linux
/dev/sdc2        411648  821247  409600  200M 83 Linux
/dev/sdc3        821248 1230847  409600  200M 83 Linux
/dev/sdc4       1230848 4194303 2963456  1.4G 83 Linux

The partition table has been altered.
Calling ioctl() to re-read partition table.
Syncing disks.
```

ì„¤ì • ì‚­ì œí•˜ê¸°

ddëª…ë ¹ì–´ : ë””ë°”ì´ìŠ¤ì—ì„œ ë””ë°”ì´ìŠ¤ë¡œ ìë£Œë¥¼ ë³µì‚¬í•˜ëŠ” ê²½ìš° ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´. ë¸”ëŸ­ì„ ë³µì‚¬í•˜ëŠ” ìš©ë„. ë¬¸ì œ ìˆëŠ” ë¸”ë¡ë„ ë˜‘ê°™ì´ ë³µì‚¬í•˜ëŠ” ê²ƒì´ ë¬¸ì œì´ë‹¤.

```bash
# dd if=/dev/zero of=/dev/sdb bs=1M count=1   < zeroë¥¼ sdbë¡œ ë³µì‚¬
1+0 records in
1+0 records out
1048576 bytes (1.0 MB, 1.0 MiB) copied, 0.00134129 s, 782 MB/s
# fdisk -l /dev/sdb
Disk /dev/sdb: 2 GiB, 2147483648 bytes, 4194304 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
]# dd if=/dev/zero of=/dev/sdc bs=512 count=1
1+0 records in
1+0 records out
512 bytes copied, 0.000609245 s, 840 kB/s
# fdisk -l /dev/sdc
Disk /dev/sdc: 2 GiB, 2147483648 bytes, 4194304 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
```

```bash
# while true
> do
> cat /dev/zero > /test/zerofile
> ls -l /test/zerofile
> sleep 1
> echo
> done
```

NULL ê³¼ ZEROì˜ ì°¨ì´

```bash
null : ë¹„ì–´ì§
zero : 0ìœ¼ë¡œ ì±„ì›Œì§
```

# íŒŒì¼ ì‹œìŠ¤í…œì´ë€?

---

- íŒŒì¼ì‹œìŠ¤í…œ(**File System**)ì´ë€ íŒŒì¼ì„ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” êµ¬ì¡°ì²´ê³„ì´ë‹¤.
- íŒŒì¼ì‹œìŠ¤í…œ ì¢…ë¥˜ í™•ì¸

    ```bash
    # export LANG=ko_KR.utf8
    # man 5 filesystems
    ```

- íŒŒì¼ì‹œìŠ¤í…œ ì¢…ë¥˜

    **ext2** ì˜ˆì „ ë¦¬ëˆ…ìŠ¤ê°€ ì‚¬ìš©í•˜ë˜ íŒŒì¼ì‹œìŠ¤í…œì´ë‹¤.

    **ext3** í˜„ì¬ **CentOS 5.X** ì‚¬ìš©í•˜ëŠ” íŒŒì¼ì‹œìŠ¤í…œ

    **ext4** í˜„ì¬ **CentOS 6.X** ì‚¬ìš©í•˜ëŠ” íŒŒì¼ì‹œìŠ¤í…œ

    **xfs** ê³ ì„±ëŠ¥ ì €ë„ë§ íŒŒì¼ì‹œìŠ¤í…œ

---

## íŒŒì¼ ì‹œìŠ¤í…œì´ë€?

íŒŒì¼ì‹œìŠ¤í…œì´ë€? íŒŒì¼ì„ `ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì²´ê³„`ì´ë‹¤. íŒŒì¼ê³¼ ê·¸ ì•ˆì— ë“  ìë£Œë¥¼ ì €ì¥í•˜ê³  ì°¾ê¸° ì‰½ë„ë¡ ìœ ì§€ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ë§í•œë‹¤. ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ ìš°ë¦¬ëŠ” ë¬¼ë¦¬ì  ì¥ì¹˜ì¸ ë””ìŠ¤í¬ë¥¼ ì¥ì°©í•˜ê³  ì¥ì°©í•œ ë””ìŠ¤í¬ë¥¼ ì‚¬ìš© í•  ìˆ˜ ìˆë„ë¡ ìš°ë¦¬ëŠ” íŒŒí‹°ì…˜ ì˜ì—­(fdisk)ì„ ì§€ì •í•´ì¤€ë‹¤. ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ì˜ì—­ì„ ì§€ì •í•´ ì£¼ì—ˆìœ¼ë©´ ê·¸ ì•ˆì— ë°ì´í„°(íŒŒì¼ê³¼ ìë£Œ)ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬ í•  ìˆ˜ ìˆë„ë¡ íŒŒì¼ ì‹œìŠ¤í…œì„ ë§Œë“¤ì–´ ì¤€ë‹¤.

```bash
# mkfs.xfs /dev/sdb1
meta-data=/dev/sdb1              isize=512    agcount=4, agsize=12800 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=1, sparse=1, rmapbt=0
         =                       reflink=1
data     =                       bsize=4096   blocks=51200, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0, ftype=1
log      =internal log           bsize=4096   blocks=1368, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
# mount /dev/sdb1 /testdisk
# df | grep testdisk
/dev/sdb1         199328   11900    187428   6% /testdisk
```

ìš´ì˜ì²´ì œê°€ íŒŒí‹°ì…˜ ì˜ì—­ì„ ì¸ì‹ í•  ìˆ˜ ìˆë„ë¡ (ìš´ì˜ì²´ì œë§Œì´ ì•Œ ìˆ˜ ìˆë„ë¡) íŒŒì¼ ì‹œìŠ¤í…œì„ ë§Œë“¤ì–´ì¤˜ì•¼ í•œë‹¤. ê¸°ì–µ ê³µê°„ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ìœ ì§€í•˜ê¸° ì‰½ë„ë¡ ë„ì™€ì£¼ëŠ” ê²ƒì´ íŒŒì¼ ì‹œìŠ¤í…œì´ë‹¤. íŒŒì¼ ì‹œìŠ¤í…œì€ ìš´ì˜ì²´ì œì— ì˜í•´ì„œ ë§Œë“¤ì–´ì§„ íŒŒì¼ì´ë‹¤. íŒŒì¼ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” íŒŒì¼ ì‹œìŠ¤í…œì´ ë§Œë“¤ì–´ ì§„ ê³³ì—ë‹¤ê°€ íŒŒì¼ì„ ë§Œë“¤ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ ê·¸ëƒ¥ í†µì¹­í•´ì„œ íŒŒì¼ ì‹œìŠ¤í…œì´ë¼ ë¶€ë¥¸ë‹¤.

## íŒŒì¼ ì‹œìŠ¤í…œ ì¢…ë¥˜

```bash
â–  íŒŒì¼ì‹œìŠ¤í…œì˜ ì¢…ë¥˜
---------------------------------------------------------------------------
ext2     (mkfs.ext2)     ë¦¬ëˆ…ìŠ¤ ì´ì „ ë²„ì „ì—ì„œ ì‚¬ìš©í•˜ëŠ” íŒŒì¼ì‹œìŠ¤í…œ
ext3     (mkfs.ext3)     í˜„ì¬ CentOS 5.X ì‚¬ìš©í•˜ëŠ” íŒŒì¼ì‹œìŠ¤í…œ
ext4     (mkfs.ext4)     CentOS 6.X ì‚¬ìš©í•˜ëŠ” íŒŒì¼ì‹œìŠ¤í…œ
xfs      (mkfs.xfs)      ê³ ì„±ëŠ¥ ì €ë„ë§ íŒŒì¼ ì‹œìŠ¤í…œ(eXtended File System)
msdos    mfs.msdos)      MS-DOS filesystem
---------------------------------------------------------------------------
```

íŒŒì¼ì‹œìŠ¤í…œì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ì´ ë§¤ë‰´ì–¼ í˜ì´ì§€ë¥¼ ì°¸ê³ í•œë‹¤. ë‹¤ìŒì˜ ë§¤ë‰´ì–¼ ë‚´ìš©ì€ ì¡°ê¸ˆ ì˜¤ë˜ëœ ë‚´ìš©ì´ë‹¤. ì°¸ê³ ìš©ìœ¼ë¡œë§Œ í™•ì¸í•œë‹¤.

### [EX1] íŒŒì¼ì‹œìŠ¤í…œì— ëŒ€í•œ ì •ë³´ í™•ì¸

```bash
# export LANG=ko_KR.utf8 
# man 5 filesystem
```

## ëŒ€í‘œì ì¸ íŒŒì¼ì‹œìŠ¤í…œì˜ íŠ¹ì„±

- íŒŒì¼ ì‹œìŠ¤í…œì˜ ë‚´ìš© í¼ì¹¨

# íŒŒì¼ ì‹œìŠ¤í…œ êµ¬ì¡°

- ë¦¬ëˆ…ìŠ¤ëŠ” ê°€ìƒ íŒŒì¼ ì‹œìŠ¤í…œ(**Virtual File System**) êµ¬ì¡°ë¥¼ ê°€ì§„ë‹¤.

       ë”°ë¼ì„œ ìˆ˜ë§ì€ íŒŒì¼ ì‹œìŠ¤í…œì„ ì§€ì›í•œë‹¤.

- íŒŒì¼ ì‹œìŠ¤í…œ êµ¬ì¡° í™•ì¸(íŒŒì¼ì‹œìŠ¤í…œì˜ meta-data í™•ì¸)

    ```bash
     **# dumpe2fs /dev/sda1**
    ```

- íŒŒì¼ ì‹œìŠ¤í…œ êµ¬ì¡°

    **MBR**

    **Boot Sector**

    **Partition**

    **super block**

    **group descriptor table**

    **block bitmap**

    **inode bitmap**

    **inode tables**

    **data block**Â 

---

## íŒŒì¼ì‹œìŠ¤í…œì˜ êµ¬ì¡°

ë¦¬ëˆ…ìŠ¤ì—ì„œ íŒŒì¼ì˜ ê°œë…ì€ íŒŒì¼ì„ ë°”ì´íŠ¸ì˜ ë‹¨ìˆœí•œ ì—°ì†ìœ¼ë¡œ ê°„ì£¼í•œë‹¤. ë¦¬ëˆ…ìŠ¤ëŠ” ëª¨ë“  ì…ì¶œë ¥ ë””ë°”ì´ìŠ¤ë“¤ì„ íŒŒì¼ë¡œ ì·¨ê¸‰í•˜ì—¬ ì‹¬ì§€ì–´ NIC, Disk, Keyborad, printerë„ íŒŒì¼ë¡œ ì·¨ê¸‰í•œë‹¤. íŒŒì¼ì‹œìŠ¤í…œì€ ëª¨ë“  ì…ì¶œë ¥ì„ ì œì–´í•˜ëŠ” Device Driverì™€ ì—°ê²°ë˜ì–´ ìˆê³  ì‹œìŠ¤í…œ í˜¸ì¶œì„ í†µí•˜ì—¬ ì‚¬ìš©ìë¡œë¶€í„° ë°ì´í„°ë¥¼ ë°›ì•„ ì²˜ë¦¬í•œë‹¤.

ë¦¬ëˆ…ìŠ¤ëŠ” VFS(Virtual File System)ì„ í†µí•˜ì—¬ ext2, jfs2, procì™€ ê°™ì€ ë‹¤ì–‘í•œ íŒŒì¼ì‹œìŠ¤í…œì„ ì§€ì›í•˜ê³  ìˆë‹¤.

â–  ê°€ìƒ íŒŒì¼ì‹œìŠ¤í…œ êµ¬ì¡°(Virtual File System)

VFSëŠ” ëª¨ë“  íŒŒì¼ ì‹œìŠ¤í…œì´ í•„ìš”ë¡œ í•˜ëŠ” ì¼ë ¨ì˜ functionì„ ì •ì˜í•˜ê³  ìˆë‹¤. ì´ëŸ¬í•œ ì¸í„°í˜ì´ìŠ¤ëŠ” ì„¸ ì¢…ë¥˜ ëŒ€ìƒê³¼ ê´€ë ¨ëœ ì¼ë ¨ì˜ ë™ì‘ìœ¼ë¡œ êµ¬ì„±ëœë‹¤. ì¦‰ íŒŒì¼ì‹œìŠ¤í…œ, ì•„ì´ë…¸ë“œ, ì—´ë¦° íŒŒì¼ì´ë‹¤.

VFSëŠ” ì»¤ë„ì—ì„œ ì§€ì›í•˜ëŠ” íŒŒì¼ì‹œìŠ¤í…œ íƒ€ì…ì„ ì•Œê³  ìˆë‹¤. ì´ëŠ” ì»¤ë„ êµ¬ì„± ë™ì•ˆì— ë§Œë“¤ì–´ì§€ëŠ” í…Œì´ë¸”ì„ ì‚¬ìš©í•œë‹¤. ì´ í…Œì´ë¸” ë‚´ì˜ ê° ì—”íŠ¸ë¦¬ê°€ í•˜ë‚˜ì˜ íŒŒì¼ ì‹œìŠ¤í…œ íƒ€ì…ì„ ì •ì˜í•œë‹¤. ì¦‰ íŒŒì¼ì‹œìŠ¤í…œ íƒ€ì…ì˜ ì´ë¦„ê³¼ functionì— ëŒ€í•œ í¬ì¸í„°ì´ë‹¤.

```bash
# df
Filesystem     1K-blocks    Used Available Use% Mounted on
devtmpfs          463280       0    463280   0% /dev
tmpfs             482024       0    482024   0% /dev/shm
tmpfs             482024    6772    475252   2% /run
tmpfs             482024       0    482024   0% /sys/fs/cgroup
/dev/sda6       44471076 1815076  42656000   5% /
/dev/sda2       48803552  571660  48231892   2% /var
/dev/sda3        5232640   69556   5163084   2% /home
/dev/sda1        2086912  180036   1906876   9% /boot
tmpfs              96404       0     96404   0% /run/user/0
# xfs_info /dev/sda6
meta-data=/dev/sda6              isize=512    agcount=4, agsize=2780800 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=1, sparse=1, rmapbt=0
         =                       reflink=1
data     =                       bsize=4096   blocks=11123200, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0, ftype=1
log      =internal log           bsize=4096   blocks=5431, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
```

ì–´ë–¤ íŒŒì¼ ì‹œìŠ¤í…œì´ ë§ˆìš´íŠ¸ ë  ë•Œ ê·¸ì— ë§ëŠ” ë§ˆìš´íŠ¸ functionì´ ë¶ˆëŸ¬ ë“¤ì—¬ì§„ë‹¤. ì´ functionì´ ë””ìŠ¤í¬ì˜ ìŠˆí¼ë¸”ë¡ì„ ì½ëŠ” ê²ƒì„ ë‹´ë‹¹í•˜ë©°, ë‚´ë¶€ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•˜ê³  VFSì— ë§ˆìš´íŠ¸ëœ íŒŒì¼ì‹œìŠ¤í…œ descriptorë¥¼ ëŒë ¤ì¤€ë‹¤.

íŒŒì¼ì‹œìŠ¤í…œì´ ë§ˆìš´íŠ¸ ëœ í›„ì— VFS functionì€ ë¬¼ë¦¬ì ì¸ íŒŒì¼ì‹œìŠ¤í…œ ë£¨í‹´ì„ ì ‘ê·¼í•˜ëŠ”ë° ì´ descriptorë¥¼ ì‚¬ìš©í•œë‹¤. ë§ˆìš´íŠ¸ëœ íŒŒì¼ì‹œìŠ¤í…œ descriptorëŠ” ëª¨ë“  íŒŒì¼ì‹œìŠ¤í…œ íƒ€ì…ì— ê³µí†µëœ ëª‡ ê°€ì§€ì˜ ë°ì´í„°ë¥¼ í¬í•¨ í•œë‹¤. ë¬¼ë¦¬ì  íŒŒì¼ì‹œìŠ¤í…œ ì»¤ë„ì½”ë“œì— ì˜í•´ ì œê³µë˜ëŠ” functionì— ëŒ€í•œ í¬ì¸í„°ì™€ ë¬¼ë¦¬ì ì¸ íŒŒì¼ ì‹œìŠ¤í…œ ì½”ë“œì— í•„ìš”í•œ ê³ ìœ ì •ë³´ì´ë‹¤. íŒŒì¼ì‹œìŠ¤í…œ descriptorì— í¬í•¨ëœ function í¬ì¸í„°ëŠ” VFSê°€ íŒŒì¼ ì‹œìŠ¤í…œ ë‚´ë¶€ ë£¨í‹´ì„ ì ‘ê·¼í•˜ëŠ” ê²ƒì„ í—ˆìš©í•œë‹¤.

ë‘ ê°€ì§€ì˜ ë‹¤ë¥¸ descriptorê°€ VFSì— ì˜í•´ ì‚¬ìš©ëœë‹¤. ì•„ì´ë…¸ë“œ descriptorì™€ ì—´ë¦° íŒŒì¼ descriptorì´ë‹¤. ê° descriptorëŠ” ì‚¬ìš© ì¤‘ì¸ íŒŒì¼ì— ê´€ë ¨ëœ ì •ë³´ì™€ ë¬¼ë¦¬ì ì¸ íŒŒì¼ì‹œìŠ¤í…œ ì½”ë“œì— ì˜í•´ ì œê³µë˜ëŠ” ì¼ë ¨ì˜ ë™ì‘ì„ ê°–ê³  ìˆë‹¤. ì•„ì´ë…¸ë“œ descriptorëŠ” ì–´ë–¤ íŒŒì¼ì— ëŒ€í•´ì„œë„ ì‚¬ìš©ë˜ëŠ” functionì— ëŒ€í•œ í¬ì¸í„°ë¥¼ í¬í•¨í•˜ëŠ”ë° ë¹„í•´ (e.g. create, unlink) íŒŒì¼ descriptorëŠ” ì—´ë¦° íŒŒì¼ì— ëŒ€í•´ì„œë§Œ ì‘ë™í•˜ëŠ” functionì— ëŒ€í•œ í¬ì¸í„°ë¥¼ ê°–ëŠ”ë‹¤. (e.g.read,write)

# íŒŒì¼ì‹œìŠ¤í…œ êµ¬ì¡°

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5a62562c-c5d6-4c61-85b4-69220fbf4186/_2020-03-03__6.20.16.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5a62562c-c5d6-4c61-85b4-69220fbf4186/_2020-03-03__6.20.16.png)

---

```bash
< ì›ë¦¬(Principle) >
ë¦¬ëˆ…ìŠ¤ ì»¤ë„ì€ íŒŒì¼ì— ëŒ€í•œ ì‹œìŠ¤í…œ ì½œì´ ìˆì„ ë•Œ ì‚¬ìš©ë˜ì–´ì§€ëŠ” ë²„ì¸„ì–¼ íŒŒì¼ ì‹œìŠ¤í…œ ê³„ì¸µì„ ê°–ê³  ìˆë‹¤. VFSëŠ” íŒŒì¼ê³¼ ê´€ë ¨ ì‹œìŠ¤í…œ ì½œì„ ë‹¤ë£¨ëŠ” ì¤‘ê°„ ê³„ì¸µì´ë©° ì…ì¶œë ¥ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë¬¼ë¦¬ì ì¸ íŒŒì¼ì‹œìŠ¤í…œì½”ë“œì—ì„œ í•„ìš”í•œ functionì„ ë¶€ë¥¸ë‹¤.
ì´ëŸ¬í•œ ê°„ì ‘ ë©”ì»¤ë‹ˆì¦˜ì€ ì—¬ëŸ¬ ê°œì˜ íŒŒì¼ì‹œìŠ¤í…œ í˜•íƒœì˜ í†µí•©ì„ ì‰½ê²Œ í•˜ê¸° ìœ„í•´ ìœ ë‹‰ìŠ¤ ê³„ì—´ ìš´ì˜ì²´ì œì— í”íˆ ì‚¬ìš©ëœë‹¤.
ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ê°€ íŒŒì¼ ê´€ë ¨ ì‹œìŠ¤í…œ ì½œì„ ì¼ìœ¼í‚¬ ë•Œ ì»¤ë„ì€ VFSì— í¬í•¨ëœ functionì„ ë¶€ë¥¸ë‹¤. ì´ functionì€ êµ¬ì¡°ì™€ ë…ë¦½ì ì¸ ì¡°ì‘ì„ ì‹¤í–‰í•˜ê³  ê·¸ ìš”ì²­ì„ ë¬¼ë¦¬ì ì¸ íŒŒì¼ì‹œìŠ¤í…œì½”ë“œì— í¬í•¨ëœ functionìœ¼ë¡œ ì—°ê²°í•´ ì¤€ë‹¤. ë¬¼ë¦¬ì ì¸ íŒŒì¼ì‹œìŠ¤í…œ ì½”ë“œê°€ êµ¬ì¡°ì— ì˜ì¡´í•˜ëŠ” ë™ì‘ì„ ë‹´ë‹¹í•œë‹¤. íŒŒì¼ ì‹œìŠ¤í…œ ì½”ë“œëŠ” ì¥ì¹˜ì— ëŒ€í•´ I/Oë¥¼ ìš”ì²­í•˜ê¸° ìœ„í•´ ë²„í¼ ìºì‰¬ functionì„ ì‚¬ìš©í•œë‹¤.
ì´ êµ¬ì¡°ê°€ ì˜† ê·¸ë¦¼ì— ì„¤ëª…ë˜ì–´ ìˆë‹¤.
```

### [The Linux Storage Stack Diagram](https://upload.wikimedia.org/wikipedia/commons/3/30/IO_stack_of_the_Linux_kernel.svg)

```bash
# mkfs.ext4 /dev/sdb1
mke2fs 1.45.6 (20-Mar-2020)
Creating filesystem with 204800 1k blocks and 51200 inodes
Filesystem UUID: 9025ef2f-c0c9-4355-b51c-fea612776aaf
Superblock backups stored on blocks:
        8193, 24577, 40961, 57345, 73729

Allocating group tables: done
Writing inode tables: done
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done
```

## íŒŒì¼ì‹œìŠ¤í…œ êµ¬ì¡° ë¶„ì„í•˜ê¸°

ëŒ€ë¶€ë¶„ì˜ ë¦¬ëˆ…ìŠ¤ ì‚¬ìš©ìë“¤ì€ ext ì‹œë¦¬ì¦ˆ íŒŒì¼ì‹œìŠ¤í…œì„ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ìì‹ ì´ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë°°í¬ë³¸ì˜ íŒŒì¼ì‹œìŠ¤í…œì„ ëª¨ë¥´ê³  ìˆë‹¤ë©´ mount ëª…ë ¹ì„ ìˆ˜í–‰í•˜ë©´ ì•Œ ìˆ˜ ìˆë‹¤.

```bash
# mount | grep /dev/sda
/dev/sda6 on / type xfs (rw,relatime,seclabel,attr2,inode64,noquota)
/dev/sda3 on /home type xfs (rw,relatime,seclabel,attr2,inode64,noquota)
/dev/sda1 on /boot type ext4 (rw,relatime,seclabel)
/dev/sda2 on /var type xfs (rw,relatime,seclabel,attr2,inode64,noquota)
```

extì‹œë¦¬ì¦ˆ íŒŒì¼ì‹œìŠ¤í…œì€ Remy Cardì™€ Wayne Davisonì— ì˜í•´ ê³ ì•ˆë˜ì—ˆê³ , Remy Card, Theodore Ts'o, Stephen Tweedieì— ì˜í•´ ê°œëŸ‰ë˜ì—ˆë‹¤. ext íŒŒì¼ì‹œìŠ¤í…œì€ ìœ„ì—ì„œë„ ì–¸ê¸‰í–ˆë“¯ì´ ê°€ì¥ ë§ì€ ë¦¬ëˆ…ì„œë“¤ì´ ì‚¬ìš©í•˜ê³  ìˆëŠ” íŒŒì¼ì‹œìŠ¤í…œì´ë‹¤. extëŠ” ì „í†µì ì¸ ìœ ë‹‰ìŠ¤ íŒŒì¼ì‹œìŠ¤í…œì´ ê°€ì§„ ëŒ€ë¶€ë¶„ì˜ íŠ¹ì„±ë“¤ì„ ê°€ì§€ê³  ìˆê³  ë¸”ëŸ­, ì•„ì´ë…¸ë“œ(inodes), ë””ë ‰í† ë¦¬ì˜ ê°œë…ì„ ê°€ì§€ê³  ìˆë‹¤. ì¦‰, extëŠ” í• ë‹¹í•  ìˆ˜ ìˆëŠ” ìµœì†Œì˜ ë‹¨ìœ„ë¡œ ë¸”ëŸ­ì„ ì‚¬ìš©í•˜ê³ , ì—°ì†ëœ ë¸”ëŸ­ì˜ ì§‘í•©ì„ ë¸”ëŸ­ ê·¸ë£¹ì´ë¼ í•œë‹¤. ë˜í•œ, íŒŒì¼ì‹œìŠ¤í…œ ë‚´ì˜ íŒŒì¼ì´ë‚˜ ë””ë ‰í† ë¦¬ë¥¼ ì´ì´ë…¸ë“œë¼ í•œë‹¤. Ext íŒŒì¼ì‹œìŠ¤í…œì—ì„œ ì£¼ì¶•ì´ ë˜ëŠ” ê²ƒì€ ë¸”ëŸ­ê³¼ ì•„ì´ë…¸ë“œë‹¤.

```bash
# man dumpe2fs
DUMPE2FS(8)                                                        DUMPE2FS(8)

NAME
       dumpe2fs - dump ext2/ext3 filesystem information

SYNOPSIS
       dumpe2fs [ -bfhixV ] [ -o superblock=superblock ] [ -o blocksize=blockâ€
       size ] device

DESCRIPTION
       dumpe2fs prints the super block and blocks group  information  for  the
       filesystem present on device.

       dumpe2fs  is similar to Berkeley's dumpfs program for the BSD Fast File
       System.

# dumpe2fs /dev/sdb1

dumpe2fs 1.45.6 (20-Mar-2020)
Filesystem volume name:   <none>
Last mounted on:          <not available>
Filesystem UUID:          9025ef2f-c0c9-4355-b51c-fea612776aaf
Filesystem magic number:  0xEF53
Filesystem revision #:    1 (dynamic)
Filesystem features:      has_journal ext_attr resize_inode dir_index filetype extent 64bit flex_bg sparse_super large_file huge_file dir_nlink extra_isize metadata_csum
Filesystem flags:         signed_directory_hash
Default mount options:    user_xattr acl
Filesystem state:         clean
Errors behavior:          Continue
Filesystem OS type:       Linux
Inode count:              51200
Block count:              204800
Reserved block count:     10240
Free blocks:              192685
Free inodes:              51189
First block:              1
Block size:               1024
Fragment size:            1024
Group descriptor size:    64
Reserved GDT blocks:      256
Blocks per group:         8192
Fragments per group:      8192
Inodes per group:         2048
Inode blocks per group:   256
Flex block group size:    16
Filesystem created:       Thu Dec 17 15:22:57 2020
Last mount time:          n/a
Last write time:          Thu Dec 17 15:22:57 2020
Mount count:              0
Maximum mount count:      -1
Last checked:             Thu Dec 17 15:22:57 2020
Check interval:           0 (<none>)
Lifetime writes:          280 kB
Reserved blocks uid:      0 (user root)
Reserved blocks gid:      0 (group root)
First inode:              11
Inode size:               128
Journal inode:            8
Default directory hash:   half_md4
Directory Hash Seed:      4afb0220-527d-4951-b6c5-7015744d9d03
Journal backup:           inode blocks
Checksum type:            crc32c
Checksum:                 0xaa9c9f8c
Journal features:         (none)
Journal size:             4096k
Journal length:           4096
Journal sequence:         0x00000001
Journal start:            0

Group 0: (Blocks 1-8192) csum 0xdab6
  Primary superblock at 1, Group descriptors at 2-3
  Reserved GDT blocks at 4-259
  Block bitmap at 260 (+259), csum 0x0556375d
  Inode bitmap at 276 (+275), csum 0x895e3a0f
  Inode table at 292-547 (+291)
  3791 free blocks, 2037 free inodes, 2 directories, 2037 unused inodes
  Free blocks: 4402-8192
  Free inodes: 12-2048
Group 1: (Blocks 8193-16384) csum 0xba1e [INODE_UNINIT, BLOCK_UNINIT]
  Backup superblock at 8193, Group descriptors at 8194-8195
  Reserved GDT blocks at 8196-8451
  Block bitmap at 261 (bg #0 + 260), csum 0x00000000
  Inode bitmap at 277 (bg #0 + 276), csum 0x00000000
  Inode table at 548-803 (bg #0 + 547)
  7933 free blocks, 2048 free inodes, 0 directories, 2048 unused inodes
  Free blocks: 8452-16384
  Free inodes: 2049-4096

...ì¤‘ëµ...
Group 24: (Blocks 196609-204799) csum 0x643a [INODE_UNINIT]
  Block bitmap at 131081 (bg #16 + 8), csum 0x27f1ae77
  Inode bitmap at 131090 (bg #16 + 17), csum 0x00000000
  Inode table at 133139-133394 (bg #16 + 2066)
  8191 free blocks, 2048 free inodes, 0 directories, 2048 unused inodes
  Free blocks: 196609-204799
  Free inodes: 49153-51200
```

# íŒŒì¼ì‹œìŠ¤í…œ ìƒì„±

---

- **mkfs ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ íŒŒì¼ ì‹œìŠ¤í…œì„ ìƒì„±í•œë‹¤.**
- **mkfs, mkfs.ext2, mkfs.ext3, mkfs.ext4, mkfs,vfat**
- **mkfs ëª…ë ¹ì–´ ì‚¬ìš©ë²•**

     **# mkfs â€“t ext4 /dev/sdb1**

     **# mkfs.ext4 /dev/sdb1**

     **# mkfs â€“t ext3 /dev/sdb1**

     **# mkfs.ext3 /dev/sdb1**

     **# mkfs.ext4 â€“m 10 /dev/sdb1**

     **# mkfs.ext4 â€“L testlabel /dev/sdb1**

     **# mkfs.ext4 â€“b [1025|2048|4096] /dev/sdb1**

---

## mkfs ëª…ë ¹ì–´ë¥¼ í†µí•œ íŒŒì¼ ì‹œìŠ¤í…œ ìƒì„±

mkfs ëª…ë ¹ì€ í•œ ì¥ì¹˜(ë³´í†µ í•œ í•˜ë“œë””ìŠ¤í¬ íŒŒí‹°ì…˜)ë¥¼ ë¦¬ëˆ…ìŠ¤ íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ ë§Œë“œëŠ”ë° ì‚¬ìš©ëœë‹¤. ì¥ì¹˜ì´ë¦„ì€ /dev/sda1, /dev/sdb2 ì´ëŸ° ì‹ì˜ ë””ìŠ¤í¬ ì¥ì¹˜ ì´ë¦„ì´ê±°ë‚˜, /, /usr/, /home ê°™ì€ íŒŒì¼ì‹œìŠ¤í…œì„ ìœ„í•œ ë§ˆìš´íŠ¸ ê²½ë¡œê°€ ì‚¬ìš©ëœë‹¤. ë¸”ëŸ­ì¸ìëŠ” ê·¸ íŒŒì¼ ì‹œìŠ¤í…œì„ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ë¸”ëŸ­ì˜ ê°œìˆ˜ì´ë‹¤. ì„±ê³µì ìœ¼ë¡œ ëë‚˜ë©´, 0, ì‹¤íŒ¨í•˜ë©´, 1ì„ ë¦¬í„´í•œë‹¤. ì‹¤ì§ˆì ìœ¼ë¡œ, mkfs ëª…ë ¹ì€ íŒŒì¼ ì‹œìŠ¤í…œì„ ë§Œë“œëŠ”ë° ê°ê° ê·¸ íŠ¹ì • íŒŒì¼ ì‹œìŠ¤í…œì„ ë§Œë“œëŠ” ëª…ë ¹ì„ ì‚¬ìš©í•œë‹¤.

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# mkfs â€“t ext4 /dev/sdb1        (-t : File System Type)
# mkfs.ext4 /dev/sdb1

# mkfs -t ext3 /dev/sdb1
# mkfs.ext3 /dev/sdb1

# mkfs -t ext2 /dev/sdb1
# mkfs.ext2 /dev/sdb1

# mkfs.ext4 -m 10 /dev/sdb1     (-m : minfree)        
# mkfs.ext4 -L mkfs /dev/sdb1   (-L : Label)
# mkfs.ext4 -b [1024|2048|4096] /dev/sdb1  (-b : block size)
[ì°¸ê³ ] # dumpe2fs /dev/sda1
```

[ëª…ë ¹ì–´ ì˜µì…˜]

**ì˜µì…˜ :** ì„¤ëª…

-m : minimum percentageë¡œ íŒŒì¼ ì‹œìŠ¤í…œì— ë§ˆë ¨í•  ì—¬ë¶„ì˜ ê³µê°„ì„ ê´€ë¦¬ìê°€ ê²°ì •í•˜ëŠ” ì˜µì…˜ìœ¼ë¡œ -mì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ newfs ëª…ë ¹ì–´ê°€ íŒŒì¼ ì‹œìŠ¤í…œì˜ í¬ê¸°ì— ë”°ë¼ì„œ ì ì ˆí•œ ê°’ì„ ê³„ì‚°í•˜ì—¬ ì‚¬ìš©í•œë‹¤. -m ë‹¤ìŒì—ëŠ” ì—¬ë¶„ì˜ ê³µê°„ì„ ëª…ì‹œí•˜ëŠ”ë° ì „ì²´ íŒŒì¼ ì‹œìŠ¤í…œ ì¤‘ì—ì„œ ëª‡ %ë¥¼ ì—¬ë¶„ìœ¼ë¡œ ë‘˜ ê²ƒì¸ì§€ë¥¼ ìˆ«ìë¡œ ëª…ì‹œ
-v : ì‘ì—… ìƒíƒœ, ê²°ê³¼ë¥¼ ìì„¸í•˜ê²Œ ë³´ì—¬ì¤Œ
-t : ë§Œë“¤ì–´ì§ˆ íŒŒì¼ ì‹œìŠ¤í…œì˜ í˜•íƒœë¥¼ ì§€ì •

### [EX1] íŒŒì¼ ì‹œìŠ¤í…œ ì¢…ë¥˜ë³„ ìƒì„±

```bash
(ì„ ìˆ˜ì‘ì—…)
- ìƒˆë¡œìš´ ë””ìŠ¤í¬ ì¥ì°© (EX: /dev/sdb(1 GB)) 
- íŒŒí‹°ì…˜ ì‘ì—…(EX: /dev/sdb1(primary(1 GB)) 
# fdisk -l /dev/sdb 
------------------------------------------------------------------
Disk /dev/sdb: 1073 MB, 1073741824 bytes
255 heads, 63 sectors/track, 130 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1               1         130     1044193+  83  Linux
------------------------------------------------------------------
```

```bash
# mkfs.[TAB][TAB]
mkfs     mkfs.cramfs   mkfs.ext2    mkfs.ext3    mkfs.msdos   mkfs.vfat
# mkfs.ext3 /dev/sdb1    (# mkfs -t ext3 /dev/sdb1)
mke2fs 1.41.12 (17-May-2010)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
65280 inodes, 261048 blocks
13052 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=268435456
8 block groups
32768 blocks per group, 32768 fragments per group
8160 inodes per group
Superblock backups stored on blocks: 
32768, 98304, 163840, 229376

Writing inode tables: done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 21 mounts or
180 days, whichever comes first.  Use tune2fs -c or -i to override.
# mkfs.ext4 /dev/sdb1    (# mkfs -t ext4 /dev/sdb1)
mke2fs 1.41.12 (17-May-2010)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
65280 inodes, 261048 blocks
13052 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=268435456
8 block groups
32768 blocks per group, 32768 fragments per group
8160 inodes per group
Superblock backups stored on blocks: 
32768, 98304, 163840, 229376

Writing inode tables: done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 30 mounts or
180 days, whichever comes first.  Use tune2fs -c or -i to override.
```

### [EX2] íŒŒì¼ ì‹œìŠ¤í…œ minfree ê³µê°„ ìƒì„±

```bash
minfree(Minimum Free Space) : íŒŒì¼ì‹œìŠ¤í…œ(EX: ext3)ì´ í’€(Full) ë‚¬ì„ ë•Œ ê´€ë¦¬ìë§Œ ì“¸ìˆ˜ ìˆëŠ” ê³µê°„ìœ¼ë¡œ ì˜ˆì•½ëœ ê³µê°„(0% ~ 50%, Default : 5%)
```

```bash
# mkfs.ext4 -m 10 /dev/sdb1
mke2fs 1.41.12 (17-May-2010)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
65280 inodes, 261048 blocks
26104 blocks (10.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=268435456
8 block groups
32768 blocks per group, 32768 fragments per group
8160 inodes per group
Superblock backups stored on blocks: 
32768, 98304, 163840, 229376

Writing inode tables: done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 32 mounts or
180 days, whichever comes first.  Use tune2fs -c or -i to override.
# mkfs.ext4 -L mkfs /dev/sdb1    /* -L : label */
mke2fs 1.41.12 (17-May-2010)
Filesystem label=mkfs
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
65280 inodes, 261048 blocks
13052 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=268435456
8 block groups
32768 blocks per group, 32768 fragments per group
8160 inodes per group
Superblock backups stored on blocks: 
32768, 98304, 163840, 229376

Writing inode tables: done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 23 mounts or
180 days, whichever comes first.  Use tune2fs -c or -i to override.
```

### [EX4] íŒŒì¼ ì‹œìŠ¤í…œ ë¸”ëŸ­ ì‚¬ì´ì¦ˆ ì§€ì •

```bash
# mkfs.ext4 -b 4096 /dev/sdb1
mke2fs 1.41.12 (17-May-2010)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
65280 inodes, 261048 blocks
13052 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=268435456
8 block groups
32768 blocks per group, 32768 fragments per group
8160 inodes per group
Superblock backups stored on blocks: 
32768, 98304, 163840, 229376

Writing inode tables: done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 20 mounts or
180 days, whichever comes first.  Use tune2fs -c or -i to override.
# mkfs.ext4 -b 3072 /dev/sdb1    /* ë¦¬ëˆ…ìŠ¤ì˜ ë¸”ëŸ­ ì‚¬ì´ì¦ˆëŠ” 1,2,4 Kì´ë¯€ë¡œ 3K ì§€ì •ì‹œ 2Kë¡œ ì„ íƒ */
mke2fs 1.41.12 (17-May-2010)
Filesystem label=
OS type: Linux
Block size=2048 (log=1)
Fragment size=2048 (log=1)
Stride=0 blocks, Stripe width=0 blocks
65280 inodes, 522096 blocks
26104 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=534773760
32 block groups
16384 blocks per group, 16384 fragments per group
2040 inodes per group
Superblock backups stored on blocks: 
16384, 49152, 81920, 114688, 147456, 409600, 442368

Writing inode tables: done                            
Creating journal (8192 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 22 mounts or
180 days, whichever comes first.  Use tune2fs -c or -i to override.
# mkdir -p /disk1 
# mount /dev/sdb1 /disk1 
# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1              17G  3.4G   12G  22% /
/dev/sda8             487M   11M  451M   3% /data1
/dev/sda7             487M   11M  451M   3% /data2
/dev/sda6             487M   11M  451M   3% /data3
/dev/sda5             487M   11M  451M   3% /data4
/dev/sda3             487M   11M  451M   3% /home
tmpfs                 506M     0  506M   0% /dev/shm
/dev/sdb1             190M  8.9M  172M   5% /disk1
# cd 
# umount /disk1 
# df -h
```

```bash
(ì •ë¦¬) ë””ìŠ¤í¬ë¥¼ ì¶”ê°€í•´ì„œ ì‘ì—…í•˜ëŠ” ë°©ë²•
(ã„±) ë””ìŠ¤í¬ ì¸ì‹ 
kudzu -> # ntsysv (# chkconfig kudzu on)
(ã„´) ì„œë²„ Power OFF / ë””ìŠ¤í¬ ì¥ì°© / ë¶€íŒ…
(ã„·) íŒŒí‹°ì…˜ ì‘ì—…
# ls -l /dev/sd?
# fdisk -l

# fdisk /dev/sdb
(ã„¹) íŒŒì¼ì‹œìŠ¤í…œ ìƒì„±
# mkfs.ext4 /dev/sdb1
(ã…) ë§ˆìš´íŠ¸ ì‘ì—…
# mkdir /disk1
# mount /dev/sdb1 /disk1
# vi /etc/fstab
```

## minfree(Minimum Free Space)

```bash
       DISK
--+-------------+--
  |             |
  |             |
  |    ext3     |     <---- # df -h
  |             |
  |             |
  +-------------+
  |   minfree   |     <---- # tune2fs -l /dev/sda1 | grep -i Reserved
--+-------------+--

       DISK
  +-------------+
  |   /         |
  +-------------+
  |   /home     |
  +-------------+
  |   /tmp      |     <----- File System Full
  +-------------+
  |   /oracle   |
  +-------------+
```

[1] mifree(Mininum Free Space)

ìµœì†Œ ë‚¨ì€ ê³µê°„(Mininum Free Space)ëŠ” ì „ì²´ ê³µê°„ì˜ í¼ì„¼íŠ¸ë¡œ í• ë‹¹ëœë‹¤. ì´ ê³µê°„ì€ íŒŒì¼ì‹œìŠ¤í…œì´ ë§Œë“¤ì–´ì§ˆ ë‹¹ì‹œì— ì˜ˆì•½ë˜ì„œ ìƒì„±ëœë‹¤. ê¸°ë³¸ ì˜ˆì•½ ê°’ì€ ((64 MB / íŒŒí‹°ì…˜ í¬ê¸°) * 100) ì´ë‹¤. ì´ ê°’ì€ 0%ì—ì„œ 50% ì‚¬ì´ ê°’ì´ í• ë‹¹ì´ ë˜ê³ , ê·¼ì‚¬ê°’ìœ¼ë¡œ ê²°ì •ì´ ëœë‹¤.

ìµœì†Œ ë‚¨ì€ ê³µê°„ì€ íŒŒì¼ì‹œìŠ¤í…œì´ Full ë˜ì—ˆì„ ë•Œ íŒŒì¼ì‹œìŠ¤í…œì„ ì ‘ê·¼ í•  ìˆ˜ ìˆëŠ” ìµœì†Œë¡œ ê³µê°„ìœ¼ë¡œ ë‚¨ê²¨ì ¸ ìˆì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì¤‘ìš”í•˜ë‹¤. íŒŒì¼ì‹œìŠ¤í…œì´ Full ë˜ë©´, root ì‚¬ìš©ìë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê³µê°„ìœ¼ë¡œ ì˜ˆì•½ë˜ì–´ì§„ ë‚¨ì€ ê³µê°„ì´ë‹¤.

Minfree ê³µê°„ì€ í•˜ë‚˜ì˜ íŒŒí‹°ì…˜ì— 0 ~ 50% ì‚¬ì´ ê°’ìœ¼ë¡œ ì •ì˜ëœë‹¤. Minfree ê³µê°„ì€ íŒŒí‹°ì…˜ì´ í’€(Full)ë‚œ ê²½ìš° root ì‚¬ìš©ìê°€ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê³µê°„ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤. ì¼ë°˜ì‚¬ìš©ìëŠ” ì´ ê³µê°„ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. íŒŒì¼ì‹œìŠ¤í…œì—ì„œ Minfree ê³µê°„ì€ 0(zero)ì¼ìˆ˜ ì—†ë‹¤. ìµœì†Œ minfreeëŠ” 0%ì´ë‹¤.

```bash
â‘  íŒŒì¼ ì‹œìŠ¤í…œ ìƒì„±ì‹œ minfree ê³µê°„ í• ë‹¹

(minfree 5%) # mkfs.ext4 /dev/sdb1 
(minfree 1%) # mkfs.ext4 -m 1 /dev/sdb1
(minfree 5%) # tune2fs -m 5 /dev/sdb1

# mkfs.ext4 -m 1 /dev/sdb1    /* -m : minfree */
mke2fs 1.41.12 (17-May-2010)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
65280 inodes, 261048 blocks
2610 blocks (1.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=268435456
8 block groups
32768 blocks per group, 32768 fragments per group
8160 inodes per group
Superblock backups stored on blocks: 
32768, 98304, 163840, 229376

Writing inode tables: done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 25 mounts or
180 days, whichever comes first.  Use tune2fs -c or -i to override.

[ì°¸ê³ ] ì„ ìˆ˜ì‘ì—…
íŒŒí‹°ì…˜ ì„¤ì • : /dev/sdc1(1G)
# fdisk /dev/sdc 
# fdisk -l /dev/sdc

# mkfs.ext4 -m 10 /dev/sdc1
mke2fs 1.41.12 (17-May-2010)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
65280 inodes, 261048 blocks
26104 blocks (10.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=268435456
8 block groups
32768 blocks per group, 32768 fragments per group
8160 inodes per group
Superblock backups stored on blocks: 
32768, 98304, 163840, 229376

Writing inode tables: done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 33 mounts or
180 days, whichever comes first.  Use tune2fs -c or -i to override.
# mkdir /raid0 /raid1

# mount /dev/sdb1 /raid0 
# mount /dev/sdc1 /raid1 
# df -h /raid0 /raid1
Filesystem      Size  Used Avail Use% Mounted on
/dev/sdb1       988M  1.3M  977M   1% /raid0     /* minfree : 1% */
/dev/sdc1       988M  1.3M  885M   1% /raid1     /* minfree : 10% */

+-------------+
|             |
|   Used      |
|             |
+-------------+
|             |
|   Avail     |
|             |
+-------------+
|   minfree   |
+-------------+

		[í™•ì¸] minfree ê³µê°„ í™•ì¸
		# tune2fs â€“l /dev/sdb1 | grep â€“i Reserved 
		-> Reserved block count:  2610 
		# tune2fs -l /dev/sdc1 | grep -i Reserved 
		-> Reserved block count:  26104

â‘¡ íŒŒì¼ì‹œìŠ¤í…œ ìƒì„± ì´í›„ minfree ê³µê°„ ë³€ê²½
# tune2fs -m 1 /dev/sdc1
tune2fs 1.41.12 (17-May-2010)
Setting reserved blocks percentage to 1% (2610 blocks)
# df -h /raid0 /raid1
Filesystem      Size  Used Avail Use% Mounted on
/dev/sdb1       988M  1.3M  977M   1% /raid0
/dev/sdc1       988M  1.3M  977M   1% /raid1
```

```bash
(ì‹¤ë¬´ì˜ˆ) ì‹¤ë¬´ì—ì„œ minfree ê³µê°„ì„ ì¡°ì •í•˜ëŠ” ê²½ìš°
â–  ì‹¤ë¬´ì—ì„œ ì‚¬ìš©ë˜ëŠ” íŒŒí‹°ì…˜ì˜ í¬ê¸°? minfree 5%
# mkfs.ext4 /dev/sdb1 

íŒŒí‹°ì…˜ í’€(Full) ---> ìš”ì²­ ì‚­ì œ
   -> ë¶ˆ í•„ìš”í•œ íŒŒì¼ ì‚­ì œ(ì‹œê°„ í•„ìš”)
   -> ì›ì¸ ë¶„ì„(ì‹œê°„ í•„ìš”)

(ì‘ì—…ì ˆì°¨) /was/logs íŒŒí‹°ì…˜(Full, /dev/sdb1)
(ã„±) minfree 5% -> 1%
     # tune2fs -m 1 /dev/sdb1 
(ã„´) ë¶ˆ í•„ìš”í•œ íŒŒì¼ ì‚­ì œ
(ã„·) ì›ì¸ ë¶„ì„

(ì‹¤ë¬´ì˜ˆ) df -h ì¶œë ¥ ê²°ê³¼ í•´ì„
# df â€“h 
-------------------------------------------------------
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1              17G  3.9G   12G  26% /
/dev/sda8             487M   11M  451M   3% /data1
/dev/sda7             487M   11M  451M   3% /data2
/dev/sda6             487M   11M  451M   3% /data3
/dev/sda5             487M   11M  451M   3% /data4
/dev/sda3             487M   11M  451M   3% /home
-------------------------------------------------------
```

# íŒŒì¼ì‹œìŠ¤í…œ ì ê²€ ë° ì‚¬ìš©ëŸ‰ ì ê²€

---

- **fsck CMD** í†µí•´ì„œ íŒŒì¼ì‹œìŠ¤í…œì„ ì ê²€í•œë‹¤.

    **(umount + fsck) or (single user mode + fsck)**

     **# fsck /dev/sdb1**

     **# fsck.ext4 /dev/sdb1**

     **# e2fsck /dev/sdb1**

     **# fsck â€“y /dev/sdb1**

- **df/du ëª…ë ¹ì–´ ì‚¬ìš©ë²•**

     **# df â€“k**

     **# du â€“sk /var**

     **# cd /var ; du â€“sk * | sort â€“nr | more**

---

## íŒŒì¼ ì‹œìŠ¤í…œ ì ê²€ fsck (File system check)

íŒŒì¼ì‹œìŠ¤í…œì´ ì „ì›ì´ìƒì´ë‚˜ ì»¤ë„ì—ì„œ ë™ì‘í•˜ëŠ” í”„ë¡œê·¸ë¨ì˜ ì´ìƒ, í•˜ë“œì›¨ì–´ì ì¸ ì´ìƒ, ë¹„ì •ìƒì ì¸ ì‹œìŠ¤í…œ shutdownì´ ë°œìƒí•˜ì—¬ ë°ë¯¸ì§€(Damaged)ë¥¼ ì…ê²Œ ë˜ë©´, íŒŒì¼ì‹œìŠ¤í…œì„ fsck ëª…ë ¹ì–´ë¥¼ í†µí•´ íŒŒì¼ì‹œìŠ¤í…œì˜ ë¬´ê²°ì„±ì„ ì ê²€í•˜ê²Œ ëœë‹¤. fsck ëª…ë ¹ì–´ì™€ ë¹„ìŠ·í•œ ëª…ë ¹ì–´ë¡œëŠ” fsck.ext3, e2fsckê°€ ìˆë‹¤. ì´ë“¤ ëª¨ë‘ëŠ” íŒŒì¼ì‹œìŠ¤í…œì„ ì ê²€í•˜ê³ , ì†ìƒëœ íŒŒì¼ì‹œìŠ¤í…œì„ ë³µêµ¬í•˜ëŠ” ëª…ë ¹ì–´ì´ë‹¤.

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# fsck /dev/sda1 
# fsck -y /dev/sd1 

# fsck /dev/sda1 
# fsck.ext4 /dev/sda1 
# e2fsck /dev/sda1
```

(fsck, fsck.ext3 ëª…ë ¹ì–´ ì˜µì…˜)

```bash
ì˜µì…˜ ì„¤ëª…
-A /etc/fstab íŒŒì¼ì— ìˆëŠ” ëª¨ë“  íŒŒì¼ì‹œìŠ¤í…œì„ í•œë²ˆì”© ì ê²€
-R -Aì™€ í•¨ê»˜ ì‚¬ìš©ì‹œ /(root) íŒŒì¼ì‹œìŠ¤í…œì€ ì œì™¸
-T ì‹œì‘ì‹œ ì œëª©ì€ ìƒëµ
-N ì‹¤í–‰ì€ í•˜ì§€ ì•Šê³  ì–´ë–¤ ì‘ì—…ì„ í•  ê²ƒì¸ì§€ë§Œ ì¶œë ¥
-P -Aì™€ í•¨ê»˜ ì‚¬ìš©ì‹œ /íŒŒì¼ì‹œìŠ¤í…œê³¼ ë‹¤ìŒ íŒŒì¼ì‹œìŠ¤í…œì„ ë³‘ë ¬ì²˜ë¦¬í•˜ì—¬ ì ê²€í•¨
-V ìì„¸í•œ ì •ë³´ê°€ ì¶œë ¥
-a ì—ëŸ¬ ë°œìƒì‹œ ìë™ìœ¼ë¡œ ë³µêµ¬í•¨
-t íŠ¹ì • ì¢…ë¥˜ì˜ íŒŒì¼ì‹œìŠ¤í…œë§Œ ì ê²€í•¨.
```

(e2fsck ì˜µì…˜)

```bash
ì˜µì…˜ ì„¤ëª…
-f íŒŒì¼ì‹œìŠ¤í…œì— ì˜¤ë¥˜ê°€ ì—†ë”ë¼ë„ ê°•ì œë¡œ ì ê²€í•˜ë„ë¡ í•¨
-p ì—ëŸ¬ ë°œìƒì‹œ ìë™ìœ¼ë¡œ ë³µêµ¬í•˜ë„ë¡ í•¨
-y ëª¨ë“  ì§ˆë¬¸ì— yesë¼ê³  ë‹µí•˜ë„ë¡ ì„¤ì •í•¨
-b ìˆ˜í¼ ë¸”ëŸ­ì„ ì´ìš©í•œ ë³µêµ¬
```

```bash
(ì£¼ì˜) fsck ëª…ë ¹ì–´ ì‚¬ìš©ì‹œ ì£¼ì˜ì 
ë§ˆìš´íŠ¸ëœ íŒŒì¼ì‹œìŠ¤í…œì— ëŒ€í•´ì„œ fsck ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ì§€ ë§ì•„ì•¼ í•œë‹¤. 

/home, /data1, /data2, .... -> umount CMD + fsck CMD 
/, /usr, /var, /tmp         -> single user mode + fsck CMD

-------+---------------+-------     ----   # fsck /dev/sda1
       |      f=2      |             |
       +---------------+             | 
       |     file1     |             V
       |               |            ----
       |     file2     |
       |               |
       |               |
       |  file3(ìƒì„±)   |
       |               |
-------+---------------+-------
```

### [EX1] fsck ì‹¤ìŠµ

```bash
# e2[TAB][TAB]
e2fsck   e2image  e2label
# fsck.[TAB][TAB]
fsck.cramfs   fsck.ext2     fsck.ext3     fsck.ext4     fsck.ext4dev  fsck.msdos    fsck.vfat
# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1              17G  3.4G   12G  22% /
/dev/sda8             487M   11M  451M   3% /data1
/dev/sda7             487M   11M  451M   3% /data2
/dev/sda6             487M   11M  451M   3% /data3
/dev/sda5             487M   11M  451M   3% /data4
/dev/sda3             487M   11M  451M   3% /home
tmpfs                 506M     0  506M   0% /dev/shm
# fsck /dev/sda3       (# fsck /home)
fsck 1.39 (29-May-2006)
e2fsck 1.39 (29-May-2006)
/dev/sda3 is mounted.  

WARNING!!!  Running e2fsck on a mounted filesystem may cause
SEVERE filesystem damage.

Do you really want to continue (y/n)? yes       <----- 'yes' ì…ë ¥

/home: recovering journal
/home: clean, 59/128520 files, 26852/514080 blocks
# umount /home 
# fsck /dev/sda3     (# fsck /home)
fsck 1.39 (29-May-2006)
e2fsck 1.39 (29-May-2006)
/home: clean, 59/128520 files, 26852/514080 blocks
# fsck â€“y /dev/sda3
fsck 1.39 (29-May-2006)
e2fsck 1.39 (29-May-2006)
/home: clean, 59/128520 files, 26852/514080 blocks
# e2fsck /dev/sda3
e2fsck 1.39 (29-May-2006)
/home: clean, 59/128520 files, 26852/514080 blocks
# mount /home 
# df -h 
-> /home ë³´ì—¬ì•¼ í•œë‹¤.
```

(ì‹¤ë¬´ ì˜ˆ) "# fsck -y /dev/sda1" ì‚¬ìš©ì‹œ

```bash
# script -a fsck.log 
# fsck â€“y /dev/sda3 
# exit 
# cat fsck.log
```

## íŒŒì¼ ì‹œìŠ¤í…œ ì‚¬ìš©ëŸ‰ ì¸¡ì • (df, du)

[1] df (disk free space) - íŒŒí‹°ì…˜ ë‹¨ìœ„ì˜ ì‚¬ìš©ëŸ‰ ì ê²€

df ëª…ë ¹ì–´ëŠ” ë‚¨ì€ ë””ìŠ¤í¬ ë¸”ëŸ­ê³¼ ë‚¨ì€ íŒŒì¼ì˜ ìˆ˜ë¥¼ ì¶œë ¥í•˜ëŠ” ëª…ë ¹ì–´ì´ë‹¤. df ëª…ë ¹ì–´ì— -k, -h ì˜µì…˜ ë“±ì„ ì‚¬ìš©í•˜ë©´ ì¶œë ¥ ê²°ê³¼ëŠ” íŒŒì¼ì‹œìŠ¤í…œ í¬ê¸°, ì‚¬ìš©ëœ ê³µê°„, ë‚¨ì€ ê³µê°„, ì „ì²´ì—ì„œ ì‚¬ìš©ì¤‘ì¸ %ì‚¬ìš©ëŸ‰, ë§ˆìš´íŠ¸ í¬ì¸íŠ¸ë“±ì„ ì¶œë ¥í•œë‹¤.

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# df 
# df â€“k      (-k : KB)
# df â€“m      (-m : MB)
# df â€“h      (-h : human)

# df â€“k /data1 
# df -k /data1 /home 

# df -T       (# alias df='df -T -h')
```

[ëª…ë ¹ì–´ ì˜µì…˜]

```bash
ì˜µì…˜ ì„¤ëª…
-k ì—¬ìœ  ìš©ëŸ‰ì„ í‚¬ë¡œë°”ì´íŠ¸(kilobyte) ë‹¨ìœ„ë¡œ ì¶œë ¥
-h ì—¬ìœ  ìš©ëŸ‰ì„ ì‚¬ìš©ìê°€ ë³´ê¸° ì‰½ê²Œ í‚¬ë¡œë°”ì´íŠ¸(kilobyte)ì™€ ë©”ê°€ë°”ì´íŠ¸(megabyte) ë‹¨ìœ„ë“±ìœ¼ë¡œ ì¶œë ¥
-F íŒŒì¼ ì‹œìŠ¤í…œì˜ íƒ€ì…ì„ ì§€ì •í•˜ì—¬ ì§€ì •í•œ íŒŒì¼ì‹œìŠ¤í…œ ì˜ì—­ë§Œì„ ì¶œë ¥
-i ë¸”ë¡ ì—¬ìœ  ìš©ëŸ‰ ëŒ€ì‹  inode ì‚¬ìš© ì •ë³´ë¡œ ì¶œë ¥
-a ë””í”Œë¡œì´ë¡œ ìƒëµëœ 0 ë¸”ë¡ í¬ê¸°ì˜ íŒŒì¼ ì‹œìŠ¤í…œë„ ë³´ì—¬ì¤Œ
-t fstype ê°’ì„ ê°€ì§„ íŒŒì¼ ì‹œìŠ¤í…œì— ëŒ€í•œ ë””ìŠ¤í¬ ì •ë³´
-T íŒŒì¼ ì‹œìŠ¤í…œì˜ ì¢…ë¥˜ì™€ í•¨ê»˜ ë””ìŠ¤í¬ì˜ ì •ë³´ë¥¼ ë³´ì—¬ì¤Œ
```

### [EX1] df ëª…ë ¹ì–´ ì‹¤ìŠµ

```bash
# df
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/sda1             16798832   3477340  12454388  22% /
/dev/sda8               497829     10544    461583   3% /data1
/dev/sda7               497829     10544    461583   3% /data2
/dev/sda6               497829     10544    461583   3% /data3
/dev/sda5               497829     10544    461583   3% /data4
tmpfs                   517520         0    517520   0% /dev/shm
# df -k
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/sda1             16798832   3477340  12454388  22% /
/dev/sda8               497829     10544    461583   3% /data1
/dev/sda7               497829     10544    461583   3% /data2
/dev/sda6               497829     10544    461583   3% /data3
/dev/sda5               497829     10544    461583   3% /data4
tmpfs                   517520         0    517520   0% /dev/shm
# df -k /
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/sda1             16798832   3477340  12454388  22% /
# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1              17G  3.4G   12G  22% /
/dev/sda8             487M   11M  451M   3% /data1
/dev/sda7             487M   11M  451M   3% /data2
/dev/sda6             487M   11M  451M   3% /data3
/dev/sda5             487M   11M  451M   3% /data4
tmpfs                 506M     0  506M   0% /dev/shm
# df -h -F ext2
Filesystem            Size  Used Avail Use% Mounted on
# df -h -F ext3
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1              17G  3.4G   12G  22% /
/dev/sda8             487M   11M  451M   3% /data1
/dev/sda7             487M   11M  451M   3% /data2
/dev/sda6             487M   11M  451M   3% /data3
/dev/sda5             487M   11M  451M   3% /data4
# df -T
Filesystem    Type   1K-blocks      Used Available Use% Mounted on
/dev/sda1     ext3    16798832   3477340  12454388  22% /
/dev/sda8     ext3      497829     10544    461583   3% /data1
/dev/sda7     ext3      497829     10544    461583   3% /data2
/dev/sda6     ext3      497829     10544    461583   3% /data3
/dev/sda5     ext3      497829     10544    461583   3% /data4
tmpfs        tmpfs      517520         0    517520   0% /dev/shm
```

```bash
# alias df='df -h -T' 
# df 
-> ì¶œë ¥ ë‚´ìš© ìƒëµ($HOME/.bashrc)
-> # vi ~/.bashrc
   alias df='df â€“h -T'
   # . ~/.bashrc
   # alias df
```

[ì‹¤ë¬´ ì˜ˆ] ì—ëŸ¬ë©”ì„¸ì§€ : .... out of inodes ....

```bash
(ì¦ìƒ) : df -h(-k) ì˜µì…˜ìœ¼ë¡œ ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ì„ ë³´ë©´ ë‚¨ì€ê³µê°„ì€ ìˆì§€ë§Œ, ë”ì´ìƒ íŒŒì¼ì´ ë§Œë“¤ì–´ ì§€ì§€ ì•ŠëŠ” ìƒíƒœì¸ ê²½ìš°, ê·¸ë¦¬ê³  /var/log/messages íŒŒì¼ì•ˆì— ì—ëŸ¬ë©”ì„¸ì§€(...out of inodes....)ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°ì´ë‹¤.
# df -h -F ext3
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1              17G  3.4G   12G  22% /
/dev/sda8             487M   11M  451M   3% /data1
/dev/sda7             487M   11M  451M   3% /data2
/dev/sda6             487M   11M  451M   3% /data3
/dev/sda5             487M   11M  451M   3% /data4
/dev/sda3             487M   11M  451M   3% /home
# df -i
Filesystem            Inodes   IUsed   IFree IUse% Mounted on
/dev/sda1            4336864  129090 4207774    3% /
/dev/sda8             128520      11  128509    1% /data1
/dev/sda7             128520      11  128509    1% /data2
/dev/sda6             128520      11  128509    1% /data3
/dev/sda5             128520      11  128509    1% /data4
tmpfs                 129380       1  129379    1% /dev/shm
/dev/sda3             128520      59  128461    1% /home
# vi ~/.bashrc
------------------------------------------
# .bashrc

# User specific aliases and functions

alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'

# Source global definitions
if [ -f /etc/bashrc ]; then
        . /etc/bashrc
fi

#
# (1) Sfecific Configuration(EX: Alias)
#
alias ddf='/bin/df -h -F ext3 ; echo ; /bin/df -i'
------------------------------------------
# .  ~/.bashrc 
# ddf
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1              17G  3.4G   12G  22% /
/dev/sda8             487M   11M  451M   3% /data1
/dev/sda7             487M   11M  451M   3% /data2
/dev/sda6             487M   11M  451M   3% /data3
/dev/sda5             487M   11M  451M   3% /data4
/dev/sda3             487M   11M  451M   3% /home

Filesystem            Inodes   IUsed   IFree IUse% Mounted on
/dev/sda1            4336864  129090 4207774    3% /
/dev/sda8             128520      11  128509    1% /data1
/dev/sda7             128520      11  128509    1% /data2
/dev/sda6             128520      11  128509    1% /data3
/dev/sda5             128520      11  128509    1% /data4
tmpfs                 129380       1  129379    1% /dev/shm
/dev/sda3             128520      59  128461    1% /home
```

[2] du (disk usage) - ë””ë ‰í† ë¦¬ ë‹¨ìœ„ì˜ ì‚¬ìš©ëŸ‰ ì ê²€

du ëª…ë ¹ì–´ëŠ” ë””ìŠ¤í¬ì™€ íŒŒì¼ì˜ ì‚¬ìš©ëŸ‰ì„ ë³´ì—¬ì¤€ë‹¤. du ëª…ë ¹ì–´ì— -s, -a, -k, -h ì˜µì…˜ ë“±ì„ ì‚¬ìš©í•˜ë©´ ì¶œë ¥ ê²°ê³¼ëŠ” ë””ë ‰í† ë¦¬ì™€ íŒŒì¼ì˜ í¬ê¸°, ì‚¬ìš©ëœ ê³µê°„, ë‚¨ì€ ê³µê°„, ì „ì²´ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì‚¬ìš©ëŸ‰ì„ ì¶œë ¥í•œë‹¤.

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# du /etc 
# du â€“k /etc    /* -k : KBytes */
# du â€“m /etc    /* -m : MBytes */
# du â€“h /etc    /* -h : human */

# du â€“ak /etc 
# du â€“am /etc 
# du -ah /etc 

# du â€“sk /etc   /* -s : sum */
# du â€“sm /etc 
# du -sh /etc
```

[ëª…ë ¹ì–´ ì˜µì…˜]

```bash
ì˜µì…˜ ì„¤ëª…
-s í•´ë‹¹ ê²½ë¡œì˜ ë””ìŠ¤í¬ ìš©ëŸ‰ ì´ í•©ê³„ë§Œ ì¶œë ¥
-a í•´ë‹¹ ê²½ë¡œì— ëŒ€í•œ ì‚¬ìš©í•œ ë””ìŠ¤í¬ ìš©ëŸ‰ í‘œì‹œ
-k ìš©ëŸ‰ í‘œì‹œë¥¼ í‚¬ë¡œë°”ì´íŠ¸(kilobyte) ë‹¨ìœ„ë¡œ í‘œì‹œ
-m ìš©ëŸ‰ í‘œì‹œë¥¼ ë©”ê°€ë°”ì´íŠ¸(megabyte) ë‹¨ìœ„ë¡œ í‘œì‹œ
-h ì—¬ìœ  ìš©ëŸ‰ì„ ì‚¬ìš©ìê°€ ë³´ê¸° ì‰½ê²Œ í‚¬ë¡œë°”ì´íŠ¸(kilobyte)ì™€ ë©”ê°€ë°”ì´íŠ¸(megabyte) ë‹¨ìœ„ë“±ìœ¼ë¡œ ì¶œë ¥
```

### [EX1] du ëª…ë ¹ì–´ ì‹¤ìŠµ

```bash
# du /etc/sysconfig
24      /etc/sysconfig/cbq
404     /etc/sysconfig/network-scripts
8       /etc/sysconfig/networking/profiles/default
..... (ì¤‘ëµ) .....

(du ì¶œë ¥ê²°ê³¼ í•´ì„)
-----------------------------------------
í•„ë“œ                         ì„¤ ëª…
-----------------------------------------
24                          ì‚¬ìš©ëŸ‰(Kbytes)
/etc/sysconfig/cbq          ë””ë ‰í† ë¦¬ ì´ë¦„
-----------------------------------------

# du -a /etc/sysconfig
8       /etc/sysconfig/kadmin
8       /etc/sysconfig/grub
8       /etc/sysconfig/rawdevices
..... (ì¤‘ëµ) .....
# du -sk /etc/sysconfig
1184    /etc/sysconfig/
# cd /var 
# du -sk * | sort -rn | more
49700   lib
11576   cache
8752    www
4380    log
536     spool
388     run
140     named
32      lock
32      empty
28      db
24      yp
..... (ì¤‘ëµ) .....
```

[ì°¸ê³ ] (ìœˆë„ìš°ì¦ˆ <-----> ë¦¬ëˆ…ìŠ¤) ë¹„êµ

```bash
# df â€“k   (# df â€“h) 

# du -sk /var 

# cd /var 
# du -sk * | sort -nr | more 

**# find /var -size +300M -type f**
```

# ë§ˆìš´íŠ¸ í™•ì¸ ë° ë§ˆìš´íŠ¸ ê´€ë ¨ íŒŒì¼ë“¤

- **ë§ˆìš´íŠ¸í™•ì¸**

    ```bash
    # df-h
    # mount
    # mount | column â€“t
    ```

- **ë§ˆìš´íŠ¸ ê´€ë ¨ íŒŒì¼ë“¤**

    **/etc/mntab**

    **/proc/mounts**

    **/etc/fstab**
