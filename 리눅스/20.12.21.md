## ğŸ™‹ğŸ»â€â™€ï¸ ìŠ¤ë¬´ë²ˆì§¸ ë¹„ëŒ€ë©´ ìˆ˜ì—…

---

# ë‚´ìš© ì •ë¦¬

---

windows â†’ ì¥ì¹˜ë¥¼ ì—°ê²°í•˜ì˜€ì„ ë•Œ ìë™ìœ¼ë¡œ ì¥ì¹˜ë¥¼ ì—°ê²°í•˜ê³  ì‚¬ìš©ìê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìƒíƒœê¹Œì§€ êµ¬ì„±í•´ ì¤€ë‹¤.

- UNIX

    ë©€í‹°ìœ ì €

    ë§ˆìš´íŠ¸ - ìì›ì„ ì‚¬ìš© ê°€ëŠ¥í•œ í˜•íƒœë¡œ ë³€ê²½

    ë§ˆìš´íŠ¸ë¥¼ í•˜ê²Œ ë˜ë©´ ê¸°ì¡´ì— ì¡´ì¬í•˜ëŠ” ë””ë ‰í† ë¦¬ë¡œ ë™ì¼í•˜ê²Œ ì ‘ê·¼ í•˜ë”ë¼ë„ ì‹¤ì œ ì ‘ì†í•˜ëŠ” ì¥ì¹˜ì˜ ìœ„ì¹˜ê°€ ë‹¤ë¥´ë‹¤.

    ì˜µì…˜ë“¤ì„ ì´ìš©í•˜ì—¬ ì¥ì¹˜ì— ëŒ€í•œ ì ‘ê·¼ ì œí•œ, ì‚¬ìš© ì œí•œì„ ì„¤ì • í•  ìˆ˜ ìˆë‹¤.

- WINDOWS

    ì‹±ê¸€ìœ ì €

    pnp â†’ ì—°ê²° ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ìƒíƒœë¡œ ì¥ì¹˜ë¥¼ ë§Œë“¤ì–´ ì£¼ëŠ” ê²ƒ

    USB, ì™¸ì¥í•˜ë“œ

    ë””ë°”ì´ìŠ¤ ë“œë¼ì´ë²„ê°€ ì—†ëŠ” ê²½ìš° ìë™ ë‹¤ìš´ë¡œë“œ / ì„¤ì¹˜ / êµ¬ì„±(windows updateêº¼ë‘˜ ê²½ìš° ì‘ë™ ì•ˆí•  ë•Œ ìˆë‹¤)

    DISK  â†’ hot-swap

    NAS â†’ OS

# ë§ˆìš´íŠ¸ ê´€ë ¨ ëª…ë ¹ì–´ë“¤

---

- **mount CMD : ì¥ì¹˜(ë¡œì»¬, ë„¤íŠ¸ì›Œí¬)ë¥¼ ì ‘ê·¼ ê°€ëŠ¥í•œ ìƒíƒœë¡œ ë§Œë“¤ì–´ ì£¼ëŠ” ëª…ë ¹ì–´**

    ```bash
    # mount [-t ext3] [-o rw] /dev/sdb1 /p
    # mount /dev/sdb1 /p
    # mount /p (/etc/fstab)
    # mount LABLE=/home /home
    OPTION: ro, noatiome, nosuid, usrquota
    ```

- **umount CMD : ì¥ì¹˜ë¥¼ ì ‘ê·¼ ë¶ˆê°€ëŠ¥í•œ ìƒíƒœë¡œ ë§Œë“¤ì–´ ì£¼ëŠ” ëª…ë ¹ì–´**

    ```bash
    **# umount /dev/sdb1
    # umount /p**
    ```

- **mount â€“a (/etc/fstab)**
- **umount â€“a (/etc/mtab)**

---

HA - í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì¸ ê²½ìš°ì—ëŠ” ë³´í†µ ë„¤íŠ¸ì›Œí¬ íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ ë§ˆìš´íŠ¸ ë˜ì–´ ìˆëŠ” ì •ë³´ë“¤ì„ ì‚¬ìš©

ì‹¤ì œ /ëŠ” ìƒìœ„ì— ë˜ ë‹¤ë¥¸ íŒŒì¼ ì‹œìŠ¤í…œ í•˜ìœ„ì— ì¡´ì¬í•œë‹¤. chrootë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ íŒŒì¼ ì‹œìŠ¤í…œ

ì»¤ë„ì˜ ì—­í• : 

ì‚¬ìš©ì ì• í”Œë¦¬ì¼€ì´ì…˜ ê´€ë¦¬

HW ìì›ê´€ë¦¬

ì»¤ë„ì€ ë¶€íŒ… ì´í›„ ë³´í˜¸ëª¨ë“œì— ìŒ“ì—¬ìˆë‹¤.

---

## mount ëª…ë ¹ì–´

ë§ˆìš´íŠ¸ ê´€ë ¨ ëª…ë ¹ì–´

â–  mount CMD	**/* ìì›(Resource)(ì¥ì¹˜)ì„ ë§ˆìš´íŠ¸í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ */**

â–  umount CMD	**/* ìì› ë§ˆìš´íŠ¸ë¥¼ í•´ì œ í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ */**

â–  mount -a CMD	**/* ë§ˆìš´íŠ¸ í•  ë§Œí•œ ì •ë³´ë¥¼ ëª¨ë‘ ë§ˆìš´íŠ¸ í•˜ëŠ” ëª…ë ¹ì–´ */**

â–  umount -a CMD	**/* ë§ˆìš´íŠ¸ ë˜ì–´ ìˆëŠ” ìì›ì„ ëª¨ë‘ í•´ì œí•  ë•Œ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ */**

ë§ˆìš´íŠ¸ëŠ” ìì›(ì˜ˆ: ì¥ì¹˜)ì„ ë§ˆìš´íŠ¸ í¬ì¸í„°ì— ì–»ì–´ì ¸ ë§ˆìš´íŠ¸ í¬ì¸í„°ë¥¼ ì‚¬ìš©í•˜ë©´, ìì›ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹ì´ë‹¤. ë¦¬ëˆ…ìŠ¤ëŠ” ì¥ì¹˜ë¥¼ íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ ë°”ê¾¸ì–´ ì£¼ì–´ì•¼ë§Œ ì¸ì‹ í•  ìˆ˜ ìˆê³  ê·¸ ì—­í• ì„ í•˜ëŠ” ê²ƒì´ ë§ˆìš´íŠ¸ ê¸°ëŠ¥ì´ë‹¤. ì‹œìŠ¤í…œì˜ ëª¨ë“  íŒŒì¼ë“¤ì€ í•˜ë‚˜ì˜ ê±°ëŒ€í•œ ë‚˜ë¬´ êµ¬ì¡°ì— ì†í•´ ìˆìœ¼ë©° ê·¸ ë¿Œë¦¬ëŠ” "/" ì´ë‹¤.

## [1] mount / umount ëª…ë ¹ì–´

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# mount [option] {[device] [mount point]}            /* {} : ê¸°ë³¸í˜•ì‹ */
# mount [-t ext4] [-o OPTIONS] /dev/sdb1 /testmount 
# mount /dev/sdb1 /testmount 
# mount /testmount (/etc/fstab)

# umount /dev/sdb1 
# umount /testmount
```

[option]

```bash
-o
-t
```

[ë§ˆìš´íŠ¸ ì˜µì…˜]

ë§ˆìš´íŠ¸ì‹œ ê¸°ë³¸ ì˜µì…˜(Defaut Options)ì„ ì‚¬ìš©í•œë‹¤. í•˜ì§€ë§Œ, ê¸°ë³¸ ì˜µì…˜ì€ mount ëª…ë ¹ì–´ ìˆ˜í–‰ì‹œ ì˜µì…˜ì„ ë”°ë¡œ ì£¼ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ ì˜µì…˜ìœ¼ë¡œ ë§ˆìš´íŠ¸ í•˜ê²Œ ëœë‹¤. ê¸°ë³¸ ì˜µì…˜ì€ rw, suid, exec, auto, nouser ì´ë‹¤.

```bash
# mount
defaults : rw, nouser, auto, exec, suid ì†ì„±ì„ ëª¨ë‘ ê°€ì§€ëŠ” ì˜µì…˜
ver8 defaults : rw, suid, dev, exec, auto, nouser, and async.

dev    :   íŒŒì¼ ì‹œìŠ¤í…œì˜ ìºë¦­í„°, ë¸”ëŸ­ íŠ¹ìˆ˜ì¥ì¹˜ì— ëŒ€í•œ ì¸ì‹
async  :   íŒŒì¼ ì‹œìŠ¤í…œì˜ ë™ê¸°í™” ì˜µì…˜ ì…ì¶œë ¥ ê´€ë ¨í•˜ì—¬ ë¹„ë™ê¸°ì  sync

rw     <-> ro /* ro : ì“¸ìˆ˜ ì—†ë‹¤. */
auto   <-> noauto   /* noauto : ë¶€íŒ…ì‹œ ìë™ ë§ˆìš´íŠ¸í•˜ì§€ ì•ŠìŒ */
atime  <-> noatime  /* noatime : Access Timeì„ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê¸°ì§€ ì•ŠëŠ” ì˜µì…˜ */
exec   <-> noexec   /* noexec ì‹¤í–‰ íŒŒì¼ì´ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í—ˆìš© ì•ˆí•¨ */
suid   <-> nosuid /* nosuid : SetUID í”„ë¡œê·¸ë¨ì²˜ëŸ¼ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤. */
nouser <-> user  /* nouser : ì¼ë°˜ ê³„ì • ì‚¬ìš©ìì´ ë§ˆìš´íŠ¸ í•  ìˆ˜ ì—†ëŠ” ì˜µì…˜ */

nousrquota <-> usrquota /* nousrpuota : ì¼ë°˜ì‚¬ìš©ì quotaì ìš©í•˜ì§€ ì•ŠìŒ(ext4 ì§€ì›í•˜ì§€ ì•ŠìŒ)*/
nogrpquota <-> grpquota /* nogrpquota : ê·¸ë£¹ quota ì ìš©í•˜ì§€ ì•ŠìŒ */
```

(ë§ˆìš´íŠ¸ ì˜µì…˜ ì˜ˆì œ)

```bash
mount ëª…ë ¹ì–´ ìˆ˜í–‰ì‹œ ro ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´, ì—¬ëŸ¬ê°€ì§€ ê¸°ë³¸ ì˜µì…˜ ì¤‘ read/writeë§Œ read only ì˜µì…˜ìœ¼ë¡œ ë°”ë€Œê³  ë‚˜ë¨¸ì§€ ì˜µì…˜(ì§€ì •ë˜ì§€ ì•Šì€ ì˜µì…˜)ì€ ê·¸ëŒ€ë¡œ ê¸°ë³¸ì˜µì…˜ì„ ë”°ë¥¸ë‹¤. ì—¬ëŸ¬ê°€ì§€ ì˜µì…˜ì„ ì§€ì •í•˜ëŠ” ê²½ìš° ì»´ë§ˆ(,)ë¡œ êµ¬ë¶„í•œë‹¤.

# mount -o ro /dev/sdb /testmount  (# mount -o ro,nouser,auto,exec,suid /dev/sdb /testmount)
# mount -o ro,nosuid /dev/sdb /testmount
# mount -o noatime /dev/sdb /testmount

ê° íŒŒí‹°ì…˜ë³„ ê¶Œì¥í•˜ëŠ” ë§ˆìš´íŠ¸ ì˜µì…˜(mount Options Reference)]
ro      /usr/local,         /* ì¶”ê°€ì ì¸ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ê³µê°„ -> (read-only) */
nosuid  /home/fedora, /user /* ì‚¬ìš©ì í™ˆë””ë ‰í† ë¦¬(íŒŒí‹°ì…˜) -> SetUID í”„ë¡œê·¸ë¨ìœ¼ë¡œ ë™ì‘(X) */
noatime /var                /* ê°€ë³€ì ì¸ ë°ì´í„° ê¸°ë¡ íŒŒí‹°ì…˜ -> access timeì„ ë‚¨ê¸°ì§€ ì•ŠìŒ*/
```

### [EX1] "ro ë§ˆìš´íŠ¸ ì˜µì…˜" ì‹¤ìŠµ read only

```bash
ro - ê³µìœ  ë””ë ‰í† ë¦¬ ê³ ì •ëœ íŒŒì¼ì„ ì œê³µí•˜ëŠ” ê²½ìš°. read only

# df â€“h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1              17G  3.5G   12G  23% /
/dev/sda8             487M   11M  451M   3% /data1
/dev/sda7             487M   11M  451M   3% /data2
/dev/sda6             487M   11M  451M   3% /data3
/dev/sda5             487M   11M  451M   3% /data4
/dev/sda3             487M   11M  451M   3% /home
tmpfs                 506M     0  506M   0% /dev/shm
/dev/sdb1            1004M   18M  936M   2% /testmount
# umount /testmount 
#

# mount -o ro /testmount 
# mount | grep testmount
/dev/sdb1 on /testmount type ext4 (ro)
# touch /testmount/file1
touch: cannot touch `/testmount/file1': Read-only file system
# umount /testmount   (# mount -o remount /testmount)
# mount /testmount
```

### [EX2] "noatime ì˜µì…˜" ì‹¤ìŠµ

atime(Access Time)ì„ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê¸°ì§€ ì•ŠëŠ” ì˜µì…˜ í™•ì¸

```bash
# mount /dev/sdb1 /sdb1
# cd /sdb1
# ls
# df .
# cp /etc/passwd file1
# echo soldesk >> file1
# ls
# cat file1 | head -1
# cat file1 | tail -1
```

```bash
[ì°¸ê³ ] íŒŒì¼ì˜ ì†ì„± ì •ë³´ ì¤‘ ì‹œê°„
# stat file1
mtime(Modify Time)   # ls -l    íŒŒì¼ ìƒì„± ë° íŒŒì¼ì˜ ë‚´ìš©ì„ ìˆ˜ì •í•œ ì‹œê°„ ê¸°ë¡
atime(Access Time)   # ls -lu   íŒŒì¼ ì ‘ê·¼ì‹œê°„ - íŒŒì¼ì„ ì—´ì–´ë³¼ ë•Œ ì‹œê°„ ê¸°ë¡
ctime(Changed Time)  # ls -lc   íŒŒì¼ ì†ì„± ì •ë³´ ë³€ê²½ ì‹œê°„ ê¸°ë¡
```

```bash
# stat file1 
File: `file1'
Size: 1904            Blocks: 8          IO Block: 4096   ì¼ë°˜ íŒŒì¼
Device: 801h/2049d      Inode: 846147      Links: 1
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
Access: 2010-06-22 16:09:03.000000000 +0900
Modify: 2010-06-22 16:09:01.000000000 +0900
Change: 2010-06-22 16:09:01.000000000 +0900
```

```bash
â‘  /testmount(/dev/hda1) ë§ˆìš´íŠ¸ ì˜µì…˜ í™•ì¸
# mount | grep testmount
/dev/hda1 on /testmount type ext4 (rw)
-> noatime : ë³´ì´ëŠ” ì˜µì…˜
-> atime(Access Time) : ì•ˆ ë³´ì´ëŠ” ì˜µì…˜
# cat /etc/fstab | grep testmount

â‘¡ ë§ˆìš´íŠ¸ í¬ì¸íŠ¸ ë³€ê²½ ë° ë§ˆìš´íŠ¸ ì˜µì…˜ í™•ì¸(/testmount -> /noatime)
ë§ˆìš´íŠ¸ í•  ë‹¹ì‹œì— íŠ¹ë³„í•˜ê²Œ ì˜µì…˜ì„ ì£¼ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ ì˜µì…˜(Default Options)ìœ¼ë¡œ ë§ˆìš´íŠ¸ ëœë‹¤.

# cd 
# umount /testmount 

# mkdir /noatime 
# mount /dev/sdb1 /noatime 
# mount | grep noatime
/dev/sba1 on /noatime type ext4 (rw)
â‘¢ ë§ˆìš´íŠ¸ì‹œ ê¸°ë³¸ ì˜µì…˜(noatime ì•„ë‹Œ ê²½ìš°) ì„¤ì • í™•ì¸
ê¸°ë³¸ ì˜µì…˜ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ íŒŒì¼ì„ ì ‘ê·¼(Access) í•  ë•Œ ë§ˆë‹¤ atime(Access Time)ì´ ë³€ê²½ëœë‹¤.

# cd /noatime 
# echo "hello" > testfile 
# ls -l testfile /* -l : mtime í™•ì¸í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì˜µì…˜ */
-rw-r--r-- 1 root root 6 Jan 27 03:39 testfile
# ls -lu testfile /* -u : atime í™•ì¸í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì˜µì…˜ */
-rw-r--r-- 1 root root 6 Jan 27 03:39 testfile
....
<ì–¼ë§ˆì˜ ì‹œê°„ì´ ì§€ë‚œ í›„>
....

# cat testfile
hello
# ls -l testfile
-rw-r--r-- 1 root root 6 Jan 27 03:39 testfile
# ls -lu testfile
-rw-r--r-- 1 root root 6 Jan 27 03:45 testfile
â‘£ ë§ˆìš´íŠ¸ ì˜µì…˜ noatimeìœ¼ë¡œ ì„¤ì •(noatime)
# cd ; umount /noatime 
**# mount -o noatime /dev/sdb1 /noatime** 
# mount | grep /noatime
/dev/sdb1 on /noatime type ext4 (rw,noatime)
â‘¤ ë³€ê²½ëœ ë§ˆìš´íŠ¸ ì˜µì…˜(noatime) í™•ì¸
# cd /noatime 
# rm -rf /noatime/* 

# echo "hello" > testfile 
# ls -l testfile
-rw-r--r-- 1 root root 6 Jan 27 03:49 testfile
# ls -lu testfile
-rw-r--r-- 1 root root 6 Jan 27 03:49 testfile
......
<ì–¼ë§ˆì˜ ì‹œê°„ì´ ì§€ë‚œ í›„>
......

# cat testfile
hello
# ls -l testfile
-rw-r--r-- 1 root root 6 Jan 27 03:49 testfile
# ls -lu testfile
-rw-r--r-- 1 root root 6 Jan 27 03:49 testfile
# vi testfile 
-> ìƒˆë¡œìš´ ë‚´ìš© ì¶”ê°€

# ls -l testfile
-rw-r--r-- 1 root root 10 Jan 27 10:20 testfile1
# ls -lu testfile
-rw-r--r-- 1 root root 10 Jan 27 10:20 testfile1
```

**(ê¶Œì¥)** **(ì„±ëŠ¥)** noatime ì˜µì…˜ì— ëŒ€í•´ì„œ

/var(Log/Spool/Caching) íŒŒì¼ì‹œìŠ¤í…œì— noatime ì˜µì…˜ì„ í†µí•´ ë§ˆìš´íŠ¸ í•˜ë©´, ì„±ëŠ¥ì´ ì¢‹ì•„ì§„ë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì— /varë””ë ‰í† ë¦¬ë„ ë³„ë„ì˜ íŒŒí‹°ì…˜ìœ¼ë¡œ ìƒì„±í•˜ëŠ”ê²ƒì„ ì¶”ì²œí•œë‹¤.

### [EX3] nosuid ì˜µì…˜ ì‹¤ìŠµ

nosuid : SetUID í”„ë¡œê·¸ë¨ì²˜ëŸ¼ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.

```bash
â‘  ë§ˆìš´íŠ¸ í¬ì¸íŠ¸ ë³€ê²½ ë° ë§ˆìš´íŠ¸ ì˜µì…˜ í™•ì¸
ë§ˆìš´íŠ¸ í•  ë‹¹ì‹œì— íŠ¹ë³„í•˜ê²Œ ì˜µì…˜ì„ ì£¼ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ ì˜µì…˜(Default Options)ìœ¼ë¡œ ë§ˆìš´íŠ¸ ëœë‹¤.

# cd 
# umount /noatime 

# mkdir /setuid 
# mount /dev/sdb1 /setuid 
# mount | grep /setuid
/dev/hda1 on /setuid type ext4 (rw)
â‘¡ SetUID í”„ë¡œê·¸ë¨ ìƒì„±
ì»¤ë„ 2.6ë²„ì „ë¶€í„°ëŠ” ì‰˜ì€ SetUID, SetGIDë¥¼ ë¶€ì—¬í•  ìˆ˜ ì—†ë‹¤. SetUID íŠ¹ìˆ˜ê¶Œí•œì„ ì§€ë‹Œ bashì‰˜ì„ ë§Œë“¤ê¸° ìœ„í•´ vi í¸ì§‘ê¸°ë¥¼ ì´ìš©í•˜ì—¬ í”„ë¡œê·¸ë¨ì„ ë§Œë“ ë‹¤.

# cd /test 
# vi backdoor.c
#include <stdio.h>
--------------------------------
main() 
{
setuid(0);
setgid(0);
system("/bin/bash");
}
--------------------------------
------------------------------     < ë³€ê²½ëœ ë²„ì „
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#define _GNU_SOURCE

int main () 
{
	setuid(0);
	setgid(0);
	system("/bin/bash");
}
------------------------------
		(gcc íŒ¨í‚¤ì§€ê°€ ì—†ìœ¼ë©´ gcc RPM íŒ¨í‚¤ì§€ ì„¤ì¹˜)
		# rpm -qa | grep gcc 
		# yum -y install gcc
# gcc -o back backdoor.c 
# ls -l back
-rwxr-xr-x 1 root root 5.1K Apr 28 17:24 back*
# chmod 4755 back/* SetUID ê¶Œí•œì„ ë¶€ì—¬ */
# ls -l back
-rwsr-xr-x 1 root root 5.1K Apr 28 17:24 back*
# cp /test/back /setuid /* SetUID ê¶Œí•œì´ ì‹¤í–‰ ê°€ëŠ¥í•˜ë„ë¡ ë§ˆìš´íŠ¸ ëœ ë””ë ‰í† ë¦¬ë¡œ cp */
ë³µì‚¬ëœ íŒŒì¼ì—ëŠ” setuid ê¶Œí•œì´ ì—†ê¸° ë•Œë¬¸ì— ë‹¤ì‹œ setuid ê¶Œí•œì„ ë¶€ì—¬í•´ì¤€ë‹¤.

â‘¢ SetUID í”„ë¡œê·¸ë¨ ì‚¬ìš©ìë¡œ ì‹¤í–‰
# telnet localhost 
fedora ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸

$ id
uid=500(fedora) gid=500(fedora) groups=500(fedora)
$ cd /setuid 
$ ./back
# id
uid=0(root) gid=0(root) groups=500(fedora)
# exit 
$ exit 
#

â‘£ ë§ˆìš´íŠ¸ ì˜µì…˜ nosuidë¡œ ì„¤ì •
# cd ; umount /setuid 
# mount -o nosuid /dev/sdb1 /setuid 
# mount | grep setuid
/dev/hda1 on /setuid type ext4 (rw,nosuid)
# cp /test/back /setuid
â‘¤ nosuid ì˜µì…˜ ì„¤ì • í™•ì¸
# telnet localhost 
fedora ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸

$ id
uid=500(fedora) gid=500(fedora) groups=500(fedora)
$ cd /setuid 
$ ./back 

$ id
uid=500(fedora) gid=500(fedora) groups=500(fedora)
$ exit 
$ exit 
#
```

```bash
(ê¶Œì¥) (ë³´ì•ˆ) nosuid ì˜µì…˜ì— ëŒ€í•´ì„œ
/home(ì‚¬ìš©ì í™ˆë””ë ‰í† ë¦¬) íŒŒì¼ì‹œìŠ¤í…œì€ nosuid ì˜µì…˜ìœ¼ë¡œ ë§ˆìš´íŠ¸ë¥¼ í•˜ë©´, ì‚¬ìš©ìë“¤ì´ SetUID í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì–´ë„ SetUID ë™ì‘ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ì‹œìŠ¤í…œì˜ ë³´ì•ˆì´ ê°•í™”ëœë‹¤.
# find /home -perm -4000 -exec rm -f {} \; 
# mount -o nosuid /home[EX4] "usrquota ë§ˆìš´íŠ¸ ì˜µì…˜" ì‹¤ìŠµ
```

---

ê¶Œí•œì— ëŒ€í•œ ì œí•œ

chmod, chown, acl, attr

ìš©ëŸ‰ì— ëŒ€í•œ ì œí•œ

quota : â­â­

ë””ìŠ¤í¬ ìš©ëŸ‰ ê³µê°„ì— ëŒ€í•œ ì œí•œ. ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ì— ëŒ€í•œ ì œí•œ.

íŒŒì¼ ì‹œìŠ¤í…œ êµ¬ì„± ë° ê³„íšì—ì„œ ì¿¼í„°ëŠ” ëŠ˜ ë¹ ì§€ì§€ ì•Šì€ ê³„íšì„œì— ìˆì–´ì•¼ í•˜ëŠ” í•­ëª©ì´ë‹¤.

ì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” ì¿¼í„°ê°€ ì œí•œì„ ì£¼ê¸° ë•Œë¬¸ì— ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ìœ ë°œí•˜ì§€ë§Œ ì ì–´ë„ ë‚´ê°€ ì‚¬ìš©í•˜ëŠ” ìµœì†Œ ìš©ëŸ‰ì„ í™•ë³´ í•  ìˆ˜ ìˆë‹¤.

```bash
ext ê³„ì—´ quota
	
xfs ê³„ì—´ quota
	xfs_quota
```

- [EX4] "usrquota ë§ˆìš´íŠ¸ ì˜µì…˜" ì‹¤ìŠµ
	
	/home ë””ë ‰í† ë¦¬ëŠ” ëª¨ë“  ìœ ì €ê°€ ê³µìœ í•˜ëŠ” í´ë”ì´ë‹¤.

```bash
ì¿¼í„° : ë””ìŠ¤í¬ ìš©ëŸ‰ ê³µê°„ì— ëŒ€í•œ ì œí•œ. ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ì— ëŒ€í•œ ì œí•œ
ì†Œí”„íŠ¸ > ê²½ê³ 
í•˜ë“œ   > ê°•ì œ
ê³µìœ  ìŠ¤í† ë¦¬ì§€ì˜ ëª¨ë“  ê³µê°„ì„ í•œ ì‚¬ìš©ìê°€ ì ìœ í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•¨
ì‚¬ìš©ìê°€ ë§ì€ ì‹œìŠ¤í…œì˜ ê²½ìš°ì— ì´ëŸ¬í•œ ì„¤ì •ì„ ë§ì´ í•´ë‘ëŠ” í¸

íŒŒì¼ ì‹œìŠ¤í…œ êµ¬ì„± ë° ê³„íšì—ì„œ ì¿¼í„°ëŠ” ëŠ˜ ë¹ ì§€ì§€ ì•Šì€ ê³„íšì„œì— ìˆì–´ì•¼ í•˜ëŠ” í•­ëª©ì´ë‹¤.
```

ì¿¼í„°(Quota)ë€? ì‚¬ìš©ìë‚˜ í˜¹ì€ ê·¸ë£¹ì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” inodeì˜ ìˆ˜, í˜¹ì€ ì‚¬ìš©ìë‚˜ ê·¸ë£¹ì—ê²Œ í• ë‹¹ëœ `ë””ìŠ¤í¬ ë¸”ë¡`ì˜ ìˆ˜ë¥¼ ì œí•œí•¨ìœ¼ë¡œì¨ ë””ìŠ¤í¬ ì €ì¥ ì¥ì¹˜ì˜ ì‚¬ìš©ì„ ì œí•œí•œë‹¤. 

Quota = ì œí•œ(Limit)

íŒŒì¼ì˜ ê°œìˆ˜(Inode Count)

Soft Limit

Hard Limit

ì‚¬ìš©ëŸ‰(Block Count)   â­

Soft Limit

Hard Limit

ex) fedoraë¼ëŠ” ì‚¬ìš©ì ë˜ëŠ” fedoraë¼ëŠ” ê·¸ë£¹ì— ëŒ€í•´ Diskì˜ ìš©ëŸ‰ì„ quotaë¥¼ ì´ìš©í•´ 10ë©”ê°€ë¡œ ì œí•œí•˜ê³  Diskì‚¬ìš©ëŸ‰ì´ 9ë©”ê°€ê°€ ë„˜ì„ ì‹œ ê²½ê³ ë¥¼ í•´ì£¼ëŠ” ê²ƒì„ ë§í•œë‹¤.

[ì°¸ê³ ] quota ì„¤ì¹˜ ë° í™•ì¸

```bash
quotaê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•˜ëŠ” ë²•
# rpm -qa quota  (# dnf -y install quota)
quota-3.13-1.2.5.el5
```

â–  Quota ê´€ë ¨ ëª…ë ¹ì–´

```bash
ëª…ë ¹ì–´          ì„¤ëª…
quota         ì„¤ì •ëœ ê° ì‚¬ìš©ì ë˜ëŠ” ê·¸ë£¹ì˜ ì¿¼íƒ€ë¥¼ í™•ì¸
edquota       ê° ì‚¬ìš©ì ë˜ëŠ” ê·¸ë£¹ì˜ ë””ìŠ¤í¬ ì¿¼íƒ€ë¥¼ ì„¤ì • (edit)
quotaon       ì¿¼íƒ€ ì‘ë™
quotaoff      ì¿¼íƒ€ ì¤‘ì§€
quotacheck    ì¿¼íƒ€ ìƒí™© í™•ì¸ (check)
repquota      ì¿¼íƒ€ ì„¤ì •ë‚´ì—­ í™•ì¸ (report)
```

```bash
â–  Quota ì„¤ì • ë°©ë²• 
(ã„±) ë§ˆìš´íŠ¸ ì˜µì…˜ ì„¤ì •
# mount -o usrquota /home (/etc/fstab)
(ã„´) F/S(EX: /home)ì— aquota.user(EX: /home/aquota.user)
# quotacheck â€“am 
(ã„·) Quota ì„¤ì •
# edquota qtest1 
(ã„¹) Quota ON
# quotaon â€“a 

â–  Quota í•´ì œ ë°©ë²•
(ã„±) Quota OFF
# quotaoff â€“a
(ã„´) F/S(EX: /home)ì— aquota.user íŒŒì¼ ì‚­ì œ
# rm â€“f /home/aquota.user
(ã„·) ë§ˆìš´íŠ¸ ì˜µì…˜ ë³µì›
# mount -o remount /home (/etc/fstab)
```

```bash
â‘  ë§ˆìš´íŠ¸ í¬ì¸íŠ¸ ë³€ê²½ ë° ë§ˆìš´íŠ¸ ì˜µì…˜ í™•ì¸
ë§ˆìš´íŠ¸ í•  ë‹¹ì‹œì— usrqouta ì˜µì…˜ì„ ì´ìš©í•˜ì—¬ ë§ˆìš´íŠ¸ í•œë‹¤.

# cd ; umount /home 
[ì°¸ê³ ] ì‹¤ì œ ìš´ì˜ì¤‘ì¸ ì„œë²„ì¸ ê²½ìš°ì—ëŠ” /home ë””ë ‰í† ë¦¬ì˜ umountì‹œ í™•ì¸í•´ì•¼ í•œë‹¤.
ë§Œì•½ ì ‘ì†í•œ ì¼ë°˜ ê³„ì •ì´ ìˆë‹¤ë©´ fuser ëª…ë ¹ì–´ë¡œ í™•ì¸ë’¤ ì™„ì „íˆ ë¡œê·¸ì•„ì›ƒ ì´í›„ì— ì‘ì—…ì„ ì§„í–‰í•œë‹¤.
w who 

# mount -o usrquota /home   (# mount -o usrquota /dev/sda3 /home)
# mount | grep /home
/dev/sdb1 on /home type ext4 (rw,usrqouta)
	[ì°¸ê³ ] /etc/fstab ë“±ë¡í•œë‹¤ë©´ 
	# vi /etc/fstab 
	LABEL=/home        /home       ext4    defaults,usrquota     1 2
# cd /home 

â‘¡ quotaë¥¼ ì´ìš©í•  ì‚¬ìš©ì ë§Œë“¤ê¸° 
# useradd qtest1 
# passwd qtest1 

# useradd qtest2 
# passwd qtest2 

# useradd qtest3 
# passwd qtest3
â‘¢ ì¿¼í„° ë°ì´í„°ë² ì´ìŠ¤(EX: /home/aquota.user) ì •ë³´ ì…ë ¥
# cd 
# quotacheck -am 
# ls -l /home 
-> aquota.user 

		# man quotacheck
				       -m      Do not try  to  remount  filesystem read-only. See comment
                       with option -M.
                -a     Check all mounted non-NFS filesystems in /etc/mtab

# ls â€“l /home/aquota.user
-rw------- 1 root   root   8.0K Oct 23 22:00 aquota.user
-> 600 í¼ë¯¸ì…˜(rw--------)

# edquota -u qtest1
Disk quotas for user qtest1 (uid 501):
  Filesystem                   blocks    soft       hard     inodes     soft     hard
  /dev/sdb1                    12         5120      7168       12        0        0
soft ëŠ” 5M(5120), hardëŠ” 7M(7168)ë¡œ ì œí•œ (1024 byte = 1 Kbyte)
(edquota -u qtest1 ì¶œë ¥ê²°ê³¼ í•´ì„)
-----------------------------------------------------------------------------------------
/dev/hda1Filesystem, Quota ì„¤ì •ì´ ëœ ë””ë°”ì´ìŠ¤
12        blocks, íŒŒì¼ì— ëŒ€í•œ í˜„ì¬ ì‚¬ìš©ëŸ‰(Blocks Used)
5120      soft,   íŒŒì¼ ìš©ëŸ‰ì— ëŒ€í•œ ê²½ê³„ê°’ì„ ë„˜ìœ¼ë©´ ê²½ê³  ë©”ì„¸ì§€ ì£¼ëŠ” ê°’(Soft Limit)
7168      hard,   íŒŒì¼ ìš©ëŸ‰ì— ëŒ€í•œ ì ˆëŒ€ë¡œ ë„˜ì„ìˆ˜ ì—†ëŠ” ê²½ê³„ê°’(Hard Limit)
12        inodes, íŒŒì¼ì— ëŒ€í•œ í˜„ì¬ ì‚¬ìš©ê°œìˆ˜(Inodes Used)
0         soft,   íŒŒì¼ ê°œìˆ˜ì— ëŒ€í•œ ê²½ê³„ê°’ì„ ë„˜ìœ¼ë©´ ê²½ê³  ë©”ì„¸ì§€ ì£¼ëŠ” ê°’(Soft Limit)
0         hard,   íŒŒì¼ ê°œìˆ˜ì— ëŒ€í•œ ì ˆëŒ€ë¡œ ë„˜ì„ ìˆ˜ ì—†ëŠ” ê²½ê³„ê°’(Hard Limit)
-----------------------------------------------------------------------------------------

# quota qtest1 /* quotaì˜ ì„¤ì •ë‚´ìš© í™•ì¸ */
Disk quotas for user qtest1 (uid 505):
     Filesystem  blocks   quota   limit   grace   files   quota   limit   grace
      /dev/sdb1      13    5120    7168              13       0       0
# quotacheck -a 

â‘£ ì¿¼í„° ì ìš©
# quotaon /home 

â‘¤ ì¿¼í„° ì‚¬ìš©ìì¸ qtest1ë¡œ ë¡œê·¸ì¸í•´ì„œ ì‚¬ìš© ìš©ëŸ‰ ì´ˆê³¼ ì‹¤ìŠµ
# su â€“ qtest1 
$ pwd 
-> /home/qtest1 í™ˆë””ë ‰í† ë¦¬

[qtest1@test ~]$ cat /etc/services  >> file1
[qtest1@test ~]$ ls -lh file1
-rw-rw-r--. 1 qtest1 qtest1 655K Mar 26 10:59 file1
[qtest1@test ~]$ cat /etc/services  >> file1
[qtest1@test ~]$ cat /etc/services  >> file1
[qtest1@test ~]$ cat /etc/services  >> file1
[qtest1@test ~]$ cat /etc/services  >> file1
[qtest1@test ~]$ cat /etc/services  >> file1
[qtest1@test ~]$ cat /etc/services  >> file1
[qtest1@test ~]$ cat /etc/services  >> file1
sda8: warning, user block quota exceeded. /* ì‚¬ìš©ìì˜ block ì¿¼í„°ì˜ ì œí•œì„ ì´ˆê³¼í•˜ì˜€ë‹¤ëŠ” ê²½ê³  */

[qtest1@test ~]$ cat /etc/services  >> file1
[qtest1@test ~]$ cat /etc/services  >> file1
[qtest1@test ~]$ cat /etc/services  >> file1
sda8: write failed, user block limit reached.
cat: write error: Disk quota exceeded
[qtest1@test ~]$ cat /etc/services  >> file1
cat: write error: Disk quota exceeded
[qtest1@test ~]$ cat /etc/services  >> file1
cat: write error: Disk quota exceeded
[qtest1@test ~]$ ls -lh
total 7.0M
-rw-rw-r--. 1 qtest1 qtest1 7.0M Mar 26 11:00 file1 /* ì‚¬ìš©ìì˜ block ì¿¼í„°ì˜ ê²½ê³„ ì œí•œì„ ì´ˆê³¼í•˜ì—¬ íŒŒì¼ ì¶”ê°€ê°€ ì‹¤íŒ¨ */

$ ls -lh
-rw-r--r-- 1 qtest1 qtest1 2.1M  8ì›”  2 12:55 test1
-rw-r--r-- 1 qtest1 qtest1 2.1M  8ì›”  2 12:56 test2
-rw-r--r-- 1 qtest1 qtest1 2.1M  8ì›”  2 12:56 test3
-rw-r--r-- 1 qtest1 qtest1 924K  8ì›”  2 12:56 test4
â‘¥ ë‹¤ë¥¸ ì‚¬ìš©ìë„ ë˜‘ê°™ì´ ì ìš©ì‹œí‚¨ë‹¤.
$ exit 
# edquota -p qtest1 qtest2
		# edquota -p qtest1 qtest2       (qtest1 -> qtest2)
		# edquota -p qtest1 qtest2 test3 (qtest1 -> qtest2, qtest3)
		# edquota -p qtest1 `awk -F: '$3 > 1000 && $3 < 60000 '{print $1}' /etc/passwd`
# quota qtest2 
-> ì†ì„±ì •ë³´ ë³µì‚¬ í™•ì¸

# repquota -a 
-> ëª¨ë“  ì‚¬ìš©ìì— ëŒ€í•œ ì •ë³´ í™•ì¸
â‘¦ ì¿¼í„° ì‚¬ìš©ìì¸ qtest2ë¡œ ë¡œê·¸ì¸í•´ì„œ ì‚¬ìš© ìš©ëŸ‰ ì´ˆê³¼ ì‹¤ìŠµ
$ su - qtest2 
qtest2 ì‚¬ìš©ìë¡œ ì „í™˜

$ cp /boot/vmlinuz-2.6.18-164.el5 linux1 
$ cp linux1 linux2 
$ cp linux1 linux3
hda1: warning, user block quota exceeded.
$ cp linux1 linux4
hda1: write failed, user block limit reached.
cp: writing `linux4': Disk quota exceeded
$ ls -lh
-rw-r--r-- 1 qtest2 qtest2 2.1M  8ì›”  2 13:00 linux1
-rw-r--r-- 1 qtest2 qtest2 2.1M  8ì›”  2 13:00 linux2
-rw-r--r-- 1 qtest2 qtest2 2.1M  8ì›”  2 13:00 linux3
-rw-r--r-- 1 qtest2 qtest2 924K  8ì›”  2 13:00 linux4
$ exit 
#

â‘§ ì¿¼í„° ì„¤ì •ì´ ì—†ëŠ” qtest3ë¡œ ë¡œê·¸ì¸í•´ì„œ ì‚¬ìš© ìš©ëŸ‰ ì´ˆê³¼ ì‹¤ìŠµ
# su - qtest3 
$ cp /boot/vmlinuz-2.6.18-164.el5 file1 
$ cp file1 file2 
$ cp file1 file3 
$ cp file1 file4 
$ cp file1 file5 
$ ls -lh 

â‘¨ ì¿¼í„° ì„¤ì • off
$ exit 

# quotaoff /home 

# su - qtest2 
qtest2 ì‚¬ìš©ìë¡œ ì „í™˜

$ cp linux1 linux5 
$ ls -lh 

$ exit 
#
```

```bash
(ë³µì›) /quota íŒŒì¼ì‹œìŠ¤í…œ Quota OFF
# quotaoff /home 
# mount -o remount /home  (/etc/fstab)
# mount | grep /home 

# userdel â€“r qtest1 
# userdel â€“r qtest2 
# userdel â€“r qtest3 

# rm /home/aquota.user 

(ê¶Œì¥) (ê´€ë¦¬) usrquota,grpquota ì˜µì…˜ì— ëŒ€í•´ì„œ
/home(ì‚¬ìš©ì í™ˆë””ë ‰í† ë¦¬), /var/mail(Mail íŒŒì¼ì‹œìŠ¤í…œ) íŒŒì¼ì‹œìŠ¤í…œì€ usrquota ì˜µì…˜ìœ¼ë¡œ ë§ˆìš´íŠ¸ë¥¼ í•˜ë©´ ìš©ëŸ‰ ì œí•œ ë˜ëŠ” íŒŒì¼ ì œí•œì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.
```

xfs quota ì„¤ì • ë°©ë²•

```bash
# vi /etc/fstab
#
# /etc/fstab
# Created by anaconda on Wed Jul  1 16:52:49 2020
#
# Accessible filesystems, by reference, are maintained under '/dev/disk/'.
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.
#
# After editing this file, run 'systemctl daemon-reload' to update systemd
# units generated from this file.
#
UUID=5392d03e-fb91-4071-aa10-248bb54f48d4 /                       xfs     defaults        0 0
UUID=21b39ed9-9b3a-4a52-93a3-3ae14b7954d4 /boot                   ext4    defaults        1 2
UUID=f64133ae-ddb0-4af0-b65d-257ac5c5084d /home                   xfs     defaults,usrquota        0 0
UUID=bd9f90bc-34ed-4e03-a660-dc648d31dee1 /var                    xfs     defaults        0 0
UUID=3a741d74-96c2-4ed1-a39b-45ffa814ce47 swap                    swap    defaults        0 0
UUID=08f86f5f-cbdb-4971-ac7e-4e917c4342b2 /disk1		  xfs 	  defaults	  0 0

# xfs_quota -x -c 'report -h' /home
# reboot

# mount | grep home
/dev/sda3 on /home type xfs (rw,relatime,seclabel,attr2,inode64,usrquota)

# xfs_quota -x -c 'report -h' /home
User quota on /home (/dev/sda3)
                        Blocks              
User ID      Used   Soft   Hard Warn/Grace   
---------- --------------------------------- 
root            0      0      0  00 [------]
team01        16K      0      0  00 [------]
fedora        12K      0      0  00 [------]

# xfs_quota -x -c 'limit -u bsoft=700m bhard=1g team01' /home

ë°ì´í„°ë¥¼ ë³µì‚¬í•˜ì—¬ ì¿¼í„°ì— ëŒ€í•œ í™•ì¸

```

[2] mount -a / umount -a ëª…ë ¹ì–´

mount -a ëª…ë ¹ì–´ëŠ” ë§ˆìš´íŠ¸ í•  ë§Œí•œ ì •ë³´ë“¤ì„ ëª¨ë‘ ë§ˆìš´íŠ¸ í•œë‹¤. ë§ˆìš´íŠ¸ í•  ë§Œí•œ ì •ë³´ë“¤ì€ /etc/fstab íŒŒì¼ì„ ì°¸ì¡°í•˜ì—¬ ë§ˆìš´íŠ¸í•œë‹¤. umount -a ëª…ë ¹ì–´ëŠ” í˜„ì¬ ë§ˆìš´íŠ¸ ë˜ì–´ ìˆëŠ” ëª¨ë“  íŒŒì¼ì‹œìŠ¤í…œì„ ì–¸ ë§ˆìš´íŠ¸ í•œë‹¤. í˜„ì¬ ë§ˆìš´íŠ¸ ëœ ì •ë³´ëŠ” /etc/mtab íŒŒì¼ì— ì¡´ì¬í•œë‹¤. í•˜ì§€ë§Œ ì–¸ë§ˆìš´íŠ¸ ì‹œí‚¬ ìˆ˜ ì—†ëŠ” íŒŒì¼ì‹œìŠ¤í…œì´ ìˆë‹¤. ì´ê²ƒë“¤ì€ /, /usr, /var, /tmp, ê°€ìƒ íŒŒì¼ì‹œìŠ¤í…œë“±ì´ë‹¤.

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# mount -a /* (/etc/fstab) ë§ˆìš´íŠ¸ í•  ë§Œí•œ ì •ë³´ë¥¼ ëª¨ë‘ ë§ˆìš´íŠ¸ í•˜ëŠ” ëª…ë ¹ì–´ */
# umount -a /* (/etc/mtab)  ë§ˆìš´íŠ¸ ë˜ì–´ ìˆëŠ” ìì›ì„ ëª¨ë‘ í•´ì œí•  ë•Œ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ */
```

### [EX] mount -a /umount -a ì‹¤ìŠµ

â‘  umount -a ëª…ë ¹ì–´ ì‹¤ìŠµ

/etc/fstab ì— ìˆëŠ” ê²ƒë“¤ì„ mount -a ë¡œ í•œë²ˆì— mount í•  ìˆ˜ ìˆë‹¤.

```bash
# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1              17G  3.4G   12G  22% /
/dev/sda8             487M   11M  451M   3% /data1
/dev/sda7             487M   11M  451M   3% /data2
/dev/sda6             487M   11M  451M   3% /data3
/dev/sda5             487M   11M  451M   3% /data4
/dev/sda3             487M   11M  451M   3% /home
tmpfs                 506M     0  506M   0% /dev/shm
/dev/sdb1            1004M   18M  936M   2% /testmount
# umount -a
umount: /var/lib/nfs/rpc_pipefs: device is busy
umount: /: device is busy
# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1              17G  3.4G   12G  22% /
â‘¡ mount -a ëª…ë ¹ì–´ ì‹¤ìŠµ
# vi /etc/fstab
LABEL=/                 /                       ext4    defaults        1 1
LABEL=/data1            /data1                  ext4    defaults        1 2
LABEL=/data2            /data2                  ext4    defaults        1 2
LABEL=/data3            /data3                  ext4    defaults        1 2
LABEL=/data4            /data4                  ext4    defaults        1 2
LABEL=/home             /home                   ext4    defaults        1 2
tmpfs                   /dev/shm                tmpfs   defaults        0 0
devpts                  /dev/pts                devpts  gid=5,mode=620  0 0
sysfs                   /sys                    sysfs   defaults        0 0
proc                    /proc                   proc    defaults        0 0
LABEL=SWAP-sda2         swap                    swap    defaults        0 0
#/dev/sdb1              /testmount              ext4    defaults        1 2

# mount -a
# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1              17G  3.4G   12G  22% /
/dev/sda8             487M   11M  451M   3% /data1
/dev/sda7             487M   11M  451M   3% /data2
/dev/sda6             487M   11M  451M   3% /data3
/dev/sda5             487M   11M  451M   3% /data4
/dev/sda3             487M   11M  451M   3% /home
tmpfs                 506M     0  506M   0% /dev/shm
```

## ì‚¬ìš© ì¤‘ì¸ íŒŒì¼ì‹œìŠ¤í…œ ë§ˆìš´íŠ¸ í•´ì œ

ë§ˆìš´íŠ¸ ëœ íŒŒì¼ì‹œìŠ¤í…œì„ ëˆ„êµ°ê°€ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ê´€ë¦¬ìëŠ” íŒŒì¼ì‹œìŠ¤í…œì„ ì–¸ë§ˆìš´íŠ¸ í•  ìˆ˜ ì—†ë‹¤. ê´€ë¦¬ìëŠ” ì´ëŸ° ê²½ìš°ë¼ í•˜ë”ë¼ë„ ë°˜ë“œì‹œ ì–¸ë§ˆìš´íŠ¸ í•´ì•¼ í•œë‹¤ë©´ fuser -ckë¡œ ë§ˆìš´íŠ¸í¬ì¸í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ìš©ìë“¤ì„ ê°•ì œë¡œ ë¡œê·¸ì•„ì›ƒ ì‹œí‚¤ê³  umount ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°•ì œì ìœ¼ë¡œ íŒŒì¼ì‹œìŠ¤í…œì„ ì–¸ë§ˆìš´íŠ¸ í•  ìˆ˜ ìˆë‹¤.

ë§Œì•½ ìµœì†Œ ì„¤ì¹˜ ë²„ì „ì´ë¼ ëª…ë ¹ì–´ê°€ ì—†ë‹¤ë©´ ì„¤ì¹˜

```bash
# dnf list | grep psmisc
# dnf -y install psmisc
```

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# fuser -cu /home /* -c : PID, -u : username */
# fuser -ck /home /* -c : PID, -k : kick */
```

### [EX1] ì‚¬ìš©ì¤‘ì¸ íŒŒì¼ì‹œìŠ¤í…œ ì–¸ë§ˆìš´íŠ¸ ì‹¤ìŠµ

[TERM1] ì‚¬ìš©ì ìœˆë„ìš°

```bash
# telnet localhost 
fedora ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸

$ pwd
/home/fedora
```

[TERM2] ê´€ë¦¬ì ìœˆë„ìš°

```bash
	â–  ì„œë¹„ìŠ¤ ìš´ìš©ì¤‘ì— ì‘ì—…í•´ì•¼ í•˜ëŠ” ê²½ìš°
			- F/S Check     (fsck CMD) : (umount CMD + fsck CMD)
			- Offline Backup(dump CMD) : (umount CMD + dump CMD)
# umount /home
umount: /home: device is busy
umount: /home: device is busy
# fuser -cu /home                     /* -c : PID, -u : username */
/home:                5103c(fedora)
# wall '/home directory! stops a use'
Broadcast message from root (pts/1) (Wed Jan 27 05:53:29 2010):
/home directory! stops a use
..... (30ë¶„ ì •ë„ í›„) .....

# fuser â€“cu /home
/home:                5103c(fedora)
# fuser â€“ck /home               /* ëŠê¸° */
/home:                5103c
# umount /home
```

### [EX2] ìì‹ ì´ ì‚¬ìš©ì¤‘ ì¼ë•Œ

```bash
# mount /home 

# cd /home 
# umount /home
umount: /home: device is busy
umount: /home: device is busy
# fuser â€“cu /home
/home:                9018c(root)
# ps
 PID TTY          TIME CMD
 9018 pts/3    00:00:00 bash
# cd 
# umount /home 

# mount /home 
# df -h 
-> /home ë§ˆìš´íŠ¸ í™•ì¸
```

[ì°¸ê³ ] e2label ëª…ë ¹ì–´

í˜„ ìƒí™©ì—ì„œëŠ” ê±°ì˜ ì“°ì´ì§€ ì•ŠëŠ”ë‹¤.

â–  e2label : íŠ¹ì • ë³¼ë¥¨ì— ëŒ€í•œ ë³µì¡í•œ ì¥ì¹˜ëª…ì— ë¼ë²¨ì„ ë¶™ì—¬ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ëª…ë ¹ì–´

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# e2label /dev/sdb1 
# e2label /dev/sdb1 /testmount
```

### [EX3] e2label ì‹¤ìŠµ

```bash
# e2label
Usage: e2label device [newlabel]
# e2label /dev/sda3
/home
# e2label /dev/sdb1 
#

# e2label /dev/sdb1 /testmount 
# e2label /dev/sdb1
/testmount
# vi /etc/fstab
LABEL=/                 /                       ext4    defaults        1 1
LABEL=/data1            /data1                  ext4    defaults        1 2
LABEL=/data2            /data2                  ext4    defaults        1 2
LABEL=/data3            /data3                  ext4    defaults        1 2
LABEL=/data4            /data4                  ext4    defaults        1 2
LABEL=/home             /home                   ext4    defaults        1 2
tmpfs                   /dev/shm                tmpfs   defaults        0 0
devpts                  /dev/pts                devpts  gid=5,mode=620  0 0
sysfs                   /sys                    sysfs   defaults        0 0
proc                    /proc                   proc    defaults        0 0
LABEL=SWAP-sda2         swap                    swap    defaults        0 0
#
# (1) DISK Configuration
#
#/dev/sdb1              /testmount              ext4    defaults        1 2
LABEL=/testmount        /testmount              ext4    defaults        1 2
# umount /testmount 
# mount /testmount 
# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1              17G  3.4G   12G  22% /
/dev/sda8             487M   11M  451M   3% /data1
/dev/sda7             487M   11M  451M   3% /data2
/dev/sda6             487M   11M  451M   3% /data3
/dev/sda5             487M   11M  451M   3% /data4
/dev/sda3             487M   11M  451M   3% /home
tmpfs                 506M     0  506M   0% /dev/shm
/dev/sdb1            1004M   18M  936M   2% /testmount
		# e2label /dev/sdb1 /testmount (/etc/fstab)
		# mount /dev/sdb1 /testmount
		# mount LABEL=/testmount /testmount
		# mount /testmount
```

**(ì •ë¦¬|ì‹¤ìŠµ) ë””ìŠ¤í¬ ì¶”ê°€ ì‘ì—…**

```bash
ë””ìŠ¤í¬ ì¶”ê°€
- (ã„±) ë””ìŠ¤í¬ ì¸ì‹(# chkconfig kudzu on)
- (ã„´) íŒŒí‹°ì…˜ ì„¤ì •(# fdisk /dev/sdc)
- (ã„·) íŒŒì¼ì‹œìŠ¤í…œ ì‘ì—…(# mkfs.ext4 /dev/sdc1)
- (ã„¹) ë§ˆìš´íŠ¸ ì‘ì—…(# mount /dev/sdc1 /oracle, /etc/fstab)

(ã„±) ë””ìŠ¤í¬ ì¸ì‹
# chkconfig --list kudzu
# chkconfig kudzu on 
Power OFF
ë””ìŠ¤í¬ ì¥ì°©(VMWare > VM > Add > "Hard Drive" > "Create a new virtual disk" > 
                     SCSI > 1.0G > Finish)
Power ON
# ls -l /dev/sd?  (# fdisk -l)
(ã„´) íŒŒí‹°ì…˜ ì„¤ì •
# fdisk /dev/sdc 
/dev/sdc1(primary partition(1G))
# fdisk â€“l /dev/sdc 
(ã„·) íŒŒì¼ì‹œìŠ¤í…œ ì‘ì—…
# mkfs.ext4 /dev/sdc1 
# dumpe2fs /dev/sdc1   (# tune2fs â€“l /dev/sdc1)
(ã„¹) ë§ˆìš´íŠ¸ ì‘ì—…
# mkdir /oracle
# mount /dev/sdc1 /oracle
# vi /etc/fstab
# df â€“h
```

## ì˜¤ë²„ë§ˆìš´íŠ¸

- ì¥ì¹˜ë¥¼ ë§ˆìš´íŠ¸ í•˜ëŠ” ê²½ìš°ì— ë””ë ‰í† ë¦¬ ë‚´ë¶€ê°€ ë¹„ì–´ ìˆëŠ” ë””ë ‰í† ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤. í•˜ì§€ë§Œ ê°€ë” íŒŒì¼ì´ ìˆëŠ” ì¥ì¹˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤.
- ì´ë ‡ê²Œ ì˜¤ë²„ ë§ˆìš´íŠ¸ë¥¼ ì‹¤ì‹œí•œ ê²½ìš°ì— ê¸°ì¡´ íŒŒì¼ì´ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ë¥¼ í™•ì¸í•´ë³´ì

```bash
# df
Filesystem     1K-blocks    Used Available Use% Mounted on
devtmpfs         4061940       0   4061940   0% /dev
tmpfs            4077496   12668   4064828   1% /run
tmpfs            4077496       0   4077496   0% /sys/fs/cgroup
/dev/sda1       98490636 4432388  89032100   5% /
tmpfs             815500      12    815488   1% /run/user/42
/dev/sda3         487634    2320    455618   1% /data1
/dev/sda5         487634    2320    455618   1% /data2
/dev/sda6         487634    2320    455618   1% /data3
/dev/sda7         487634    2320    455618   1% /data4
/dev/sdc1        1014680    2564    890980   1% /testdir
/dev/sda8         486610    2338    454628   1% /home
/dev/sdb1        1014680    2580    890964   1% /testmount <<<< í˜„ì¬ /dev/sdb1 ë§ˆìš´íŠ¸ë˜ì–´ ìˆëŠ”ê²ƒì„ í™•ì¸
# umount /testmount
# cd /testmount
# df .
Filesystem     1K-blocks    Used Available Use% Mounted on
/dev/sda1       98490636 4432388  89032100   5% /
# touch file1 file2
# ls
file1  file2
# touch sda1_file
# ls
file1  file2  sda1_file   << /testmount ë””ë ‰í† ë¦¬ ìì²´ì— íŒŒì¼ì„ ìƒì„±
# cd 
# mount /dev/sdb1 /testmount/  >> /dev/sdb1ì— ë‹¤ì‹œ ë§ˆìš´íŠ¸
# cd /testmount/
# ls
back  file1.txt  lost+found    << ê¸°ì¡´ì— ìƒì„±í•œ íŒŒì¼ì´ ë‚˜ì˜¤ì§€ ì•Šìœ¼ë©° /dev/sdb1 ë‚´ì˜ íŒŒì¼ì´ ì¶œë ¥ëœë‹¤.
# cd
# umount /testmount/
# cd /testmount/
# ls
file1  file2  sda1_file

ì˜¤ë²„ë§ˆìš´íŠ¸ë¥¼ í•˜ê²Œë˜ë©´ ë””ë ‰í† ë¦¬ ìì²´ì— ì €ì¥ë˜ì–´ ìˆëŠ” íŒŒì¼ë“¤ì€ ë¬´ì‹œë˜ê³  ë§ˆìš´íŠ¸ëœ ì¥ì¹˜ì˜ íŒŒì¼ë§Œ ë³´ì—¬ì§€ê²Œ ëœë‹¤.
ì´ì „ì— ì‘ì—…í•œ íŒŒì¼ë“¤ì€ ë§ˆìš´íŠ¸ í•´ì œë¥¼ í•´ì•¼ì§€ë§Œ ë³¼ìˆ˜ìˆë‹¤.
ë§ˆìš´íŠ¸ìš© ë””ë ‰í† ë¦¬ì—ëŠ” íŒŒì¼ì„ ì €ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.
```

ê¸°ì¡´ì— ìë£Œê°€ ì¡´ì¬í•˜ëŠ” ë””ë ‰í† ë¦¬ì— íŒŒì¼ ì‹œìŠ¤í…œì„ ë§ˆìš´íŠ¸ í•˜ê²Œë˜ë©´ ê¸°ì¡´ì˜ ìë£ŒëŠ” ì–´ë–»ê²Œ ë˜ëŠ”ê°€?

F/S - diskë‚´ì˜ ë…¼ë¦¬ì  êµ¬ì¡° â€”â†’ dirì— ë§í¬

DIR â†’ root filesystem ì–´ë”˜ê°€ì— ìƒì„±ë˜ëŠ” ë””ë ‰í† ë¦¬

ì´ì „ì— ì‘ì—…í•œ íŒŒì¼ë“¤ì€ ë§ˆìš´íŠ¸ ì´í›„ì— ë³´ì´ì§€ ì•ŠëŠ”ë‹¤. ( ì‚¬ë¼ì§„ ê²ƒì´ ì•„ë‹ˆë‹¤ )

# ê¸°íƒ€ ë§ˆìš´íŠ¸

---

- **CD** ë§ˆìš´íŠ¸ / ì–¸ë§ˆìš´íŠ¸

    (ìë™ë§ˆìš´íŠ¸)

    **Automount**

    ```bash
     # cd /media/<ë§ˆìš´íŠ¸ í¬ì¸í„°>
    ```

    (ìˆ˜ë™ë§ˆìš´íŠ¸)

    ```bash
    # mount â€“t iso9660 â€“o ro /dev/hdc /mnt/cdrom
    # cd /mnt/cdrom
    # cd ; umount /mnt/cdrom
    ```

- **ISO ì´ë¯¸ì§€ ë§ˆìš´íŠ¸**

    ```bash
    # mount â€“t iso9660 â€“o loop /test/a.iso /p
    # cd /p
    # umount /p
    ```

- **USB / NTFS ë§ˆìš´íŠ¸**

---

## ê¸°íƒ€ ë§ˆìš´íŠ¸ ì‹¤ìŠµ

[1] CD/DVD ë§ˆìš´íŠ¸

ì¥ì¹˜ë¥¼ ì‚¬ìš© í•  ìˆ˜ ìˆë„ë¡ ì¸ì‹ì‹œì¼œ ì£¼ëŠ” ê²ƒì´ ë§ˆìš´íŠ¸ì´ë‹¤. CD-ROMì„ ë§ˆìš´íŠ¸ í•˜ê¸° ìœ„í•´ CD-ROMì— ë¯¸ë””ì–´ë¥¼ ë¨¼ì € ë„£ëŠ”ë‹¤. ê°€ìƒë¨¸ì‹ ì—ì„œ physical deviceë¡œ ì„ íƒë˜ì–´ ìˆëŠ” ê²½ìš°ì—ëŠ” ì‹¤ì œ CD-ROMì— ë¯¸ë””ì–´ë¥¼ ë„£ìœ¼ë©´ ë˜ê³  ISO image fileë¡œ ì„ íƒ ë˜ì–´ ìˆìœ¼ë©´ iso ì´ë¯¸ì§€ë¥¼ ê°€ìƒë¨¸ì‹ ì—ì„œ ì„ íƒí•´ ì¤€ë‹¤.

â–  CD ë§ˆìš´íŠ¸ ë°©ë²•

```bash
(ìë™ìœ¼ë¡œ ë§ˆìš´íŠ¸ ë˜ëŠ” ê²½ìš°)
Automount
# cd /media/CentOS_5.4_Final ; ls 
# cd ; umount /media/CentOS_5.4_Final 

(ìˆ˜ë™ìœ¼ë¡œ ë§ˆìš´íŠ¸ í•˜ëŠ” ê²½ìš°)
# mkdir -p /mnt/cdrom ; mount -t iso9660 -o ro /dev/cdrom /mnt/cdrom 
# cd /mnt/cdrom ; ls 
# cd ; umount /mnt/cdrom
```

### [EX] CD ì§ì ‘ ë§ˆìš´íŠ¸

```bash
(ì„ ìˆ˜ì‘ì—…) CD-ROM ì•ˆì— CentOS CDë¥¼ ë„£ì—ˆë‹¤.
ê·¸ë¦¬ê³  ìë™ìœ¼ë¡œ ë§ˆìš´íŠ¸ê°€ ëœ ìƒíƒœì´ë‹¤.
VMWare > VM > Setting > CD/DVD >
ISO ì´ë¯¸ì§€ ì œì‘ìš© í”„ë¡œê·¸ë¨ 
# dnf -y install genisoimage-1.1.11-39.el8.x86_64
```

```bash
# ls -l /dev | grep cdrom
lrwxrwxrwx. 1 root root           3 Dec 21 14:46 cdrom -> sr0
crw-rw----. 1 root cdrom    21,   0 Dec 21 14:36 sg0
brw-rw----. 1 root cdrom    11,   0 Dec 21 14:46 sr0
# lsscsi
[1:0:0:0]    cd/dvd  NECVMWar VMware IDE CDR10 1.00  /dev/sr0
[2:0:0:0]    disk    VMware,  VMware Virtual S 1.0   /dev/sda
[2:0:1:0]    disk    VMware,  VMware Virtual S 1.0   /dev/sdb
# mkdir /mnt/cdrom
# mount -t iso9660 -o ro /dev/sr0 /mnt/cdrom
# cd /mnt/cdrom
# ls
EFI  images  isolinux  LICENSE  TRANS.TBL
# df
Filesystem     1K-blocks    Used Available Use% Mounted on
devtmpfs          463280       0    463280   0% /dev
tmpfs             482024       0    482024   0% /dev/shm
tmpfs             482024    6756    475268   2% /run
tmpfs             482024       0    482024   0% /sys/fs/cgroup
/dev/sda6       44471076 1818836  42652240   5% /
/dev/sda2       48803552  618280  48185272   2% /var
/dev/sda3        5232640  507656   4724984  10% /home
/dev/sda1        2086912  180036   1906876   9% /boot
tmpfs              96404       0     96404   0% /run/user/0
/dev/sr0          698568  698568         0 100% /mnt/cdrom
# umount /mnt/cdrom
# df
Filesystem     1K-blocks    Used Available Use% Mounted on
devtmpfs          463280       0    463280   0% /dev
tmpfs             482024       0    482024   0% /dev/shm
tmpfs             482024    6756    475268   2% /run
tmpfs             482024       0    482024   0% /sys/fs/cgroup
/dev/sda6       44471076 1818836  42652240   5% /
/dev/sda2       48803552  618280  48185272   2% /var
/dev/sda3        5232640  507656   4724984  10% /home
/dev/sda1        2086912  180036   1906876   9% /boot
tmpfs              96404       0     96404   0% /run/user/0
```

```bash
# ls -l /dev | grep cdrom/* hdcì˜ ë§í¬íŒŒì¼ì¸ cdrom */
lrwxrwxrwx 1 root root          3 Jan 27 05:17 cdrom -> hdc
lrwxrwxrwx 1 root root          3 Jan 27 05:17 cdrom-hdc -> hdc
# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1              17G  3.4G   12G  22% /
/dev/sda8             487M   11M  451M   3% /data1
..... (ì¤‘ëµ) .....
/dev/sdb1            1004M   18M  936M   2% /testmount
/dev/hdc              3.8G  3.8G     0 100% /media/CentOS_5.4_Final
# cd /media/CentOS_5.4_Final 
# ls
CentOS/                RELEASE-NOTES-en_US       RELEASE-NOTES-pt_BR
CentOS_BuildTag        RELEASE-NOTES-en_US.html  RELEASE-NOTES-pt_BR.html
EULA                   RELEASE-NOTES-es          RELEASE-NOTES-ro
GPL                    RELEASE-NOTES-es.html     RELEASE-NOTES-ro.html
RELEASE-NOTES-cs       RELEASE-NOTES-fr          RPM-GPG-KEY-CentOS-5
RELEASE-NOTES-cs.html  RELEASE-NOTES-fr.html     RPM-GPG-KEY-beta
RELEASE-NOTES-de       RELEASE-NOTES-ja          TRANS.TBL
RELEASE-NOTES-de.html  RELEASE-NOTES-ja.html     images/
RELEASE-NOTES-en       RELEASE-NOTES-nl          isolinux/
RELEASE-NOTES-en.html  RELEASE-NOTES-nl.html     repodata/
# cd 
# umount /media/CentOS_5.4_Final 
# df â€“h 
-> CD ì–¸ë§ˆìš´íŠ¸ í™•ì¸

# mkdir -p /mnt/cdrom 
# mount -t iso9660 -o ro /dev/cdrom /mnt/cdrom 
#

# cd /mnt/cdrom 
# ls
CentOS/                RELEASE-NOTES-en_US       RELEASE-NOTES-pt_BR
CentOS_BuildTag        RELEASE-NOTES-en_US.html  RELEASE-NOTES-pt_BR.html
EULA                   RELEASE-NOTES-es          RELEASE-NOTES-ro
GPL                    RELEASE-NOTES-es.html     RELEASE-NOTES-ro.html
RELEASE-NOTES-cs       RELEASE-NOTES-fr          RPM-GPG-KEY-CentOS-5
RELEASE-NOTES-cs.html  RELEASE-NOTES-fr.html     RPM-GPG-KEY-beta
RELEASE-NOTES-de       RELEASE-NOTES-ja          TRANS.TBL
RELEASE-NOTES-de.html  RELEASE-NOTES-ja.html     images/
RELEASE-NOTES-en       RELEASE-NOTES-nl          isolinux/
RELEASE-NOTES-en.html  RELEASE-NOTES-nl.html     repodata/
# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1              17G  3.4G   12G  22% /
/dev/sda8             487M   11M  451M   3% /data1
/dev/sda7             487M   11M  451M   3% /data2
/dev/sda6             487M   11M  451M   3% /data3
/dev/sda5             487M   11M  451M   3% /data4
/dev/sda3             487M   11M  451M   3% /home
tmpfs                 506M     0  506M   0% /dev/shm
/dev/sdb1            1004M   18M  936M   2% /testmount
/dev/hdc              3.8G  3.8G     0 100% /mnt/cdrom
# cd 
# umount /mnt/cdrom 
# df â€“h 
-> umount í™•ì¸
```

[2] ISO íŒŒì¼ ë§ˆìš´íŠ¸

```bash
ê°€ìƒ CD í”„ë¡œê·¸ë¨
- Daemon Lite
- Virtual CD
- CD Space
```

```bash
# dnf -y install genisoimage

# cd /test ; rm -rf /test/* 

# genisoimage -o /test/a.iso /var
# genisoimage -o /test/b.iso /var/log
# mount -t iso9660 -o ro /test/b.iso /mnt/cdrom
[root@server1 test]# df
Filesystem     1K-blocks    Used Available Use% Mounted on
devtmpfs          463280       0    463280   0% /dev
tmpfs             482024       0    482024   0% /dev/shm
tmpfs             482024    6760    475264   2% /run
tmpfs             482024       0    482024   0% /sys/fs/cgroup
/dev/sda6       44471076 2035456  42435620   5% /
/dev/sda2       48803552  618304  48185248   2% /var
/dev/sda3        5232640  507656   4724984  10% /home
/dev/sda1        2086912  180036   1906876   9% /boot
tmpfs              96404       0     96404   0% /run/user/0
/dev/loop0          7982    7982         0 100% /mnt/cdrom
# umount /mnt/cdrom

# mkisofs -o /test/a.iso /etc/sysconfig/* 
# file /test/a.iso
/test/a.iso: ISO 9660 CD-ROM filesystem data 'CDROM
# mkdir -p /mnt/iso 
# mount -t iso9660 -o loop /test/a.iso /mnt/iso 
loop ì˜µì…˜ -> ì´ë¯¸ì§€ë¥¼ í•˜ë‚˜ì˜ ì¥ì¹˜ì²˜ëŸ¼ ì‚¬ìš©í•˜ê¸° ìœ„í•˜ì—¬ ì‚¬ìš©ë˜ëŠ” ì˜µì…˜
# df â€“h /mnt/iso
Filesystem    Type    Size  Used Avail Use% Mounted on
/test/a.iso
           iso9660    714K  714K     0 100% /mnt/iso
# cd /mnt/iso ; ls 
-> ì¶œë ¥ ë‚´ìš© ìƒëµ

# cd ; umount /mnt/iso 
# df â€“h 
-> umount í™•ì¸
```

[(3) íŒŒì¼ ì‹œìŠ¤í…œì´ FATì¸ ê²½ìš° ë§ˆìš´íŠ¸ ì‹¤ìŠµ (windows íŒŒì¼ì‹œìŠ¤í…œ íƒ€ì…ì¸ ê²½ìš° - USB FAT32ë°©ì‹)

íŒŒì¼ ì‹œìŠ¤í…œì´ FATì¼ ë•Œ -t ì˜µì…˜ì— vfatë¥¼ ì£¼ê³  ë§ˆìš´íŠ¸ í•œë‹¤.(ìƒëµë„ ê°€ëŠ¥)

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# mount -t vfat /dev/sdb1 /mnt/usb
```

### [EX] USB ë§ˆìš´íŠ¸

```bash
(ì „ì œì¡°ê±´) USBëŠ” FAT32 íŒŒì¼ì‹œìŠ¤í…œìœ¼ë¡œ ë˜ì–´ ìˆë‹¤.
  USBê°€ ì¥ì°© ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. USBê°€ ì¥ì°©ë˜ë©´ ìë™ìœ¼ë¡œ ë§ˆìš´íŠ¸ ëœë‹¤.
  ë§Œì•½ NTFS ë˜ì–´ ìˆë‹¤ë©´, NTFS ì»¤ë„ ëª¨ë“ˆì„ ë³„ë„ë¡œ ì„¤ì¹˜í•´ì•¼ í•œë‹¤.
```

```bash
# df -k
Filesystem       1K-blocks    Used Available Use% Mounted on
/dev/sda1    18284608   5599628  10797348  35% /
tmpfs          257668         0    257668   0% /dev/shm
/dev/sdb1      1020944    700032    320912  69% /media/disk
# umount /media/disk 
# df -k
Filesystem    1K-blocks      Used Available Use% Mounted on
/dev/sda1     18284608   5599620  10797356  35% /
tmpfs        257668         0    257668   0% /dev/shm
# mkdir -p /mnt/usb 
# mount -t vfat /dev/sdb1 /mnt/usb 
# df -k
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/sda1             18284608   5599620  10797356  35% /
tmpfs                   257668         0    257668   0% /dev/shm
/dev/sdb1              1020944    700032    320912  69% /mnt/usb
# ls -l /mnt/usb
...
-rwxr-xr-x 1 root root   14848 Dec 24 16:29 Linuxêµì•ˆ.hwp
-rwxr-xr-x 1 root root 1110793 Oct 17 00:06 file_down.pdf
```

[4] NTFSì¸ ê²½ìš° ë§ˆìš´íŠ¸ ì‹¤ìŠµ (windows 2000/NT/2003/XP)

íŒŒì¼ ì‹œìŠ¤í…œì„ NTFSë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” íŒŒí‹°ì…˜ì¸ ê²½ìš°ì—ëŠ” -t ì˜µì…˜ì— ntfsë¥¼ ì£¼ê³  ë§ˆìš´íŠ¸ í•œë‹¤. ë§ˆìš´íŠ¸í•˜ê¸° ìœ„í•´ì„œëŠ” ì»¤ë„ì´ NTFSë¥¼ ì§€ì›í•´ì•¼ í•œë‹¤. ìš´ì˜ì²´ì œì— ë”°ë¼ NTFSëª¨ë“ˆì´ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šì€ ê²½ìš°ì—” ì‚¬ìš©ì„ ìœ„í•´ ëª¨ë“ˆì„ ì„¤ì¹˜í•´ì•¼ í•œë‹¤.

ìœˆë„ìš°ì—ì„œ ì‚¬ìš©í•˜ëŠ”

**[ëª…ë ¹ì–´ í˜•ì‹]**

```bash
# mount -t ntfs [device] [ë§ˆìš´íŠ¸í¬ì¸í„°]
```

### [EX] NTFS í¬ë§· USB ë§ˆìš´íŠ¸

```bash
# mount -t ntfs /dev/hda2 /mnt/ntfs   /* ë˜ëŠ” # mount -t ntfs -o iocharset=cp949 /dev/hda2 /mnt/ntfs */
# ls -l /mnt/ntfs | more
```

[5] RAM DISK ì‚¬ìš©í•˜ê¸° < ì˜ˆì „ì— ì”€

- RAM DISKëŠ” MEMì˜ ì¼ë¶€ë¥¼ ë””ìŠ¤í¬ ì²˜ëŸ¼ ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.
- ë”°ë¼ì„œ, **(ì£¼ì˜)** ì¬ë¶€íŒ…(reboot) ë˜ë©´ RAM DISK ì•ˆì˜ ë‚´ìš©ì€ ëª¨ë‘ ì§€ì›Œì§„ë‹¤.
- MEM ê³µê°„ì´ í¬ê³  MEM ì‚¬ìš©ëŸ‰ì´ ì ì€ ê²½ìš° ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” MEM ê³µê°„ì„ í™œìš©í•˜ì—¬ /test(í…ŒìŠ¤íŠ¸ìš© ê³µê°„)ì„ ì‚¬ìš©í•˜ë©´ ì„ì‹œ ì‘ì—…ë“¤ì— ëŒ€í•œ ì„±ëŠ¥ì„ ë†’ì¼ìˆ˜ ìˆë‹¤.

```bash
# top -n 1 | grep Mem: 
# free 

# mkdir â€“p /mnt/ramdisk 
# mount -t tmpfs none /mnt/ramdisk â€“o size=10m 

# df â€“h 
# cd /mnt/ramdisk 

# time tar cvzf /test/home.tar.gz /home           (0m0.221s:0m0.133s:  )
# time tar cvzf /mnt/ramdisk/home.tar.gz /home    (0m0.022s:0m0.005s:  )

# cd 
# umount /mnt/ramdisk
```

# LVM

# ë‹¨ì›ëª©í‘œ

---

- LVMì´ë€ ë¬´ì—‡ì¸ê°€
- LVM êµ¬ì„± ìš”ì†Œ
- LVM ì‘ë™ ë°©ë²•
- LVM êµ¬ì„± ì‹¤ìŠµ
- LVM ê´€ë¦¬

---

### í‘œì¤€ ë””ìŠ¤í¬

íŒŒì¼ ì‹œìŠ¤í…œ ìƒì„± > ìš©ëŸ‰ì´ full

ê¸°ì¡´ì˜ ë°ì´í„°ë¥¼ ë°±ì—…

ìƒˆë¡œìš´ ë””ìŠ¤í¬ ì¥ì°©

ìƒˆë¡œìš´ ë””ìŠ¤í¬ ë³µêµ¬

### ê°€ìƒ ë””ìŠ¤í¬

ì„±ëŠ¥ìƒì˜ ë¬¸ì œ

ë””ìŠ¤í¬ì˜ í™•ì¥ì„±

íŒŒì¼ ì‹œìŠ¤í…œ ìƒì„± > ìš©ëŸ‰ì´ full

ë””ìŠ¤í¬ ì¥ì°©

ê¸°ì¡´ ë””ìŠ¤í¬ì— í™•ì¥

ì ìš©

ë

ë¬´ì¤‘ë‹¨ ìƒíƒœì—ì„œ ë””ìŠ¤í¬ ì‘ì—…ì´ ê°€ëŠ¥

## LVM(Logical Volume Manage)ì´ë€?

(Virtual Volume Technology) **- LVM(Logical Volume Manager), RAID(Redudant Array Inexpensive Disk)**

**ê°€ìƒ ë³¼ë¥¨ ë°©ì‹ ì¥ì : (ã„±) í™•ì¥ì„±, (ã„´) ì•ˆì •ì„±, (ã„·) í¸ì˜ì„±(ê´€ë¦¬ ìš©ì´)**

**(ê¶Œì¥)** OS(Operating System) - LVM ê¸°ìˆ  ì‚¬ìš© ê¶Œì¥

DATA ê³µê°„ - Storage(Hardware RAID)

ë¬¼ë¦¬ì ì¸ ë””ìŠ¤í¬ë¥¼ ë…¼ë¦¬ì  ë³¼ë¥¨ê·¸ë£¹ìœ¼ë¡œ êµ¬ì„±í•´ì„œÂ ì´ ë…¼ë¦¬ì ì¸ ë³¼ë¥¨ê·¸ë£¹ ë‚´ì— ì‚¬ìš©ìê°€ ì›í•˜ëŠ”Â í¬ê¸° ë§Œí¼ì˜Â ë…¼ë¦¬ë³¼ë¥¨ì„ í• ë‹¹í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ, 

ì—¬ëŸ¬ ê°œì˜ ë””ìŠ¤í¬ë¥¼ í•˜ë‚˜ì˜ ë…¼ë¦¬ì ì¸ ë³¼ë¥¨ê·¸ë£¹(VG)ìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆìœ¼ë©°, 

ê° ë…¼ë¦¬ë³¼ë¥¨(LV)ëŠ” ë…ë¦½ì ì´ë¯€ë¡œ, í•˜ë‚˜ì˜ ë””ìŠ¤í¬ì—ë„ ì—¬ëŸ¬ ê°€ì§€ì˜ íŒŒì¼ ì‹œìŠ¤í…œì„ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤. 

ë˜í•œÂ ë””ìŠ¤í¬ì˜ ìš©ëŸ‰ì¦ì„¤ì´ ìš”êµ¬ ë  ê²½ìš°ì—ë„ ë³¼ë¥¨ê·¸ë£¹ì— ë¬¼ë¦¬ë³¼ë¥¨(PV)ë§Œ ì¶”ê°€í•˜ì—¬ ìš©ëŸ‰ì¦ì„¤ì´ ê°€ëŠ¥í•˜ê³ ,Â 
ë°ì´í„°ëŸ‰ì´ ê°ì†Œí•˜ì—¬Â ë” ì´ìƒ ë§ì€ ì–‘ì˜ ì €ì¥ê³µê°„ì´ í•„ìš” ì—†ëŠ” ê²½ìš°, ë³¼ë¥¨ê·¸ë£¹ì— ì†í•œ ë¬¼ë¦¬ë³¼ë¥¨ ê°œìˆ˜ë¥¼ ì¶•ì†Œí•˜ì—¬ ìš©ëŸ‰ ê°ì†Œê°€ ê°€ëŠ¥í•˜ë‹¤.

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0723558e-f892-40c9-8a3a-e8c5f50b6b35/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0723558e-f892-40c9-8a3a-e8c5f50b6b35/Untitled.png)

ì¶œì²˜: [https://idchowto.com/?p=34901](https://idchowto.com/?p=34901)

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c71564c4-d542-423d-af25-d112f5fc17b2/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c71564c4-d542-423d-af25-d112f5fc17b2/Untitled.png)

ì„¤ëª… ì¶”ê°€

## LVM êµ¬ì„±ìš”ì†Œ

LVMì€ PV(Physical Volume), VG(Volume Group), LV(Logical Volume)ìœ¼ë¡œ êµ¬ì„±ëœë‹¤

```bash
LVMì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê¸°ì´ˆ ë‹¨ê³„

êµ¬ì„±ìš”ì†Œ                      ì„¤ëª…
Physical Volume             PVëŠ” í•˜ë‚˜ì˜ ë¬¼ë¦¬ì ì¸ Diskì— LVMì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ LVM ë°ì´í„° êµ¬ì¡°ë¥¼ ìƒì„±í•œ ê²ƒì„ ë§í•œë‹¤.Â 
                            ë””ìŠ¤í¬ì— PVê°€ ìƒì„±ë˜ë©´ LVMì€ ë””ìŠ¤í¬ë¥¼ í•˜ë‚˜ì˜ ë¬¼ë¦¬ë³¼ë¥¨ìœ¼ë¡œ ê°„ì£¼í•˜ê²Œ ë˜ê³ , ë³¼ë¥¨ê·¸ë£¹ì— í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆê²Œ ëœë‹¤.
                            ë”°ë¼ì„œ í•˜ë‚˜ì˜ ë””ìŠ¤í¬ë¥¼ ëª‡ ê°œì˜ ì„¹ì…˜ì€ ë…¼ë¦¬ë³¼ë¥¨ìœ¼ë¡œ, ëª‡ ê°œì˜ ì„¹ì…˜ì€ ì „ì²´ë””ìŠ¤í¬ë¡œ ê´€ë¦¬í•˜ëŠ” ë“±ì˜ ë°©ë²•ì€ ì ìš© í•  ìˆ˜ ì—†ë‹¤.
												    (ì˜ˆ) ë¬¼ë¦¬ì ì¸ ë””ìŠ¤í¬(EX:/dev/sda) or ë¬¼ë¦¬ì ì¸ íŒŒí‹°ì…˜(EX:/dev/sda1)

Volume Group                VGëŠ” í•˜ë‚˜ ë˜ëŠ” ê·¸ ì´ìƒì˜ PVë¥¼ í¬í•¨í•˜ë©°, LVë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” Volume Groupì˜ ì§‘í•©ì´ë‹¤.Â 
													  vg00ì€ ë¶€íŒ…ì •ë³´ì™€ OSê°€ ìˆëŠ” root Volume Groupìœ¼ë¡œ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
														ê´€ë¦¬ìê°€ ê´€ë¦¬ìƒì˜ í¸ì˜ë¥¼ ìœ„í•´ DBì˜ ê²½ìš°ì—ëŠ” vgdb##, ì¼ë°˜ì ì¸ íŒŒì¼ì‹œìŠ¤í…œì˜ ê²½ìš°ì—ëŠ”vgfil##ë“±ìœ¼ë¡œ VGì´ë¦„ì„ ì§€ì •í•˜ì—¬ ì‚¬ìš©í•œë‹¤.
														(ì˜ˆ) ê°€ìƒ ë””ìŠ¤í¬

Logical Volume              LVëŠ” í•˜ë‚˜ ë˜ëŠ” ê·¸ ì´ìƒì˜ PVë¡œ êµ¬ì„±ë˜ì–´ ìˆëŠ” VG ê³µê°„ì„ ì „ì²´ ë˜ëŠ” ë¶„í• í•˜ì—¬ ì¼ë°˜ íŒŒì¼ì‹œìŠ¤í…œ, swap or dump area,
														raw diskë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë…¼ë¦¬ì ìœ¼ë¡œ í• ë‹¹í•œê³µê°„ì´ë‹¤.Â 
														ìš´ì˜ ì¤‘ ê³µê°„ì´ ë¶€ì¡±í•  ê²½ìš° ë³¼ë¥¨ê·¸ë£¹ì— ì†í•´ ìˆëŠ” ë˜ ë‹¤ë¥¸ ë¬¼ë¦¬ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ì—¬ í™•ì¥ì´ ê°€ëŠ¥í•˜ê³ , í•„ìš”í•˜ë‹¤ë©´ í¬ê¸°ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ë‹¤ë¥¸ ë””ìŠ¤í¬ë¡œ ë°ì´í„°ë¥¼ ì˜®ê¸¸ ìˆ˜ ìˆë‹¤. 
														Volume Group vg00ì— ì†í•œ Logical Volume lvol1,lvol2,lvol3ì€ ê°ê° /stand, primary swap, / ë””ë ‰í† ë¦¬ë¡œ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥ í•˜ë‹¤.
														(ì˜ˆ) ê°€ìƒ íŒŒí‹°ì…˜
```

## LVM ì‘ë™ë°©ì‹

â–  **PE (Physical Extent)** : PVê°€ ê°–ëŠ” ì¼ì •í•œ ë¸”ë¡

ë””ìŠ¤í¬ì— PVë¥¼ ìƒì„±í•˜ê²Œ ë˜ë©´, LVMì€ ì£¼ì†Œë¥¼ ì§€ì •í•  ìˆ˜ ìˆëŠ” PE(Physical Extent)ë¼ëŠ” ë‹¨ìœ„ë¡œ ê° ë¬¼ë¦¬ ë””ìŠ¤í¬ë¥¼ ë‚˜ëˆˆë‹¤.Â extentëŠ” ì£¼ì†Œ 0ë²ˆë¶€í„° ì‹œì‘í•˜ì—¬Â 1ì”©Â ì¦ë¶„í•˜ë©° ìˆœì°¨ì ìœ¼ë¡œÂ ë””ìŠ¤í¬ì— í• ë‹¹ë˜ê³ ,Â PEì˜ í¬ê¸°ëŠ” ë³¼ë¥¨ ê·¸ë£¹ì„ ë§Œë“¤ ë•Œ êµ¬ì„±í•  ìˆ˜Â ìˆë‹¤. ê·¸ë¦¬ê³ Â ê° PEì˜ í¬ê¸°ëŠ”Â default ê°’ì´Â 4MBì´ë©°, ì´ ê°’ì€ í•„ìš”ì— ë”°ë¼ ë³¼ë¥¨ ê·¸ë£¹ì„Â ìƒì„± ì‹œ 1MBì—ì„œ 256MB ì‚¬ì´ì˜ ê°’ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

VGë¥¼ ìƒì„±í•˜ê²Œ ë˜ë©´ PEë¼ëŠ” ê·œê²©ìœ¼ë¡œ ê°ê° ë¸”ë¡ì„ ë¶„í•  ì‹œí‚´

â–  **LE (Logical Extent)** : LVê°€ ê°–ëŠ” ì¼ì •í•œ ë¸”ë¡

ë””ìŠ¤í¬ì— PVë¥¼ ìƒì„±í•˜ê³ , ìƒì„±ëœ PVë¥¼ ì´ìš©í•˜ì—¬ VG(Volume Group)ì„ êµ¬ì„±í•œ í›„ ì´ VGì— LV(Logical Volume)ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. LVì˜ ê¸°ë³¸ í• ë‹¹ ë‹¨ìœ„ë¥¼Â LE(Logical Extent)ë¼ê³  í•˜ëŠ”ë°, ì´ LEëŠ”Â VG ìƒì„± ì‹œ ë‚˜ëˆ„ì–´ì§„ PEÂ ì˜ì—­ê³¼ Mappingëœë‹¤. ë”°ë¼ì„œÂ PEì˜ í¬ê¸°ê°€Â 4MBì´ë©´ LEì˜ í¬ê¸°ë„Â 4MBê°€Â ëœë‹¤. ê·¸ë¦¬ê³ Â LVì˜ í¬ê¸°ëŠ” êµ¬ì„±ëœÂ LEì˜ ê°œìˆ˜ ë˜ëŠ” í• ë‹¹í•  ë””ìŠ¤í¬ ìš©ëŸ‰ì— ì˜í•´ ê²°ì •ëœë‹¤.

LVë¥¼ ìƒì„±í•˜ê²Œ ë˜ë©´ LEë¼ëŠ” ê·œê²©ìœ¼ë¡œ ê°ê° ë¸”ë¡ì„ ë§¤í•‘ì‹œí‚´

â–  LVMê³¼ Data Access

ì•ì„œ ë§í•œ ë°”ì™€ ê°™ì´ LVMì´Â ë…¼ë¦¬ë³¼ë¥¨ì— ë””ìŠ¤í¬ ê³µê°„ì„ í• ë‹¹í•  ë•ŒÂ LVMì€ ì£¼ì†Œ 0ì—ì„œ ì‹œì‘í•˜ì—¬Â ê° ë””ìŠ¤í¬ì— ìˆœì°¨ì ìœ¼ë¡œ í• ë‹¹ëœ PEì™€Â í• ë‹¹ëœ LEì˜Â Mapping Tableì„ ë§Œë“ ë‹¤. ë”°ë¼ì„œ LVMì€ ê·¸ë¦¼ 9.3ê³¼ ê°™ì´ ì‹¤ì œÂ ë°ì´í„°ê°€ ë¬¼ë¦¬ ë³¼ë¥¨ì— ìƒì£¼í•˜ëŠ” ìœ„ì¹˜ì™€ ìƒê´€ì—†ì´Â ë…¼ë¦¬Â ë³¼ë¥¨ì„ Access í•¨ìœ¼ë¡œì¨ ë°ì´í„°ì— ì•¡ì„¸ìŠ¤ í•œë‹¤.

â–  LVMê³¼ root íŒŒí‹°ì…˜

ë…¼ë¦¬ ë³¼ë¥¨ì´ ë£¨íŠ¸, ë¶€íŒ…, ê¸°ë³¸ ìŠ¤ì™‘ ë˜ëŠ” ë¤í”„ì— ì‚¬ìš©ë  ê²½ìš°ì—ëŠ”Â PEì˜ì—­ì€ ì—°ì†ì ì´ì–´ì•¼ í•œë‹¤. ì¦‰, ë‹¨ì¼ ë¬¼ë¦¬ ë³¼ë¥¨ì— ê³µë°± ì—†ì´ PEë¥¼ í• ë‹¹í•´ì•¼í•œë‹¤. ê·¸ëŸ¬ë‚˜ ë£¨íŠ¸ê°€ ì•„ë‹Œ ë””ìŠ¤í¬ì˜ ë…¼ë¦¬ ë³¼ë¥¨ì˜Â LEì— ëŒ€ì‘ë˜ëŠ” PEëŠ” ë¬¼ë¦¬ ë³¼ë¥¨ì—ì„œ ì—°ì†ì ì´ì§€ ì•Šê±°ë‚˜ ì „í˜€ ë‹¤ë¥¸ ë””ìŠ¤í¬ì— ìƒì£¼í•  ìˆ˜ ìˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ í•œ ë…¼ë¦¬ ë³¼ë¥¨ì—Â ì†í•œ íŒŒì¼ ì‹œìŠ¤í…œì´ ë‘˜ ì´ìƒì˜ ë””ìŠ¤í¬ì— ìƒì£¼í•  ìˆ˜ ìˆë‹¤.

â–  Mirroring

ë¯¸ëŸ¬ë§ë˜ê±°ë‚˜ ìŠ¤íŠ¸ë¼ì´í”„ëœ ë…¼ë¦¬ ë³¼ë¥¨ì„ ì œì™¸í•˜ê³  ê°Â LEëŠ”Â í•˜ë‚˜ì˜Â PEì— ë§¤í•‘ëœë‹¤. ê·¸ëŸ¬ë‚˜ ë¯¸ëŸ¬ë§ëœ ë…¼ë¦¬ ë³¼ë¥¨ì˜ ê²½ìš°, ë‹¨ì¼ ë˜ëŠ” ì´ì¤‘ ë¯¸ëŸ¬ë§ì„ ì‚¬ìš©í•˜ëŠ”ì§€ì— ë”°ë¼ ê°Â LEëŠ” ë‘ ê°œ ë˜ëŠ” ì„¸ ê°œì˜Â PEì™€ ë§¤í•‘ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë¯¸ëŸ¬ ì‚¬ë³¸ì´ í•˜ë‚˜ì¸ ê²½ìš°ì—ëŠ” ê°Â LEê°€ ë‘ ê°œì˜Â PEì— ë§¤í•‘ë˜ëŠ”ë°Â í•˜ë‚˜ì˜ í™•ì¥ ì˜ì—­ì€ ì›ë³¸ì— ëŒ€í•œ ê²ƒì´ê³  ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ë¯¸ëŸ¬ ì‚¬ë³¸ì— ëŒ€í•œ ê²ƒì´ë‹¤.

[ì°¸ê³ ] LVMì˜ PEì™€ LEì˜ Mapping (ì±… 79í˜ì´ì§€ ì°¸ì¡°)

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7679b487-0246-44f0-a8bb-4f4dc92d0510/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7679b487-0246-44f0-a8bb-4f4dc92d0510/Untitled.png)

ì¶œì²˜:[https://docstore.mik.ua/manuals/hp-ux/en/5992-4589/ch01s03.html](https://docstore.mik.ua/manuals/hp-ux/en/5992-4589/ch01s03.html)

## LVM(Logical Volume Manager) êµ¬ì„±ì‹¤ìŠµ

â–  LVM 1 / LVM 2

- LVM 1 - RHEL 3(Redhat Enterprise Linux 3)/CentOS 3.X
- LVM 2 - RHEL 4(Redhat Enterprise Linux 4)/CentOS 4.X

```bash
# dnf -y install lvm2
```

â–  LVM ìµœëŒ€ í¬ê¸° ì§€ì›(64-bits CPU) - 8 Exa Bytes ê¹Œì§€ ì§€ì›(GB -> TB -> PB -> **EB** -> ZB -> YB)

â–  LVM ì‘ì—… ìˆœì„œ

- System Partition ID ë³€ê²½(fdisk CMD)
-> PV ìƒì„±(pvcreate CMD)
-> VG ìƒì„±(vgcreate CMD)
-> LV ìƒì„±(lvcreate CMD)
-> F/S ìƒì„±(mkfs CMD)
-> ë§ˆìš´íŠ¸(mount CMD, /etc/fstab)

### [EX1] 4ì¥ì˜ ë””ìŠ¤í¬ ì¶”ê°€ í›„ íŒŒí‹°ì…˜ ì„¤ì •

```bash
------ VMWare í™˜ê²½ -----
(ã„±) ì„œë²„ ì „ì› OFF
     # poweroff 
(ã„´) 4ì¥ì˜ ë””ìŠ¤í¬ ì¶”ê°€(ìš©ëŸ‰: 1G)
              VMWare > VM > Setting > Add > Hard Disk 
                     > Create a new virtual disk > SCSI > 1G > .... > FINISH
     4ì¥ì˜ ë””ìŠ¤í¬ ì¶”ê°€(/dev/sdc, /dev/sdd, /dev/sde, /dev/sdf)
(ã„·) ì„œë²„ ì „ì› ON
     -> ì‹œìŠ¤í…œì´ ë¶€íŒ…ë˜ê³  ë¡œê·¸ì¸ í›„ í™•ì¸
              -> # ls â€“l /dev/sd?
```

```bash
â‘  ë””ìŠ¤í¬ í™•ì¸
# ls â€“l /dev/sd?
brw-r----- 1 root disk 8,  0 Apr 24 17:41 /dev/sda  /* OS ë””ìŠ¤í¬ */
brw-r----- 1 root disk 8, 16 Apr 24 17:41 /dev/sdb  /* /testmount ë””ìŠ¤í¬ */
brw-r----- 1 root disk 8, 32 Apr 24 17:41 /dev/sdc  /* ìƒˆë¡œ ì¥ì°©ëœ ë””ìŠ¤í¬ */
brw-r----- 1 root disk 8, 48 Apr 24 17:41 /dev/sdd  /* ìƒˆë¡œ ì¥ì°©ëœ ë””ìŠ¤í¬ */
brw-r----- 1 root disk 8, 64 Apr 24 17:41 /dev/sde  /* ìƒˆë¡œ ì¥ì°©ëœ ë””ìŠ¤í¬ */
brw-r----- 1 root disk 8, 80 Apr 24 17:41 /dev/sdf  /* ìƒˆë¡œ ì¥ì°©ëœ ë””ìŠ¤í¬ */
â‘¡ ë””ìŠ¤í¬ íŒŒí‹°ì…˜ ì„¤ì •(EX: /dev/sdc1, System Partition ID: 8e)
í•œì¥ì˜ ë””ìŠ¤í¬ë¥¼ í•˜ë‚˜ì˜ íŒŒí‹°ì…˜(EX: /dev/sdc1)ìœ¼ë¡œ ì„¤ì • í•œë‹¤.
LVM ì„¤ì •ì„ ìœ„í•´ ì‹œìŠ¤í…œ ì•„ì´ë””(System Partition ID)ë¥¼ 8eë¡œ ì„¤ì •í•œë‹¤.

# fdisk /dev/sdc
Command (m for help): m
Command action
   a   toggle a bootable flag
   b   edit bsd disklabel
   c   toggle the dos compatibility flag
   d   delete a partition
   l   list known partition types
   m   print this menu
   n   add a new partition
   o   create a new empty DOS partition table
   p   print the partition table
   q   quit without saving changes
   s   create a new empty Sun disklabel
   t   change a partition is system id
   u   change display/entry units
   v   verify the partition table
   w   write table to disk and exit
   x   extra functionality (experts only)

Command (m for help): p

Disk /dev/sdc: 1073 MB, 1073741824 bytes
255 heads, 63 sectors/track, 130 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System

Command (m for help): n
Command action
   e   extended
   p   primary partition (1-4)
p
Partition number (1-4): 1
First cylinder (1-130, default 1): <ENTER>
Using default value 1
Last cylinder or +size or +sizeM or +sizeK (1-130, default 130): <ENTER>
Using default value 130

Command (m for help): p

Disk /dev/sdc: 1073 MB, 1073741824 bytes
255 heads, 63 sectors/track, 130 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sdc1               1         130     1044193+  83  Linux

Command (m for help): t
Selected partition 1
Hex code (type L to list codes): L

 0  Empty           1e  Hidden W95 FAT1 80  Old Minix       bf  Solaris        
 1  FAT12           24  NEC DOS         81  Minix / old Lin c1  DRDOS/sec (FAT-
 2  XENIX root      39  Plan 9          82  Linux swap / So c4  DRDOS/sec (FAT-
 3  XENIX usr       3c  PartitionMagic  83  Linux           c6  DRDOS/sec (FAT-
 4  FAT16 <32M      40  Venix 80286     84  OS/2 hidden C:  c7  Syrinx         
 5  Extended        41  PPC PReP Boot   85  Linux extended  da  Non-FS data    
 6  FAT16           42  SFS             86  NTFS volume set db  CP/M / CTOS / .
 7  HPFS/NTFS       4d  QNX4.x          87  NTFS volume set de  Dell Utility   
 8  AIX             4e  QNX4.x 2nd part 88  Linux plaintext df  BootIt         
 9  AIX bootable    4f  QNX4.x 3rd part 8e  Linux LVM       e1  DOS access     
 a  OS/2 Boot Manag 50  OnTrack DM      93  Amoeba          e3  DOS R/O        
 b  W95 FAT32       51  OnTrack DM6 Aux 94  Amoeba BBT      e4  SpeedStor      
 c  W95 FAT32 (LBA) 52  CP/M            9f  BSD/OS          eb  BeOS fs        
 e  W95 FAT16 (LBA) 53  OnTrack DM6 Aux a0  IBM Thinkpad hi ee  EFI GPT        
 f  W95 Ext'd (LBA) 54  OnTrackDM6      a5  FreeBSD         ef  EFI (FAT-12/16/
10  OPUS            55  EZ-Drive        a6  OpenBSD         f0  Linux/PA-RISC b
11  Hidden FAT12    56  Golden Bow      a7  NeXTSTEP        f1  SpeedStor      
12  Compaq diagnost 5c  Priam Edisk     a8  Darwin UFS      f4  SpeedStor      
14  Hidden FAT16 <3 61  SpeedStor       a9  NetBSD          f2  DOS secondary  
16  Hidden FAT16    63  GNU HURD or Sys ab  Darwin boot     fb  VMware VMFS    
17  Hidden HPFS/NTF 64  Novell Netware  b7  BSDI fs         fc  VMware VMKCORE 
18  AST SmartSleep  65  Novell Netware  b8  BSDI swap       fd  Linux raid auto
1b  Hidden W95 FAT3 70  DiskSecure Mult bb  Boot Wizard hid fe  LANstep        
1c  Hidden W95 FAT3 75  PC/IX           be  Solaris boot    ff  BBT            
Hex code (type L to list codes): 8e
Changed system type of partition 1 to 8e (Linux LVM)

Command (m for help): p

Disk /dev/sdc: 1073 MB, 1073741824 bytes
255 heads, 63 sectors/track, 130 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sdc1               1         130     1044193+  8e  Linux LVM

Command (m for help): w
The partition table has been altered!

Calling ioctl() to re-read partition table.
Syncing disks

# fdisk /dev/sdd 
-> diskë¥¼ í•˜ë‚˜ì˜ ì£¼ íŒŒí‹°ì…˜ìœ¼ë¡œ ìƒì„±(/dev/sdd1, System ID : 8e)
#sfdisk -d /dev/sdc | sfdisk /dev/sdd

# fdisk /dev/sde 
-> diskë¥¼ í•˜ë‚˜ì˜ ì£¼ íŒŒí‹°ì…˜ìœ¼ë¡œ ìƒì„±(/dev/sde1, System ID : 8e)
# sfdisk -d /dev/sdc | sfdisk /dev/sde

# fdisk /dev/sdf 
-> diskë¥¼ í•˜ë‚˜ì˜ ì£¼ íŒŒí‹°ì…˜ìœ¼ë¡œ ìƒì„±(/dev/sdf1, System ID : 8e)
# sfdisk -d /dev/sdc | sfdisk /dev/sdf

# fdisk -l /dev/sd[cdef]      (# fdisk -l | grep LVM)
Disk /dev/sdc: 1073 MB, 1073741824 bytes
255 heads, 63 sectors/track, 130 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sdc1               1         130     1044193+  8e  Linux LVM

Disk /dev/sdd: 1073 MB, 1073741824 bytes
255 heads, 63 sectors/track, 130 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sdd1               1         130     1044193+  8e  Linux LVM

Disk /dev/sde: 1073 MB, 1073741824 bytes
255 heads, 63 sectors/track, 130 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sde1               1         130     1044193+  8e  Linux LVM

Disk /dev/sdf: 1073 MB, 1073741824 bytes
255 heads, 63 sectors/track, 130 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sdf1               1         130     1044193+  8e  Linux LVM

# fdisk -l | grep LVM
/dev/sde1        2048 2097151 2095104 1023M 8e Linux LVM
/dev/sdd1        2048 2097151 2095104 1023M 8e Linux LVM
/dev/sdc1        2048 2097151 2095104 1023M 8e Linux LVM
/dev/sdf1        2048 2097151 2095104 1023M 8e Linux LVM
```

```bash
ìœ„ì˜ ì‘ì—…ì„ ëª¨ë‘ í•œ ë’¤..
# partprobe       < ë””ìŠ¤í¬ íŒŒí‹°ì…˜ ì •ë³´ë¥¼ ê°±ì‹ í•´ì¤€ë‹¤. , lv êµ¬ì„± ì´í›„
# udevadm settle  < ìƒˆë¡œìš´ ì¥ì¹˜ì— ëŒ€í•œ ì´ë¦„ êµ¬ì„± , fdisk ì‘ì—… ì´í›„
```

â–  LVM ì‘ì—… ìˆœì„œ

System Partition ID ë³€ê²½(fdisk CMD)

-> PV ìƒì„±(pvcreate CMD)Â 

-> VG ìƒì„±(vgcreate CMD)

-> LV ìƒì„±(lvcreate CMD)

-> F/S ìƒì„±(mkfs CMD)

-> ë§ˆìš´íŠ¸(mount CMD, /etc/fstab)

[1] ë¬¼ë¦¬ì ì¸ ë³¼ë¥¨ ìƒì„±(PV: Physical Volume)

ìƒì„±í•œ ë””ìŠ¤í¬ë¥¼ LVMìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì„ ì²˜ë¦¬ ì‘ì—…ìœ¼ë¡œ ë¬¼ë¦¬ì ì¸ ë³¼ë¥¨ìœ¼ë¡œ ìƒì„±í•´ ì¤€ë‹¤.

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
â–  PV ìƒì„±
# pvcreate /dev/sda1 
# pvcreate /dev/sda1 /dev/sdb1 /dev/sdc1 
# pvcreate /dev/sd[abc]1 
# pvcreate /dev/sda /dev/sdb /dev/sdc 

â–  PV ì‚­ì œ
# pvremove /dev/sda1 
# pvremove /dev/sda1 /dev/sdb1 /dev/sdc1 
# pvremove /dev/sd[abc]1 

â–  PV ì •ë³´ í™•ì¸
# pvs 
# pvscan 
# pvdisplay    (# pvdisplay /dev/sdc1)
# lvmdiskscan
```

### [EX] PV ìƒì„± ë° ì‚­ì œ ì‹¤ìŠµ

```bash
# dnf -y install lvm2
â‘  PV ìƒì„± ë° í™•ì¸
# pvcreate /dev/sdc1   (# pvcreate /dev/sd[cde]1)
Writing physical volume data to disk "/dev/sdc1"
Physical volume "/dev/sdc1" successfully created
		[ì°¸ê³ ] ì—ëŸ¬ë©”ì„¸ì§€
		# pvcreate /dev/sdc1 
		pvcreate /dev/sdc1
		  Can't open /dev/sdc1 exclusively.  Mounted filesystem?
		# df â€“h 
		-> /oracle ë§ˆìš´íŠ¸ í™•ì¸
		# umount /oracle 
		# vi /etc/fstab 
		# pvcreate /dev/sdc1
# pvcreate /dev/sdd1
Writing physical volume data to disk "/dev/sdd1"
Physical volume "/dev/sdd1" successfully created
# pvcreate /dev/sde1
Writing physical volume data to disk "/dev/sde1"
Physical volume "/dev/sde1" successfully created
# pvs
	PV         VG   Fmt  Attr PSize    PFree   
  /dev/sdc1       lvm2 --   1019.72M 1019.72M
  /dev/sdd1       lvm2 --   1019.72M 1019.72M
  /dev/sde1       lvm2 --   1019.72M 1019.72M
# pvscan
	PV /dev/sdc1                      lvm2 [1019.72 MB]
  PV /dev/sdd1                      lvm2 [1019.72 MB]
  PV /dev/sde1                      lvm2 [1019.72 MB]
  Total: 3 [2.99 GB] / in use: 0 [0   ] / in no VG: 3 [2.99 GB]
# pvdisplay /dev/sdc1     (# pvdisplay)
"/dev/sdc1" is a new physical volume of "1019.72 MB"
  --- NEW Physical volume ---
  PV Name               /dev/sdc1
  VG Name               
  PV Size               1019.72 MB
  Allocatable           NO
  PE Size (KByte)       0
  Total PE              0
  Free PE               0
  Allocated PE          0
  PV UUID               75kFvq-OwJC-rAAj-lCet-XBpL-M0JS-30xqZa
# lvmdiskscan
	/dev/ramdisk [       16.00 MB] 
  /dev/ram     [       16.00 MB] 
  /dev/root    [       16.54 GB] 
  /dev/ram2    [       16.00 MB] 
  /dev/sda2    [        1.00 GB] 
  /dev/ram3    [       16.00 MB] 
  /dev/sda3    [      502.03 MB] 
  /dev/ram4    [       16.00 MB] 
  /dev/ram5    [       16.00 MB] 
  /dev/sda5    [      502.00 MB] 
  /dev/ram6    [       16.00 MB] 
  /dev/sda6    [      502.00 MB] 
  /dev/ram7    [       16.00 MB] 
  /dev/sda7    [      502.00 MB] 
  /dev/ram8    [       16.00 MB] 
  /dev/sda8    [      502.00 MB] 
  /dev/ram9    [       16.00 MB] 
  /dev/ram10   [       16.00 MB] 
  /dev/ram11   [       16.00 MB] 
  /dev/ram12   [       16.00 MB] 
  /dev/ram13   [       16.00 MB] 
  /dev/ram14   [       16.00 MB] 
  /dev/ram15   [       16.00 MB] 
  /dev/sdb1    [     1019.72 MB] 
  /dev/sdc1    [     1019.72 MB] LVM physical volume
  /dev/sdd1    [     1019.72 MB] LVM physical volume
  /dev/sde1    [     1019.72 MB] LVM physical volume
  /dev/sdf1    [     1019.72 MB] 
  3 disks
  22 partitions
  0 LVM physical volume whole disks
  3 LVM physical volumes
# lvmdiskscan | grep LVM
  /dev/sdc1 [    1023.00 MiB] LVM physical volume
  /dev/sdd1 [    1023.00 MiB] LVM physical volume
  /dev/sde1 [    1023.00 MiB] LVM physical volume
  0 LVM physical volume whole disks
  3 LVM physical volumes

â‘¡ PV ì‚­ì œ ë° í™•ì¸
# pvremove /dev/sdc1 /dev/sdd1 /dev/sde1   (# pvremove /dev/sd[cde]1)
	Labels on physical volume "/dev/sdc1" successfully wiped
  Labels on physical volume "/dev/sdd1" successfully wiped
  Labels on physical volume "/dev/sde1" successfully wiped
# pvs 
#
-> êµ¬ì„±ëœ ì •ë³´ê°€ ì—†ë‹¤.

â‘¢ PV ë‹¤ì‹œ ìƒì„±
# pvcreate /dev/sd[cde]1    (# pvcreate /dev/sdc1 /dev/sdd1 /dev/sde1) (# pvcreate /dev/sd[c-e]1)
	Writing physical volume data to disk "/dev/sdc1"
  Physical volume "/dev/sdc1" successfully created
  Writing physical volume data to disk "/dev/sdd1"
  Physical volume "/dev/sdd1" successfully created
  Writing physical volume data to disk "/dev/sde1"
  Physical volume "/dev/sde1" successfully created
[ì°¸ê³ ] PV ìƒì„±ì‹œ PV ê°œìˆ˜ê°€ ë§ì€ ê²½ìš°ì˜ ì˜ˆ
# pvcreate /dev/sd[abcde][12]
or
# pvcreate /dev/sda1 /dev/sda2 /dev/sdb1 /dev/sdb2 /dev/sdc1 /dev/sdc2 .....
```

â–  LVM ì‘ì—… ìˆœì„œ
System Partition ID ë³€ê²½(fdisk CMD) 

-> PV ìƒì„±(pvcreate CMD) 

-> VG ìƒì„±(vgcreate CMD) 

-> LV ìƒì„±(lvcreate CMD)

-> F/S ìƒì„±(mkfs CMD)

-> ë§ˆìš´íŠ¸(mount CMD, /etc/fstab)

[2] ë¬¼ë¦¬ì ì¸ ë³¼ë¥¨ ê·¸ë£¹ìƒì„±(VG: Volume Group)

ë¬¼ë¦¬ì ì¸ ë³¼ë¥¨ì„ ìƒì„±í•˜ì˜€ìœ¼ë©´ ê°ê°ì˜ ë¬¼ë¦¬ì ì¸ ë³¼ë¥¨ì„ í•˜ë‚˜ì˜ ê·¸ë£¹ìœ¼ë¡œ ìƒì„±í•´ ì¤€ë‹¤

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
â–  VG ìƒì„±
# vgcreate vg1 /dev/sdc1 /dev/sdd1 /dev/sde1 
# vgcreate vg1 /dev/sd[cde]1 

â–  VG ì‚­ì œ
# vgremove vg1 
# vgremove /dev/vg1 

â–  VGì— ë””ìŠ¤í¬ ì¶”ê°€/ì œê±°
# vgextend vg1 /dev/sdf1 
# vgreduce vg1 /dev/sdf1 

â–  VG ì´ë¦„ ë³€ê²½
# vgrename /dev/vg1 /dev/vg1_backup
# vgrename vg1 vg1_backup

â–  VG ì •ë³´ í™•ì¸
# vgs
# vgscan
# vgdisplay   (# vgdisplay vg1)
```

### [EX] VG ìƒì„± ë° ì‚­ì œ ì‹¤ìŠµ

```bash
â‘  VG(EX: vg1) ìƒì„± ë° í™•ì¸
# pvs
	PV         VG   Fmt  Attr PSize    PFree   
  /dev/sdc1       lvm2 a--  1016.00M 1016.00M
  /dev/sdd1       lvm2 a--  1016.00M 1016.00M
  /dev/sde1       lvm2 a--  1016.00M 1016.00M
# vgcreate vg1 /dev/sdc1 /dev/sdd1 /dev/sde1  (# vgcreate vg1 /dev/sd[cde]1)
Volume group "vg1" successfully created
# pvs
	PV         VG   Fmt  Attr PSize    PFree   
  /dev/sdc1  vg1  lvm2 a-   1016.00M 1016.00M
  /dev/sdd1  vg1  lvm2 a-   1016.00M 1016.00M
  /dev/sde1  vg1  lvm2 a-   1016.00M 1016.00M
# vgs
	VG   #PV #LV #SN Attr   VSize VFree           /* PV: PV ìˆ˜ , SN : snapshotìˆ˜ */
  vg1    3   0   0 wz--n- 2.98G 2.98G
# vgscan
	Reading all physical volumes.  This may take a while...
  Found volume group "vg1" using metadata type lvm2
# vgdisplay       (# vgdisplay vg1)
--- Volume group ---
  VG Name               vg1
  System ID             
  Format                lvm2
  Metadata Areas        3
  Metadata Sequence No  1
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                0
  Open LV               0
  Max PV                0
  Cur PV                3
  Act PV                3
  VG Size               2.98 GB
  PE Size               4.00 MB
  Total PE              762         /* 762 X 4M = 2.98GB */
  Alloc PE / Size       0 / 0   
  Free  PE / Size       762 / 2.98 GB
  VG UUID               y0kBYP-Txeh-a2J0-WjgK-EN3f-0027-MEEhU7
â‘¡ ìƒì„±ëœ VG(EX: vg1) ì‚­ì œ ë° í™•ì¸
# vgremove vg1    (# vgremove /dev/vg1)
Volume group "vg1" successfully removed
# vgs
No volume groups found
-> êµ¬ì„±ëœ ì •ë³´ê°€ ì—†ë‹¤.

â‘¢ VG(EX: vg1) ë‹¤ì‹œ ìƒì„±
# vgcreate vg1 /dev/sd[cde]1
Volume group "vg1" successfully created
# vgs
	VG   #PV #LV #SN Attr   VSize VFree
  vg1    3   0   0 wz--n- 2.98G 2.98G

â–  í˜„ì¬ ë””ìŠ¤í¬ êµ¬ì„±
/dev/sdc1 - PV   ------+
/dev/sdd1 - PV         +-----> vg1
/dev/sde1 - PV   ------+
/dev/sdf1 - ?

â‘£ ìƒˆë¡œìš´ PV(EX: /dev/sdf1) ìƒì„±í›„ VG(EX: vg1)ì— ì¶”ê°€ ë° í™•ì¸
# fdisk â€“l | grep LVM
/dev/sdc1               1         130     1044193+  8e  Linux LVM
/dev/sdd1               1         130     1044193+  8e  Linux LVM
/dev/sde1               1         130     1044193+  8e  Linux LVM
/dev/sdf1               1         130     1044193+  8e  Linux LVM
# pvs
	PV         VG   Fmt  Attr PSize    PFree   
  /dev/sdc1  vg1  lvm2 a--  1016.00M 1016.00M
  /dev/sdd1  vg1  lvm2 a--  1016.00M 1016.00M
  /dev/sde1  vg1  lvm2 a--  1016.00M 1016.00M
# pvcreate /dev/sdf1
	Writing physical volume data to disk "/dev/sdf1"
  Physical volume "/dev/sdf1" successfully created
# pvs
	PV         VG   Fmt  Attr PSize    PFree   
  /dev/sdc1  vg1  lvm2 a-   1016.00M 1016.00M
  /dev/sdd1  vg1  lvm2 a-   1016.00M 1016.00M
  /dev/sde1  vg1  lvm2 a-   1016.00M 1016.00M
  /dev/sdf1       lvm2 --   1019.72M 1019.72M
# vgextend vg1 /dev/sdf1
Volume group "vg1" successfully extended
# pvs
	PV         VG   Fmt  Attr PSize    PFree   
  /dev/sdc1  vg1  lvm2 a-   1016.00M 1016.00M
  /dev/sdd1  vg1  lvm2 a-   1016.00M 1016.00M
  /dev/sde1  vg1  lvm2 a-   1016.00M 1016.00M
  /dev/sdf1  vg1  lvm2 a-   1016.00M 1016.00M
# vgdisplay vg1
--- Volume group ---
  VG Name               vg1
  System ID             
  Format                lvm2
  Metadata Areas        4
  Metadata Sequence No  2
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                0
  Open LV               0
  Max PV                0
  Cur PV                4
  Act PV                4
  VG Size               3.97 GB
  PE Size               4.00 MB
  Total PE              1016
  Alloc PE / Size       0 / 0   
  Free  PE / Size       1016 / 3.97 GB
  VG UUID               NHG3Mo-boPO-5z8j-XBYb-K5zJ-vtuy-6wnejz
â‘¤ VG(EX: vg1)ì—ì„œ PV(EX: /dev/sdf1) ì‚­ì œ ë° í™•ì¸
# vgreduce vg1 /dev/sdf1
Removed "/dev/sdf1" from volume group "vg1"
# pvs
	PV         VG   Fmt  Attr PSize    PFree   
  /dev/sdc1  vg1  lvm2 a-   1016.00M 1016.00M
  /dev/sdd1  vg1  lvm2 a-   1016.00M 1016.00M
  /dev/sde1  vg1  lvm2 a-   1016.00M 1016.00M
  /dev/sdf1       lvm2 --   1019.72M 1019.72M
â‘¥ VG ì´ë¦„ ë³€ê²½ ë° í™•ì¸
# vgrename vg1 vg2
Volume group "vg1" successfully renamed to "vg2"
# vgs
	VG   #PV #LV #SN Attr   VSize VFree
  vg2    3   0   0 wz--n- 2.98G 2.98G
# vgrename /dev/vg2 /dev/vg1
Volume group "vg2" successfully renamed to "vg1"
# vgs
Volume group "vg2" successfully renamed to "vg1"
```
