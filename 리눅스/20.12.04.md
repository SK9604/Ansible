## 🙋🏻‍♀️ 아홉번째 비대면 수업

- **배운 내용**

    질문내용 정리

---

# 내용 정리

---

Fedora | RHEL | Centos

RHEL 에서 Fedora, Centos  인수

# 질문내용 정리

---

## man 명령어쪽이 익숙치가 않아  활용이 어렵습니다

```bash
man 도움말
	새로운 명령어를 만나거나 또는 기존의 명령어를 사용하면서 생소한 옵션, 모르는 옵션등을 찾아야 하는 경우 사용한다.
	외부에서는 구글등의 도움을 받을 수 있다. 하지만 내부 네트워크(망분리, 폐쇄망)에서는 외부로의 네트워크가 되지 않을 가능성이 있다.
	특수한 경우에는 모바일 디바이스의 사용이 불가능한 경우도 존재한다.
man을 찾기 위한 몇몇가지 명령어

	[Centos 5,6] 
		makewhatis
	[Centos 7,8]
		man-db-cron

	7버전에서는 프로그램이 존재하지만 8버전에서는 dnf를 통하여 프로그램 설치부터 진행해야 한다.
	# dnf -y install man-db-cron
	# ls
	logrotate man-db.cron rhsmd
	# ./man-db.cron
	# man -k cal
	> 명령어 출력 결과 생략

	whatis 명령어를 사용하기 위해서라도 man-db-cron파일을 설치해야 한다.
	whatis 명령어는 도움말의 NAME 부분을 출력해준다.
	whatis 명령어로 확인해야 하는 것은 단지 NAME 출력부가 아니라 섹션 정보가 어디어디 있는지를 같이 보아야 한다.
	
	#whatis passwd
	openssl-passwd (1ssl) - compute password hashes
	passwd (1)           - update user's authentication tokens
	passwd (5)           - password file
	
	현재 passwd에 관하여 검색을 시도 했으며 passwd에 관하여 두 가지 메뉴얼 파일이 있는것을 알 수 있다. 1,5
	1 - 일반 사용 명령어
	5 - 설정파일
	-------------------------
	추가적으로 한가지 더
	8 - 관리자가 사용하는 명령어

man 페이지를 확인할 때 보아야 하는 것
	#man ls
	LS(1) < 1번 섹션
	NAME
	SYNOPSIS
	DESCRIPTION
	example
		ls -l file1
		ls -l /test/dir1
	참고해야 하는 명령어(see also)

man 파일을 사용할 때 필요한 것
	검색기능 /[패턴]
		/-l
	검색문구가 하이라이트 되어서 박스로 표현된다.
	동일한 문구를 검색하는 경우에 n키를 입력하고 확인한다.

man    메뉴얼 파일 확인
which  명령어의 절대 경로 확인
whatis 명령어의 기본 설명 확인
```

## 계정 스위치

```bash
su   :
su - : 하위(자식) 쉘을 실행하면서 다른 계정으로 전환(스위칭) 작업을 하기 위한 명령어
			 특정한 프로그램이나, 또는 해당 계정만이 구성 가능한 무언가가 있는 경우가 대부분
			 su fedora
			 su - fedora
			 -(대시) 유무에 따라 환경변수 및 작업 디렉토리에 영향을 준다.
			 동일하게 변경되는 것
			 TERM
			 HOME
			 SHELL
			 USER
			 LOGNAME
			 변경되지 않는것(- 가 있을때만 변경)
			 PATH
			 워킹디렉토리

			 그리고 나머지
			 su    유지
			 su -  초기화
			 웬만하면 su - 사용 (권장사항)
sudo : su의 경우에는 관리자 권한을 위해서 관리자의 비밀번호를 꼭 알고 있어야 한다. 하지만 sudo의 경우에는 사용자의 비밀번호를 입력하고 관리자의 권한을 잠시 사용가능하다.
ssh  : su - 와 차이점 없다.
			 현재 서버에서 ssh가 동작하는지 클라이언트 입장에서 확인하기 위함
```

## head, tail을 이용한 파일 중간 출력하기

```bash
# cat -n file1 | head -20 | tail -10
# cat -n file1 | sed -n '11,20p'
# cat -n file1 | sed -n '1,3p' ; cat -n file1 | sed -n '7,9p'
```

## ; 과 |

```bash
;  < 명령어와 명령어를 분리 시키는 역할
|  < 명령어와 명령어를 연결 시키는 역할

둘 다 쉘에서 사용하는 기호
특수기호
```

```bash
1. stat명령어 사용 시 dir accesstime 이 찍히는 기준
dir에 접근을 하는 시간
xfs에서는 aitme을 설정하더라도 성능상의 무리는 없다고 개발사가 발표

atime 
diratime

noatime
nodiratime

2.exit으로 반환값을 지정하는 이유
일반적으로 쉘에서 빠져나가는 경우에는 지정하지 않아도 상관 없다. 하지만 쉘 스크립트의 경우에는 이야기가 다르다.
조건문을 사용하기 위해서 :
if [ $? = 1 ] ; then
		else action
특정 반환값이 필요한 경우 지정하고 이것을 이용하여 조건문에서 특정 동작을 하게끔 한다.

3.중간중간 while 문을 사용하는 경우나 함수를 이용하여 프로그램 내에서 쉘을 실행시키는 경우 c언어를 미리 알아야하는지, 스스로 프로그래밍 언어를 통해서 setuid setgid정도는 0으로 만드는 수준 정도가 되어야하는지..
궁금합니다!

언어가 필수적인것은 아니지만 
알아둬서 나쁠건 없다.
쓸모없는 지식은 없다.
시스템 엔지니어 추천 언어: 
C언어
python 
GO
ansible : tool & 언어
```

## awk 명령어로 출력물 변환

```bash
필드 출력에 대한 선택적 출력
# df | grep /dev/sda1 | awk '{print "df print "$5" " $6}'
```

## 링크카운트

```bash
# ls -l
링크된 파일이 몇개가 있다
# ln file2 file3
```

## 권한

```bash
소유자, 그룹 변경
chown : 오직 슈퍼 사용자에 의해서만 실행됨(root)
				# chown fedora file1
				file1의 소유자를 fedora로 변경해라
				# chown .fedora file1
				file1의 그룹 소유자를 fedora로 변경해라
				# chown :team01 file1
				file1의 그룹 소유자를 team01로 변경해라
				# chown root.root file1
				file1의 소유자와 그룹소유자를 모두 root로 변경해라
				# chown -v team01.team01 file1
				changed ownership of 'file1' from root:fedora to team01:team01
				# chown -R team01.team01 dir1
				R옵션 > dir1아래 모든 파일, 디렉토리의 소유자를 변경

chgrp : 일반 사용자들은 이 명령어 사용

cat /etc/passwd : 계정 확인
cat /etc/group  : 그룹 확인
```

```bash
퍼미션 변경
chmod : r, w, x (4, 2, 1)
				각 문자는 하나의 스위치로 생각한다. (on/off)
				
```

```bash
umask 기본값 # umask 000
F      D
666    777
F 이유 : 읽기, 수정만 가능하도록. 실행은 막는다(민감한 파일의 경우 위험하다)
D 이유 : ls, cp, cd 

umask에서 설정된 숫자만큼 권한이 빠진다.
이 권한은 정수로 빠지는 것이 아니라 숫자에 해당하는 기능이 빠지는 것이다.
```

```bash
setuid
setgid
/etc/shadow 모든 권한
root 권한 공유: su - 비밀번호
shadow 파일 실행, 수정할 수 있는 권한을 임시적으로 부여
setting uid
```
