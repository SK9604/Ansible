OSI의 장점 : LAYER 계층 구조이다.

공급업체 : vendor

특정 역할 : 블랙박스

- 정리

    Computer에서 사용되는 Layer들 : OSI 7 계층 이라는 기준으로 설명하고 있지만 TCP/IP랑도 똑같고, x86-64 조립 pc와 똑같다

    L1~L7층까지 나누어져 있는것은 나누어져 있지 않은 것 보다 각각 부분 부분이 작다. 따라서 기능 구현에 용이하다. 해당 층만 신경쓰면 된다.

    특정 역할을 완수하는 수행하는 제품을 개발한다. 예를 들어 하드 디스크를 보면 여러 회사들이 다 따로 내지만 data케이블 전원 케이블 등 인터페이스는 모든 회사가 다 똑같다. (표준 인터페이스) layer지만 module화가 가능하다.

    layer가 쪼개져있으니 전체를 모두 만드는 것 보다 시간이 적게 든다. 집중도가 올라간다. → 좋은 제품이 나올 확률이 올라간다. 쉽게 변경이 가능하다. 

    cpu - intel, AMD , mem - samsung, ~ , disk - samsung, wd, sandisk , nic - intel, iptime, ~ : 각각의 부품을 다 나눠 받는다. 특정 기능을 대상으로 개발을 한다. 동일한 환경 위에서 다 결착, 인식이 가능해야 한다. 우리가 쓰는 네트워크인 TCP/IP에 모두 통신이 가능하도록 개발된 여러 프로그램, 장치들.


L4PDU Data : Payload

L4H + Data : Segment

L3H + Data : Packet

L2H + Data + L2T : Frame

L2만 Trailer가 있는 이유 : 시작과 끝을 확인하기 위해서.

# LAN 기초

LAN : Local Area Network

SOHO : Small  Office Home Office

swtich란 장미는 포트가 여러개 있어서 많은 장비를 연결 할 수 있다.

외부로 나가기 위해 Gateway가 있어야 한다. Router의 인터페이스에 존재한다.

현재는 약간 다르다



실제로는 LAN을 구성할 때 바로 물리지 않고 network를 분리시키는 작업을 많이 한다. (유선, 무선)



기업용 네트워크.

각 층의 스위치에 연결하여 또 다른 스위치(분산 스위치, 고성능 스위치)에 먼저 연결하여 라우터에 연결한다.(그냥 라우터에 연결하면 포트가 너무 많이 필요함)

분산 스위치는 생각보다 포트가 적긴 하지만 성능이 아주 뛰어나다. 부하를 견디고 pps가 높다.

보통 분산 스위치와 라우터는 지하에 있다.

분산 스위치보다 더 큰 용량의 초 대형 스위치가 하나 더 있을 수 있다.



Ethernet은 고작 10Mbps. 10BASE-T



LAN선은 까보면 총 8가닥이 있는데 두가닥씩 꼬여있다. 저항을 덜 받기 위해

UTP → STP → FTP  갈수록 비싸진다.

UTP - 실내용(노,빨,파,회색), 옥외용(검정색)

STP - unshiled가 아니라 shiled이다. 외부 신호에 대해서 차폐를 해준다. 차폐막을 쓴다. 보통 주식쪽이나 민감한 정보를 처리하는 곳에서 사용한다.

FTP - 두겹 감싸져 있다.

Fiber : 광, 5km까지 가능

RJ45 커넥터 : 일반적으로 우리가 사용하는 랜 케이블



swtich에서 switch 두개가 있고 일크시켜서 점프시켜놨다. cross over



PC 업데이크

NIC 카드 업데이트 

3dpchip-net



MAC 주소

NIC카드에 여러 칩들. 이 중 mac-address가 번인되어 있는 칩이 있다. 물리적인 주소가 들어있다.

[MAC 주소 사이트](http://coffer.com/mac_find/) : 어느 회사에서 제조된 NIC 카드인지 볼 수 있다.



IP TV, Netflix → 멀티 캐스트로 동작하고 있다.

통신의 3가지 방식 : LAN의 세가지 방식

유니캐스트

1:1

서버와 클라이언트가 1:1 방식으로 통신을 한다.

웹서버. ssh, ftp, 웬만한 통신들은 거의 다 1:1 방식을 사용하고 있다.

브로트캐스트

1:network

서버와 클라이언트가 브로드 캐스트로 동작을 하게되면 자신을 제외한 현재 LAN 내부에 존재하는 [모든][엔드 디바이스]에게 통신을 시도한다.

보통 브로드캐스트는 단방향이 많다. 복제한다.

데이터가 자신의 것이 아닌 원격지 컴퓨터는 패킷을 확인하여 폐기한다.

브로드캐스트 통신은 우선 처리되는 인터럽트이기 때문에 타 통신보다 먼저 처리되는 특성을 가지고 있다.

단점 : 브로드캐스트 통신이 많다면 그만큼 먼저 처리해야할 패킷이 많다는 것이다. 그렇기에 NIC카드의 부하가 높아진다.

스위치나 기술들을 사용해서 브로드캐스트에 대한 주소를 격리시키거나 잘라주는 것을 많이 시도한다.

멀티캐스트

1:group

서버와 클라이언트가 통신을 할 때 지정된 그룹에게만 패킷을 전달한다.

그룹에 가입된 방송, 채널 등의 형식으로 사용한다.

IGMP라는 프로토콜이 함께 있다.



이더넷 헤더에 끝부분에는 Type이란게 있다. 상위 계층에 무엇을 담고 있는지 나타낸다.



예전에 사용하던 하프 듀플렉스 방식

케이블이 지금처럼 LAN이 아니라 동축케이블로 되어있었다.

단일로 되어있는 구리선으로 되어있다. 

현재는 8가닥으로 송수신이 동시에 되었으나 동축케이블이기 때문에 생기는 문제점이다.

오른쪽의 pc2대가 왼쪽의 pc로 통신을 시도한다.

CSMA/CD : Carrier Sense → 현재 누가 라인을 쓰고 있는지 아닌지 확인을 한다. 비어있으면 그때서야 통신을 시도한다.

Multi Access → 동시에 시도할 수 있다.

Collision Detection

→ Ethernet의 기본 컨셉

HUB : 충돌이 발생한다. 이더넷 상황에서 신호를 버린다. 재밍 시그널을 발생시켜 현재 토폴로지의 모든 호스트로 보낸다. → 처음부터 다시 전송을 시도하게 한다.

하프 듀플렉스 방식의 단점 : 동시에 진행이 안됨. 재밍 시그널 발생됨



< 제일 처음에 구상하던 그림

노란색은 실제로 하나의 선이다. (동축 케이블)

노란 선의 양 끝 : 터미네이터 (차폐기능을 한다)



Switch가 있다.

부딪치지 않는다. 

외부 접근의 시도 때문에 문제가 생기는 경우가 있긴 하지만 거의 없다.



⭐목적지 MAC 주소가 자기 것임을 확인하고



왼쪽끼리는 잘 통신 되지만 HUB장비가 문제를 일으킨다.

HUB는 Collision Domain을 공유하는 장비이다.

**HUB**

Collision Domain을 공유하는 장비

Broadcast를 공유하는 장비

**Switch**

Collision Domain을 공유하지 않는 장비→ 충돌이 발생하지 않는다.

Broadcast를 공유하는 장비

기종에 따라서 Broadcast를 분할(vlan)시킬 수도 있다.

**Router**

Broadcast를 공유하는 장비



Serial line, P to P line, T1 line



지하에 매설되어있다.

요즘엔 지상으로 조금씩 튀어나오게끔 작업을 편리하게 하기 위해. 지역마다 다르다.

예전에는 전기선이 다 전신구를 통과했었으나 요즘은 거의 없다. 전부 지하로 묻었다.

Customer Site1 ,2를 연결하는데 있어서 선을 하나의 선으로 가는게 아니라 통신회사들을 통과한다.

통과하는 이유는 전용 회선이 생각보다 짧기 때문에.

HDLC또는 802.3Header로 내보내게 된다.

## IPv4 주소 체계와 라우팅 기초



PC1 PC2 IP packet 보낼 때

LAN——Router——LAN



PC에선 Ethernet Frame을 만든다

IP Packet만 꺼내 새로운 이더넷 내부에 캡슐화 한다. → ⭐모든 통신은 L2에서 이루어 진다⭐

IP Packet을 꺼내 확인하고 다니 HDLC로 합쳐준다. → 기존의 IP Packet을 꺼내고 Ethernet Header로 다시 바꾼다.



Routing : 두세가지 정도의 interface로 이루어져 있다.

Subnet : 네트워크에 대한 그룹

그룹을 가지고 있으면 특정한 ip 요청이 들어왔을 때 본인이 가지고 있는 table과 대조를 하여 Next Hop을 보고 Interface를 본다. (어떤 Protocol로 Header를 만들지 결정하게 된다.)

R2에서도 동일한 동작이 일어난다.



IP는 클래스가 존재한다.

IP에서 사용하는 숫자는 0-255이다.

0으로 시작하는 숫자는 없다. 1 부터 시작

1-126 하나의 브로드 캐스트이다. 

127 : localhost로 사용한다.

128-191 : 규모가 있는 사이트에서 많이 사용한다.

Network 숫자 ↓ → Host 숫자 ↑

Network 숫자 ↑ → Host 숫자 ↓



원본 그대로 사용할 경우 어떤 일이 발생할 것인가?

각각의 HOST들은 65536개의 IP를 사용할 수 있다.

WAN통신은 기본적으로 P2P이다.

IP 서브네팅 : 

ARP 스푸핑 : 중간에 가로챔 packet을 탈취
