## ğŸ™‹ğŸ»â€â™€ï¸ ì—´ì—¬ì„¯ë²ˆì§¸ ë¹„ëŒ€ë©´ ìˆ˜ì—…

---

# ë‚´ìš© ì •ë¦¬

---

ê¸°ë³¸ ë¦¬ëˆ…ìŠ¤ í•™ìŠµ: ì ì–´ë„ í•œë²ˆì”© ì§„ì…, ì ì–´ë„ í•œë²ˆì€ ì–¸ê¸‰, ì ì–´ë„ í•œë²ˆì€ ìŠ¤ì³ê°€ë©° ë´¤ë˜ ê²ƒ

# í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬

ëª¨ë“  ì»´í“¨í„°ì˜ ìì›ì€ ìœ í•œí•˜ë‹¤.

ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ë¥¼ í†µí•˜ì—¬ í˜„ì¬ ìì›ì—ì„œ ì–»ì„ ìˆ˜ ìˆëŠ” ìµœëŒ€ì˜ ì„±ëŠ¥ ë°œíœ˜ë¥¼ ê¿ˆê¾¸ëŠ” ê²ƒì´ í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬

# ë‹¨ì›ëª©í‘œ

- í”„ë¡œì„¸ìŠ¤ ì •ë³´
- PID / PPID
- í•˜ë“œì›¨ì–´ ë¦¬ì†ŒìŠ¤
- í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬
- í”„ë¡œì„¸ìŠ¤ ëª¨ë‹ˆí„°ë§

---

# í”„ë¡œì„¸ìŠ¤ ì •ë³´

- í”„ë¡œì„¸ìŠ¤ ì •ë³´

    /proc/PID

    ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e1fe6820-c3e5-4804-8874-9b5535dc9ee8/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e1fe6820-c3e5-4804-8874-9b5535dc9ee8/Untitled.png)

---

í”„ë¡œê·¸ë¨: ë””ìŠ¤í¬, ì €ì¥ë˜ì–´ ìˆëŠ” ë°”ì´ë„ˆë¦¬ íŒŒì¼, ì„¤ì¹˜ íŒŒì¼.. ì‹¤í–‰ ê´€ë ¨ëœ íŒŒì¼

í”„ë¡œì„¸ìŠ¤: ë©”ëª¨ë¦¬ì— ì ì¬

í…ìŠ¤íŠ¸ â†’ ë‚´ê°€ ë³¼ ìˆ˜ ìˆëŠ” ì–´ë– í•œ í˜•íƒœë¡œ ë§Œë“œëŠ” ì‘ì—…

## í”„ë¡œì„¸ìŠ¤(process)ë€?

**í”„ë¡œì„¸ìŠ¤(process)ë€?** ì‹¤í–‰ì¤‘ì¸ í”„ë¡œê·¸ë¨ì´ë‹¤.

DISK(í•œê¸€.exe) ----> MEM(í•œê¸€ process) ----> CPU(ì¤‘ì•™ ì²˜ë¦¬ ì¥ì¹˜)

í”„ë¡œê·¸ë¨ â€”â€”â€”â€”> í”„ë¡œì„¸ìŠ¤  â€”â€”â€”â€”â€”â€”> cpuì²˜ë¦¬

í”„ë¡œì„¸ìŠ¤ëŠ” í”„ë¡œê·¸ë¨ì´ ë©”ëª¨ë¦¬ì— ì ì¬ë˜ì–´ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ê³  ìˆëŠ” ìƒíƒœë¥¼ ë§í•œë‹¤. í”„ë¡œì„¸ìŠ¤ëŠ” ì»´í“¨í„° ë‚´ì—ì„œ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œê·¸ë¨ì˜ ì¸ìŠ¤í„´ìŠ¤ì´ë‹¤. **ì—¬ëŸ¬ ëª…ì˜ ì‚¬ìš©ìë“¤ì— ì˜í•´ ê³µìœ ë˜ê³  ìˆëŠ” ì‘ìš©í”„ë¡œê·¸ë¨ì€ ì¼ë°˜ì ìœ¼ë¡œ ê° ì‚¬ìš©ìë“¤ì˜ ì‹¤í–‰ë‹¨ê³„ì—ì„œ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°–ëŠ”ë‹¤.** í”„ë¡œì„¸ìŠ¤ëŠ” ìì‹í”„ë¡œì„¸ìŠ¤ë¼ê³ ë„ ë¶ˆë¦¬ëŠ” ì„œë¸Œí”„ë¡œì„¸ìŠ¤ë¥¼ ì‹œì‘ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ìì‹í”„ë¡œì„¸ìŠ¤ëŠ” ë¶€ëª¨í”„ë¡œì„¸ìŠ¤ì˜ ë³µì œë¡œì„œ ë¶€ëª¨í”„ë¡œì„¸ìŠ¤ì˜ ìì›ì„ ì¼ë¶€ ê³µìœ í•˜ëŠ”ë°, ë¶€ëª¨í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ë©´ ë” ì´ìƒ ì¡´ì¬í•  ìˆ˜ ì—†ë‹¤. í”„ë¡œì„¸ìŠ¤ë“¤ì€ ëª‡ ê°€ì§€ IPC ë°©ì‹ì„ í†µí•˜ì—¬ ì •ë³´ë¥¼ êµí™˜í•˜ê±°ë‚˜ ê·¸ë“¤ì˜ ì—°ì‚°ì„ ë™ê¸°í™”í•  ìˆ˜ ìˆë‹¤. 

```bash
# sync; sync
ë””ìŠ¤í¬ì™€ ë©”ëª¨ë¦¬ ë™ê¸°í™”. ê·¼ë˜ì—ëŠ” ì˜ ì“°ì§€ ì•ŠëŠ” ëª…ë ¹ì–´ì´ë‹¤.
```

ëª¨ë“  í”„ë¡œê·¸ë¨ì€ ì‹¤í–‰ë  ë•Œ í•˜ë‚˜ ì´ìƒì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°–ëŠ”ë‹¤. í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ì—ëŠ” ì—¬ëŸ¬ ëª…ë ¹ì–´ì™€ ì¹´ìš´íŠ¸, CPU ë ˆì§€ìŠ¤í„°, ê·¸ë¦¬ê³  ë£¨í‹´ ì¸ì, ë³µê·€ ì£¼ì†Œ, ì €ì¥ëœ ë³€ìˆ˜ ë“±ì˜ í…Œì´í„° ìŠ¤íƒì´ í¬í•¨ë˜ì–´ ìˆë‹¤. ê° í”„ë¡œì„¸ìŠ¤ëŠ” ê³ ìœ ì˜ ê¶Œí•œê³¼ ì±…ì„ì„ ê°€ì§€ê³  ì„œë¡œ í†µì‹ í•˜ë©°, ì‹œìŠ¤í…œì—ì„œ ë™ì‘ì¤‘ì¸ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ê°€ ì˜ëª»ëœ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ì—¬ ì—ëŸ¬ë¥¼ ì¼ìœ¼í‚¤ë”ë¼ë„ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ëŠ” ì •ìƒì ìœ¼ë¡œ ì‘ë™í•œë‹¤. ê°œë³„ í”„ë¡œì„¸ìŠ¤ëŠ” ìì‹ ì˜ ê°€ìƒ ì£¼ì†Œ ê³µê°„ì—ì„œ ì‹¤í–‰ë˜ë©°, ì»¤ë„ì´ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ì„œë§Œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì™€ ì—°ë™í•  ìˆ˜ ìˆë‹¤. (ê°€ìƒì£¼ì†Œ ê³µê°„ ì“°ëŠ” ì´ìœ : ëˆ„êµ°ê°€ ë¬¼ë¦¬ì  ì£¼ì†Œë¥¼ ì“°ê³ ìˆë‹¤ë©´ ë‹¤ë¥¸ì‚¬ëŒì€ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.)

```bash
í”„ë¡œì„¸ìŠ¤ í™•ì¸
# lsof -p [PID]
# pstree
# pstree -ap | grep 2432
  |   |   |-bash,2432
  |   |   |   |-grep,3335 --color=auto 2432
```

**í”„ë¡œì„¸ìŠ¤ëŠ” ì—¬ëŸ¬ ê°€ì§€ ìì›ì„ ì‚¬ìš©í•œë‹¤. í”„ë¡œì„¸ìŠ¤ëŠ” í•´ë‹¹ ëª…ë ¹ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ìš´ì˜ì²´ì œì— ë”°ë¼ CPUë¥¼ ì ìœ í•  ìˆ˜ ìˆë‹¤. ëª…ë ¹ì–´ì™€ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ ë¬¼ë¦¬ì ì¸ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤. í”„ë¡œì„¸ìŠ¤ëŠ” ìš´ì˜ì²´ì œì˜ ì œì–´ë¥¼ ë°›ìœ¼ë©´ì„œ ì‹¤í–‰(running), ëŒ€ê¸°(waiting), ì¤‘ë‹¨(stopped), ì¢€ë¹„(zombie) ì¤‘ í•œ ìƒíƒœì— ìˆê²Œ ëœë‹¤.**

### [1] ìì‹í”„ë¡œì„¸ìŠ¤(Child Process) & ë¶€ëª¨í”„ë¡œì„¸ìŠ¤(Parent Process)

- PID(Process Identification) : í”„ë¡œì„¸ìŠ¤ê°€ ì‹œì‘í•  ë•Œ í• ë‹¹ë°›ëŠ” í”„ë¡œì„¸ìŠ¤ ì‹ë³„ë²ˆí˜¸. /proc/ìˆ«ìë¡œ ëœ ë””ë ‰í† ë¦¬
- PPID(Parent Process Identification) : ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ ì‹ë³„ë²ˆí˜¸ (ì„œë¸Œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰ì‹œí‚¨ í”„ë¡œì„¸ìŠ¤)

```bash
# ps
 PID TTY          TIME CMD
 7321 pts/3    00:00:00 bash
# bash 
# ps -f            /* ì „ì²´ì ì¸ ì •ë³´ ls -l ì˜µì…˜ê³¼ ë¹„ìŠ·í•œ ì—­í•  */
UID        PID  PPID  C STIME TTY          TIME CMD
root      7321  7319  0 01:19 pts/3    00:00:00 -bash
root      7354  7321  0 01:19 pts/3    00:00:00 bash
--------------------------------------------------------------
PID:    í˜„ì¬ ê°€ì§€ê³ ìˆëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ë²ˆí˜¸
PPID:   ìƒìœ„ í”„ë¡œì„¸ìŠ¤ (ìµœìƒìœ„: systemd)
--------------------------------------------------------------

PID=7321
----------+
          |
          | PID=7354, PPID=7321
          +----------------------

# ps -ef | more
UID         PID   PPID  C STIME TTY          TIME CMD
root          1      0  0 19:33 ?        00:00:02 /usr/lib/systemd/**systemd** --switched-root --system --deserialize 22
root          2      0  0 19:33 ?        00:00:00 [kthreadd]
root          4      2  0 19:33 ?        00:00:00 [kworker/0:0H]
root          6      2  0 19:33 ?        00:00:00 [ksoftirqd/0]
root          7      2  0 19:33 ?        00:00:00 [migration/0]
root          8      2  0 19:33 ?        00:00:00 [rcu_bh]
root          9      2  0 19:33 ?        00:00:00 [rcu_sched]
root         10      2  0 19:33 ?        00:00:00 [lru-add-drain]
root         11      2  0 19:33 ?        00:00:00 [watchdog/0]
root         12      2  0 19:33 ?        00:00:00 [watchdog/1]

(ps -ef ëª…ë ¹ì–´ ì¶œë ¥ ê²°ê³¼ í•´ì„)
----------------------------------------------------------------------------
UID,   í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰ì‹œí‚¨ ì‚¬ìš©ì, í”„ë¡œì„¸ìŠ¤ì˜ ì£¼ì¸ 
PID,   í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””, í”„ë¡œì„¸ìŠ¤ ì‹ë³„ ë²ˆí˜¸
PPID,  ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””
C,     í˜„ì¬ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í•„ë“œ
STIME(Start Time), í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì‹œì‘ ì‹œê°„
TTY,   ì œì–´ í„°ë¯¸ë„, í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ëœ í„°ë¯¸ë„ (?: ë°±ê·¸ë¼ìš´ë“œ ì‹œìŠ¤í…œ, ?ê°€ ì•„ë‹Œ ê²½ìš°: ì–´ë–¤ í„°ë‹ˆë„ì— ë¬¼ë ¤ìˆë‹¤.)   
TIME,  CPU ì‚¬ìš© ëˆ„ì  ì‹œê°„
CMD,   ëª…ë ¹ì–´(ì˜µì…˜ + ì¸ì í¬í•¨)
----------------------------------------------------------------------------
```

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/08096a77-bd01-4710-9cbb-738917c61373/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/08096a77-bd01-4710-9cbb-738917c61373/Untitled.png)

[ì°¸ê³ ] ë°ëª¬(Daemon)ì˜ ì •ì˜

```bash
Deamon ì´ë€?

ì‹œìŠ¤í…œ(System)ì„ ìœ„í•´ ë˜ëŠ” ì„œë¹„ìŠ¤(Service)ë¥¼ ìœ„í•´ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë™ì‘í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì´ë‹¤.
ì»¤ë„ìƒì—ì„œ ë°±ê·¸ë¼ìš´ë“œ ëª¨ë“œë¡œ ì‘ë™í•˜ì—¬ ë¹„í™œì„±í™” ìƒíƒœì—ì„œ ìš”ì²­ì´ ìˆì„ ë•Œë§Œ ë™ì‘í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ë§í•œë‹¤. ì»¤ë„ìƒì— ë°±ê·¸ë¼ìš´ë“œ ëª¨ë“œë¡œ ì‹¤í–‰ë˜ì–´ ì‘ë™í•˜ì§€ ì•Šê³  ìˆì„ ë•ŒëŠ” CPUì— ë¶€í•˜ë¥¼ ì£¼ì§€ ì•Šì§€ë§Œ ë©”ëª¨ë¦¬ì˜ ê³µê°„ì€ ì°¨ì§€í•˜ê³  ìˆìœ¼ë¯€ë¡œ ë°ëª¬ì´ ì»¤ë„ìƒì— ë§ì´ ì¡´ì¬í•œë‹¤ë©´ ì‹œìŠ¤í…œì˜ ìì›ì„ ë§ì´ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.

EX) ì›¹ ë°ëª¬     ----> httpd      service, systemd 
    ë©”ì¼ ë°ëª¬   ----> sendmail
    ftp ë°ëª¬    ----> vsftpd
    ------------------------
    telnet ë°ëª¬ ----> xinetd , socket 

ë°ëª¬, ì„œë¹„ìŠ¤, ë°±ê·¸ë¼ìš´ë“œ í”„ë¡œì„¸ìŠ¤ <- ì˜ë¯¸ëŠ” ë˜‘ê°™ë‹¤. ì‚¬ìš© ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ëŠ” ë…€ì„ë“¤. ë³´í†µ ì„œë¹„ìŠ¤ë¼ê³  í•œë‹¤.
```

## í”„ë¡œì„¸ìŠ¤ì˜ ì •ë³´ (Process Information)

### [1] í”„ë¡œì„¸ìŠ¤ ì •ë³´ê°€ ì¡´ì¬í•˜ëŠ” ë””ë ‰í† ë¦¬

/proc ë¼ëŠ” ë””ë ‰í† ë¦¬ì— ê° í”„ë¡œì„¸ìŠ¤ì— í•´ë‹¹ë˜ëŠ” PIDë²ˆí˜¸ë¡œ ë””ë ‰í† ë¦¬ë“¤ì´ ìˆë‹¤.

/proc ë¼ëŠ” ë””ë ‰í† ë¦¬ëŠ” **ì»¤ë„ ë©”ëª¨ë¦¬ë¥¼ ë§ˆìš´íŠ¸** í•œ ê²ƒì´ë‹¤.  (í˜„ì¬ ë¶€íŒ…ì¤‘ì— ìˆëŠ” ë©”ëª¨ë¦¬ì— ì—°ê²°)

```bash
# ls /proc
1     2525  3065  3780  4103  4330  4431  6165         filesystems  net
10    2526  3224  3793  4108  4334  4443  635          fs           partitions
11    2527  3250  3794  4109  4335  4476  6361         ide          schedstat
12    2528  3278  3802  4110  4337  4478  658          interrupts   scsi
13    2562  3541  3808  4111  4355  4480  689          iomem        self
14    2564  3543  3817  4112  4359  4530  7            ioports      slabinfo
15    2566  3565  3842  4115  4361  5     8            irq          stat
16    2568  3569  3870  4116  4365  507   9            kallsyms     swaps
17    2570  3579  3887  4209  4368  572   acpi         kcore        sys
18    26    3590  3892  4211  4370  573   asound       key-users    sysrq-trigger
19    27    3619  3919  4212  4371  579   buddyinfo    keys         sysvipc
1932  28    3620  3937  4236  4378  580   bus          kmsg         tty
196   283   3621  3945  4238  4391  581   cmdline      loadavg      uptime
197   284   3622  3955  4254  4396  582   cpuinfo      locks        version
198   285   3631  3964  4286  4401  583   crypto       mdstat       vmcore
199   286   3655  3997  4288  4406  5877  devices      meminfo      vmmemctl
2     287   3677  4     4314  4408  599   diskstats    misc         vmstat
202   288   3696  4006  4316  4423  6     dma          modules      zoneinfo
204   289   3702  4014  4322  4427  6159  driver       mounts
25    29    3732  4041  4323  4428  6163  execdomains  mpt
2524  3     3770  4042  4328  4430  6164  fb           mtrr
# sleep 600 &
[1] 6180
# ps
 PID TTY          TIME CMD
 6165 pts/1    00:00:00 bash
 6180 pts/1    00:00:00 gedit
# ls -ld /proc/6180
dr-xr-xr-x 5 root root 0 Jun 18 14:21 /proc/6180
		# ls -l /proc/6180 
		# file /proc/6180/*
-> gedit íˆ´ì„ ì¢…ë£Œ

# ls -ld /proc/6180
ls: /proc/6180: No such file or directory
```

# í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬

- **í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ â­**

    ```bash
    fg ) # sleep 300
    bg ) # sleep 300 &
    ```

- **í”„ë¡œì„¸ìŠ¤ í™•ì¸ â­**

    ```bash
    # ps â€“ef | grep xinetd
    # ps aux | grep xinetd
    ```

- **í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ**

    ```bash
    # kill â€“[1|2|9|15] PID
    # killall httpd
    ```

---

## [1] í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ (ë°±ê·¸ë¼ìš´ë“œì™€ í¬ê·¸ë¼ìš´ë“œ ê´€ë¦¬ - &, bg, fg, jobs)

ì‰˜ í”„ë¡¬í”„íŠ¸ì— ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì„œ í¬ê·¸ë¼ìš´ë“œ ìƒíƒœ($ cat > testfile)ë¡œ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ì‹œí‚´. ê·¸ **í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ì…¸ í”„ë¡¬í”„íŠ¸ë¥¼ ë³¼ ìˆ˜ ì—†ë‹¤.** <Ctrl + D>ë¡œ í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œ ë˜ì–´ì•¼ ì‰˜í”„ë¡¬í”„íŠ¸ ìƒíƒœë¡œ ëŒì•„ì˜¤ê²Œ ëœë‹¤. ë°±ê·¸ë¼ìš´ë“œëŠ” ëª…ë ¹í–‰ ëì— &(ì•°í¼ìƒŒë“œ)ë¥¼ ë¶™ì—¬ì„œ ì‚¬ìš©í•˜ë©´ ì‰˜ í”„ë¡¬í”„íŠ¸ê°€ ë–¨ì–´ì§€ê³  ëŒ€ì‹  í”„ë¡œì„¸ìŠ¤ëŠ” ì‚¬ìš©ìê°€ ë³´ì§€ ì•ŠëŠ” ìƒíƒœë¡œ ì‹¤í–‰ëœë‹¤.

```bash
# cat

ls
ls
cat
cat
init -
init -
init 0
init 0

^C
```

ë°±ê·¸ë¼ìš´ë“œ í”„ë¡œì„¸ìŠ¤ëŠ” $ bg ëª…ë ¹ì–´ë¡œ í™•ì¸ê°€ëŠ¥ í•˜ê³  $ fg ëª…ë ¹ì–´ë¡œ í¬ê·¸ë¼ìš´ë“œ ì „í™˜ì´ ê°€ëŠ¥í•˜ë‹¤. ë°˜ëŒ€ë¡œ í•˜ëŠ” ë°©ë²•ì€ í¬ê·¸ë¼ìš´ë“œì—ì„œ ëŒì•„ê°€ëŠ” ì¤‘ì— <Ctrl+Z> ìœ¼ë¡œ ë©ˆì¶”ê³  $ bg ëª…ë ¹ì„ ë‚´ë¦¬ë©´ ëœë‹¤.

---

ê¸°ì¤€ : ì‰˜

ë°±ê·¸ë¼ìš´ë“œ í”„ë¡œì„¸ìŠ¤ : ì‰˜ì„ ì ìœ í•˜ì§€ ì•Šê³  í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰. í„°ë¯¸ë„ì´ ì œí•œì ì¸ í™˜ê²½ì—ì„œ ì—¬ëŸ¬ê°€ì§€ë¥¼ ì‹¤í–‰í•´ì•¼ í•˜ëŠ” ê²½ìš° ì‚¬ìš©í•œë‹¤.

```bash
# CMD &
í˜•íƒœë¡œ ì‹¤í–‰
```

í¬ê·¸ë¼ìš´ë“œ í”„ë¡œì„¸ìŠ¤ : ì‰˜ì„ ì ìœ í•˜ë©´ì„œ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰. ì¢…ë£Œë  ë•Œ ê¹Œì§€ ì‰˜ì—ì„  ì‘ë‹µí•˜ì§€ ì•ŠëŠ”ë‹¤.

```bash
# CMD
```

---

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8fd7f85e-4d65-41a1-9dbe-8d659f4b5372/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8fd7f85e-4d65-41a1-9dbe-8d659f4b5372/Untitled.png)

(í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ëŠ” í˜•íƒœ)

```bash
(fg) # ls (# gedit )
(bg) # ls & (# gedit &)
```

```bash
(fg í˜•íƒœë¡œ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ë©´) ì‰˜ì„ ì ìœ í•´ì„œ ì‚¬ìš©
# ps
 PID TTY          TIME CMD
 8711 pts/1    00:00:00 bash
# sleep 600 
-> ëª…ë ¹ì–´ ì°½ìœ¼ë¡œ ëŒì•„ì™€ì„œ "# ls" ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•´ë„ ëª…ë ¹ì–´ê°€ ì¶œë ¥ê²°ê³¼ê°€ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.
-> ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤(bash)ê°€ ì¢…ë£Œë˜ë©´ ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œëœë‹¤.

(bg í˜•íƒœë¡œ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ë©´) ì‰˜ì„ ì ìœ í•˜ì§€ì•Šê³  ì‚¬ìš©
# ps
 PID TTY          TIME CMD
 8711 pts/1    00:00:00 bash
# gedit & 
-> ëª…ë ¹ì–´ ì°½ìœ¼ë¡œ ëŒì•„ì™€ì„œ "# ls" ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ì´ ëœë‹¤.
-> ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤(bash)ê°€ ì¢…ë¡œë˜ì—ˆë‹¤ê³  í•´ì„œ ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ì§€ ì•ŠëŠ”ë‹¤.(# exit ëª…ë ¹ì–´ ì‚¬ìš©)
```

[ì°¸ê³ ] screen ëª…ë ¹ì–´ (ë¹„ìŠ·í•œ tmux ëª…ë ¹ì–´)

```bash
# dnf -y install epel-release
# dnf -y install screen
# dnf -y install tmux

screen # ê¸°ë³¸ ì„¸ì…˜ ìƒì„±í•˜ê¸°
â˜… screen -S name # ìƒì„±í•  ì„¸ì…˜ì˜ ì´ë¦„. ì´ë¦„ì€ ë‹¤ì‹œ ì„¸ì…˜ì— ì—°ê²°(attach)í• ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
â˜… Ctrl-a d # í˜„ì¬ screen ì„¸ì…˜ì„ ëŠìŠµë‹ˆë‹¤. 
screen -d SCREENID # command í™”ë©´ì´ ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰ë ë•Œ, ì›ê²© ë¶„ë¦¬(detach)
â˜… screen -ls # ê¸°ì¡´ì˜ screen sessionsë“¤ì˜ ëª¨ë“  ëª©ë¡ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
â˜… screen -r # ê¸°ë³¸ ì„¸ì…˜ì— ì—°ê²°í•©ë‹ˆë‹¤. ì´ ëª…ë ¹ì–´ëŠ” screen sessionì´ í•˜ë‚˜ì¼ë•Œë§Œ ì‘ë™í•©ë‹ˆë‹¤.
â˜… screen -r <SCREENID> # íŠ¹ì • screen sessionì— ì—°ê²°
screen -r name # íŠ¹ì • ì„¸ì…˜ì— ì—°ê²°(screen ì„¸ì…˜ì„ ë§Œë“œëŠ” ë™ì•ˆ ì§€ì •ëœ ê³ ìœ ì˜ ì´ë¦„)
screen -X -S SCREENID quit
â˜… screen -S SCREENID -X quit

tmux ëª…ë ¹ì–´ë„ ê°™ì´ ì•Œì•„ë‘ì
```

### [EX1] í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì‹¤ìŠµ

```bash
# cat & <ENTER> /* ë°±ê·¸ë¼ìš´ë“œ ìƒíƒœë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰ */
[1] 7827
	[1]  : ì¡ ì•„ì´ë””(Job ID)
	7827 : í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””(PID)
# ps -ef | grep cat
root      7827  7601  0 02:46 pts/3    00:00:00 cat
root     27281     1  0 Jan26 ?        00:00:00 /usr/libexec/notification-area-applet --oaf-activate-ii d=OAFIID:GNOME_NotificationAreaApplet_Factory --oaf-ior-fd=21

[1]+  Stopped                 cat
# ls -ld /proc/7827
dr-xr-xr-x 5 root root 0  1ì›” 27 02:46 /proc/7827/
# fg         (# fg 1)
cat
<CTRL + C>                                  /* í¬ê·¸ë¼ìš´ë“œ ìƒíƒœì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œì‹œí‚´ */
# ls -ld /proc/7827 /* ì§€ì›Œì§„ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. */
ls: /proc/7827/: ê·¸ëŸ° íŒŒì¼ì´ë‚˜ ë””ë ‰í† ë¦¬ê°€ ì—†ìŒ
```

ë°±ê·¸ë¼ìš´ë“œ ìƒíƒœì¸ ê²ƒì„ í¬ê·¸ë¼ìš´ë“œë¡œ ë³´ë‚´ëŠ” ëª…ë ¹ì–´

```bash
# fg [ì¡ ì•„ì´ë””]   /* foregroundë¡œ ì‹¤í–‰ */
# bg [ì¡ ì•„ì´ë””]   /* backgroundë¡œ ì‹¤í–‰ */
ctrl + z > backgroundë¡œ ë³´ë‚´ê¸° (stopìƒíƒœë¡œ ë³´ëƒ„)
```

### [EX2] í¬ê·¸ë¼ìš´ë“œ & ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰ ì‹¤ìŠµ

```bash
# sleep 500 /* í¬ê·¸ë¼ìš´ë“œ ìƒíƒœë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰ */
[1]+  Stopped                 sleep 500
<CTRL + Z>
# sleep 600
[2]+  Stopped                 sleep 600
<CTRL + Z>
# sleep 700
[3]+  Stopped                 sleep 700
<CTRL + Z>
# jobs
[1]   Stopped                 sleep 500
[2]-  Stopped                 sleep 600
[3]+  Stopped                 sleep 700
# bg 1/* ì¼ì‹œì¤‘ì§€ëœ í¬ê·¸ë¼ìš´ë“œ ì‘ì—…ì„ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ */
[1] sleep 500 &
# bg 2
[2]- sleep 600 &
# bg 3
[3]+ sleep 700 &
# jobs
[1]   Running                 sleep 500 &
[2]-  Running                 sleep 600 &
[3]+  Running                 sleep 700 &
# fg 1
sleep 500
<CTRL + C>
# fg 2
sleep 600
<CTRL + C>
# fg 3
sleep 700
<CTRL + C>
# jobs 
#
```

### [2] í”„ë¡œì„¸ìŠ¤ ì •ë³´ í™•ì¸

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# ps               /* í˜„ì¬ í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰ëœ í”„ë¡œì„¸ìŠ¤ì˜ ê°„ëµí•œ ì •ë³´ í™•ì¸ */
# pstree           /* íŠ¸ë¦¬ êµ¬ì¡°ë¡œ í™•ì¸ */
# ps -l            /* í˜„ì¬ í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰ëœ í”„ë¡œì„¸ìŠ¤ì˜ ìì„¸í•œ ì •ë³´ í™•ì¸ */
# ps -a            /* ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ê°„ëµí•œ ì •ë³´ í™•ì¸ */
# ps a             /* ì»¤ë§¨ë“œê°€ í’€í¬ë§·ìœ¼ë¡œ ë‚˜ì˜¨ë‹¤. */
# ps -U <ì‚¬ìš©ìëª…> (# ps -U user01, # ps -U user01,user02,user03)
                   /* íŠ¹ì •í•œ ì‚¬ìš©ìê°€ ì‹¤í–‰ì‹œí‚¨ í”„ë¡œì„¸ìŠ¤ì˜ ê°„ëµí•œ ì •ë³´ í™•ì¸ */
# ps -t pts/5      /* íŠ¹ì •í•œ í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰ì‹œí‚¨ í”„ë¡œì„¸ìŠ¤ì˜ ê°„ëµí•œ ì •ë³´ í™•ì¸ */

# ps aux | grep xinetd    (# ps -ef | grep xinetd) 
# ps -aux | grep xinetd
```

[ëª…ë ¹ì–´ ì˜µì…˜]

**ì˜µì…˜ : ë‚´ìš©**

**-e : ëª¨ë“  í”„ë¡œì„¸ìŠ¤ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¶œë ¥í•œë‹¤.
-f : í”„ë¡œì„¸ìŠ¤ ì‹œì‘ì‹œê°„, í”„ë¡œì„¸ìŠ¤ì˜ ë¶€ëª¨ ID, ê·¸ í”„ë¡œì„¸ìŠ¤ì— ê´€ë ¨ëœ ì‚¬ìš©ì ID, ëª…ë ¹ ì´ë¦„ê³¼ ê°€ëŠ¥í•œ ë§¤ê°œë³€ìˆ˜ë“± ëª¨ë“  ì •ë³´ë¥¼ ì¶œë ¥í•œë‹¤. (full format)**
-l : ìì„¸í•œ ì •ë³´ ë³´ê¸°
-p (pid) : ì§€ì •ëœ í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ì¶œë ¥í•œë‹¤.
-t (tty) : ì§€ì •ëœ í„°ë¯¸ë„ì— ì—°ê´€ëœ í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ì¶œë ¥í•œë‹¤.
-u (uid) : ì§€ì •ëœ ì‚¬ìš©ìì— ì—°ê´€ëœ í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ì¶œë ¥í•œë‹¤.
a : ë‹¤ë¥¸ ì‚¬ìš©ìì˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœë„ í‘œì‹œëœë‹¤.
x : í™”ë©´ì— ë³´ì´ì§€ ì•ŠëŠ” í”„ë¡œì„¸ìŠ¤ê¹Œì§€ ëª¨ë‘ í‘œì‹œ

---

**â­ê¸°ì–µí•´ì•¼ ë  ì˜µì…˜â­**

- aux
- -ef
- auxfww

### [EX1] ps ëª…ë ¹ì–´ ì‹¤ìŠµ

```bash
# ps /* ìì‹ ì„ í¬í•¨í•˜ì—¬ ìì‹ ì´ ì‹¤í–‰í•œ í”„ë¡œì„¸ìŠ¤ë¥¼ í™•ì¸ */
 PID TTY          TIME CMD
 6165 pts/1    00:00:00 bash
# ps -U root /* root ì‚¬ìš©ìê°€ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ ì •ë³´ë¥¼ ë³´ì—¬ì¤Œ */
PID TTY          TIME CMD
    1 ?        00:00:00 init
    2 ?        00:00:00 migration/0
    3 ?        00:00:00 ksoftirqd/0
    4 ?        00:00:00 watchdog/0
    5 ?        00:00:00 events/0
..... (ì¤‘ëµ) .....
# ps /* í˜„ì¬ í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰ëœ í”„ë¡œì„¸ìŠ¤ì˜ ê°„ëµí•œ ì •ë³´ í™•ì¸ */
 PID TTY          TIME CMD
 7601 pts/3    00:00:00 bash
 7714 pts/3    00:00:00 ps
# ps -t pts/3 /* í„°ë¯¸ë„ì°½ ë²ˆí˜¸ë¥¼ í™•ì¸ í›„ì— í•´ë‹¹ í„°ë¯¸ë„ì˜ í”„ë¡œì„¸ìŠ¤ ì •ë³´ë¥¼ í™•ì¸ */
 PID TTY          TIME CMD
 7601 pts/3    00:00:00 bash
 7717 pts/3    00:00:00 ps
# ps a /* ë‹¤ë¥¸ ì‚¬ìš©ìì˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœë„ í‘œì‹œ */
 PID TTY      STAT   TIME COMMAND
 2450 tty1     Ss+    0:00 /sbin/mingetty tty1
 2453 tty2     Ss+    0:00 /sbin/mingetty tty2
 2454 tty3     Ss+    0:00 /sbin/mingetty tty3
 2455 tty4     Ss+    0:00 /sbin/mingetty tty4
 2456 tty5     Ss+    0:00 /sbin/mingetty tty5
 2457 tty6     Ss+    0:00 /sbin/mingetty tty6
 2562 tty7     Ss+    0:11 /usr/bin/Xorg :0 -br -audit 0 -auth /var/gdm/:0.Xauth
 7563 pts/1    Ss+    0:00 -bash
 7601 pts/3    Ss     0:00 -bash
 7731 pts/3    R+     0:00 ps a
27308 pts/2    Ss+    0:00 bash
# ps -ef | less /* ëª¨ë“  í”„ë¡œì„¸ìŠ¤ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¶œë ¥í•˜ë©´ì„œ ëª¨ë“  ì •ë³´ë¥¼ í•¨ê»˜ ì¶œë ¥ í•¨ */
UID        PID  PPID  C STIME TTY          TIME CMD
root         1     0  0 Jan26 ?        00:00:00 init [5]
root         2     1  0 Jan26 ?        00:00:00 [migration/0]
root         3     1  0 Jan26 ?        00:00:00 [ksoftirqd/0]
root         4     1  0 Jan26 ?        00:00:00 [watchdog/0]
root         5     1  0 Jan26 ?        00:00:00 [events/0]
# ps aux | less    /* a : ë‹¤ë¥¸ ì‚¬ìš©ìì˜ í”„ë¡œì„¸ìŠ¤ ìƒíƒœë„ í‘œì‹œ
							        x : í™”ë©´ì— ë³´ì´ì§€ ì•ŠëŠ” í”„ë¡œì„¸ìŠ¤ê¹Œì§€ ëª¨ë‘ í‘œì‹œ
							        u : í”„ë¡œì„¸ìŠ¤ë¥¼ ì‚¬ìš©í•œ ì‚¬ìš©ìì™€ ì‹¤í–‰ ì‹œê°„ê¹Œì§€ í‘œì‹œ */
USER       PID %CPU  %MEM   VSZ   RSS TTY    STAT   START   TIME COMMAND
root         1  0.0  0.1   2068   576 ?        Ss   Jan26   0:00 init [5]       
root         2  0.0  0.0      0     0 ?        S<   Jan26   0:00 [migration/0]
root         3  0.0  0.0      0     0 ?        SN   Jan26   0:00 [ksoftirqd/0]
root         4  0.0  0.0      0     0 ?        S<   Jan26   0:00 [watchdog/0]
root         5  0.0  0.0      0     0 ?        S<   Jan26   0:00 [events/0]
root         6  0.0  0.0      0     0 ?        S<   Jan26   0:00 [khelper]
root         7  0.0  0.0      0     0 ?        S<   Jan26   0:00 [kthread]
root        10  0.0  0.0      0     0 ?        S<   Jan26   0:01 [kblockd/0]
[ì°¸ê³ ] ps auxë¥¼ í†µí•´ ëª…ë ¹ì–´ ì¶œë ¥ì‹œ ë‚˜ì˜¤ëŠ” í—¤ë”ë¶€ë¶„ ì„¤ëª…
userëŠ” í”„ë¡œì„¸ìŠ¤ ì†Œìœ ìì˜ ì´ë¦„, ( u ì˜µì…˜ )
PIDëŠ” í”„ë¡œì„¸ìŠ¤ ì‹ë³„ì ë²ˆí˜¸
%CPU : ë§ˆì§€ë§‰ 1ë¶„ ë™ì•ˆ í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•œ CPU ì ìœ ìœ¨ ( u ì˜µì…˜ )
%MEN : ë§ˆì§€ë§‰ 1ë¶„ ë™ì•ˆ í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•œ ë©”ëª¨ë¦¬ì˜ ì ìœ ìœ¨ ( u,v ì˜µì…˜ )
       -u ì˜µì…˜ìœ¼ë¡œ ì‚¬ìš©ìì˜ IDë‚˜ ì´ë¦„ì„ ì§€ì •í•˜ì—¬ ì§€ì •í•œ ì‚¬ìš©ìì˜ í”„ë¡œì„¸ìŠ¤ë§Œì„ ì‚´í´ ë³¼ìˆ˜ ìˆë‹¤.
VSZ  : ê°€ìƒ ë©”ëª¨ë¦¬ì— ì ì¬ëœ í”„ë¡œì„¸ìŠ¤ì˜ kbë‹¨ìœ„ í¬ê¸°
RSS  : í”„ë¡œì„¸ìŠ¤ì˜ ì‹¤ì œ ë©”ëª¨ë¦¬(ë‚´ì¬ ì„¸íŠ¸) í¬ê¸°(KB). ìŠ¤ì™€í•‘ì´ ë˜ì§€ ì•Šì€ ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ê°€ í•´ë‹¹ taskì— ì“°ì´ê³  ìˆëŠ” ì–‘ì„ ì˜ë¯¸
TIME : ì‹¤ì œ í”„ë¡œì„¸ìŠ¤ê°€ í™œë™í•œ ì‹œê°„
STARTëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ì‹œì‘ëœ ì‹œê°„

STAT í•„ë“œì˜ ìƒíƒœ
-D : ë””ìŠ¤í¬ ì…ì¶œë ¥ ëŒ€ê¸° ìƒíƒœë¡œ interruptsë¥¼ ê±¸ ìˆ˜ ì—†ëŠ” ìƒíƒœ
-R : ì‹¤í–‰ì¤‘
-S : ì§§ì€ sleep ìƒíƒœ
-T : ì •ì§€ ìƒíƒœ
â˜… -Z : ì¢€ë¹„ ìƒíƒœ â˜…
-W : ìƒì£¼í•œ í˜ì´ì§€ê°€ ì—†ëŠ” í”„ë¡œì„¸ìŠ¤
-< : ë†’ì€ ìš°ì„ ê¶Œ í”„ë¡œì„¸ìŠ¤
-N : ë‚®ì€ ìš°ì„ ê¶Œ í”„ë¡œì„¸ìŠ¤
-L : í˜ì´ì§€ê°€ ë½ì´ ê±¸ë¦° ìƒíƒœ

# ps -euf
# ps euf
```

## í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ ëª…ë ¹ì–´(# kill )

ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°•ì œë¡œ ì¢…ë£Œ(ì¸í„°ëŸ½íŠ¸)ì‹œí‚¬ ìˆ˜ ìˆì§€ë§Œ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ëŠ” ì¢…ë£Œì‹œí‚¤ì§€ ëª»í•˜ê²Œ ëœë‹¤. ì´ë•Œ kill ëª…ë ¹ì„ ì‚¬ìš©í•´ì„œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œì‹œí‚¨ë‹¤ë‹¤. kill ëª…ë ¹ì€ ì‚¬ìš©ìê°€ í”„ë¡œì„¸ìŠ¤ì— ì¼ì •í•œ ì‹ í˜¸ë¥¼ ë³´ë‚´ì„œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œì‹œí‚¨ë‹¤, kill -l ëª…ë ¹ì„ ì‚¬ìš©í•˜ë©´ ì‹ í˜¸ì˜ ì¢…ë¥˜ë¥¼ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# kill PID           (# kill -15 PID, # kill -TERM PID)
# kill PID PID PID
# kill -9 PID        (# kill -KILL PID)
# kill -2 PID        (# kill â€“INT PID)
# kill -l
```

â–  ì‹œê·¸ë„(Signal)? í”„ë¡œì„¸ìŠ¤ê°€ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì—ê²Œ ë³´ë‚´ëŠ” ë¹„ë™ê¸°ì  ì•Œë¦¼ ë©”ì„¸ì§€

[ì°¸ê³ ] ì¼ë°˜ì ìœ¼ë¡œ ë§ì´ ì“°ì´ëŠ” ì‹œê·¸ë„(Signal) 4ê°œë§Œ ì™¸ìš°ì

```bash
ì‹œê·¸ë„ ë²ˆí˜¸ ì‹œê·¸ë„ ì´ë¦„ ì„¤  ëª…
1        SIGHUP   í”„ë¡œì„¸ìŠ¤ ì¬ì‹œì‘(HangUp) (EX: # kill  -1 450)
2        SIGINT   ì¸í„°ëŸ½íŠ¸(Interrupt, <Ctrl + C>) (EX: # kill  â€“2 450)
9        SIGKILL  ê°•ì œ ì¢…ë£Œ(force exit signal) (EX: # kill  -9 450)
15       SIGTERM  ì •ìƒ ì¢…ë£Œ(exit), ê¸°ë³¸ ì‹œê·¸ë„ (EX: # kill -15 450)
kill ëª…ë ¹ì— ì•„ë¬´ ì‹ í˜¸ë„ ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ 15ë²ˆ ì‹ í˜¸ì¸ SIGTERMì„ ë³´ë‚¸ë‹¤. (ê¸°ë³¸ê°’)
```

```bash
# man 7 signal
..... (ì¤‘ëµ) .....
       Signal     Value     Action   Comment
       -------------------------------------------------------------------------
       SIGHUP        1       Term    Hangup detected on controlling terminal
                                     or death of controlling process
       SIGINT        2       Term    Interrupt from keyboard
       SIGQUIT       3       Core    Quit from keyboard
       SIGILL        4       Core    Illegal Instruction
       SIGABRT       6       Core    Abort signal from abort(3)
       SIGFPE        8       Core    Floating point exception
       SIGKILL       9       Term    Kill signal
       SIGSEGV      11       Core    Invalid memory reference
       SIGPIPE      13       Term    Broken pipe: write to pipe with no readers
       SIGALRM      14       Term    Timer signal from alarm(2)
       SIGTERM      15       Term    Termination signal
       SIGUSR1   30,10,16    Term    User-defined signal 1
       SIGUSR2   31,12,17    Term    User-defined signal 2
       SIGCHLD   20,17,18    Ign     Child stopped or terminated
       SIGCONT   19,18,25    Cont    Continue if stopped
       SIGSTOP   17,19,23    Stop    Stop process
       SIGTSTP   18,20,24    Stop    Stop typed at tty
       SIGTTIN   21,21,26    Stop    tty input for background process
..... (ì¤‘ëµ) .....
```

```bash
# kill -l
1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL
 5) SIGTRAP      6) SIGABRT      7) SIGBUS       8) SIGFPE
 9) SIGKILL     10) SIGUSR1     11) SIGSEGV     12) SIGUSR2
13) SIGPIPE     14) SIGALRM     15) SIGTERM     16) SIGSTKFLT
17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP
21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU
25) SIGXFSZ     26) SIGVTALRM   27) SIGPROF     28) SIGWINCH
29) SIGIO       30) SIGPWR      31) SIGSYS      34) SIGRTMIN
35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3  38) SIGRTMIN+4
39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8
43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12
47) SIGRTMIN+13 48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14
51) SIGRTMAX-13 52) SIGRTMAX-12 53) SIGRTMAX-11 54) SIGRTMAX-10
55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7  58) SIGRTMAX-6
59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2
63) SIGRTMAX-1  64) SIGRTMAX
```

### [EX1] kill ëª…ë ¹ì–´ ì‹¤ìŠµ

```bash
# ps -ef | grep postfix
root      23476      1  0 06:58 ?        00:00:00 /usr/libexec/postfix/master -w
postfix   23478  23476  0 06:58 ?        00:00:00 qmgr -l -t unix -u
postfix   71618  23476  0 19:30 ?        00:00:00 pickup -l -t unix -u
root      73004  72956  0 19:52 pts/4    00:00:00 grep --color=auto postfix
                                                 /var/spool/clientmqueue
# kill 23476 (# kill -15 23476, # kill -TERM 23476) 
# ps -ef | grep postfix
root      73074  72956  0 19:53 pts/4    00:00:00 grep --color=auto postfix
# systemctl restart postfix
# systemctl status postfix | grep -i active
   Active: active (running) since ìˆ˜ 2020-08-19 19:54:18 KST; 22s ago
# ps -ef | grep postfix
root      73191      1  0 19:54 ?        00:00:00 /usr/libexec/postfix/master -w
postfix   73192  73191  0 19:54 ?        00:00:00 pickup -l -t unix -u
postfix   73193  73191  0 19:54 ?        00:00:00 qmgr -l -t unix -u
root      73245  72956  0 19:55 pts/4    00:00:00 grep --color=auto postfix
# kill -9 73191  (# kill -KILL 7908)
	ì¼ë°˜ì ì¸ ìƒí™©ì—ì„œëŠ” -15 ì‹œê·¸ë„ê³¼ -9 ì‹œê·¸ë„ì— ì°¨ì´ê°€ ì—†ë‹¤.
	ê°•ì œì¢…ë£Œ ìƒí™©ì´ ë‹¤ê°€ì™”ì„ëŒ€ëŠ” -15ë¡œ ì¥ì• ê°€ ë‚œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œí•˜ëŠ” ê²½ìš° ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ëŸ¬í•œ ê²½ìš°ì—ëŠ” ì–´ì©”ìˆ˜ ì—†ì´ -9 ì‹œê·¸ë„ë¡œ ì¢…ë£Œí•´ì•¼í•œë‹¤.
# ps -ef | grep postfix
root      73294  72956  0 19:55 pts/4    00:00:00 grep --color=auto postfix
# systemctl restart postfix
# ps -ef | grep postfix
root      73446      1  0 19:56 ?        00:00:00 /usr/libexec/postfix/master -w
postfix   73447  73446  0 19:56 ?        00:00:00 pickup -l -t unix -u
postfix   73448  73446  0 19:56 ?        00:00:00 qmgr -l -t unix -u
root      73468  72956  0 19:57 pts/4    00:00:00 grep --color=auto postfix
# kill -1 73446
# ps -ef | grep postfix
root      73446      1  0 19:56 ?        00:00:00 /usr/libexec/postfix/master -w
postfix   73475  73446  0 19:57 ?        00:00:00 pickup -l -t unix -u
postfix   73476  73446  0 19:57 ?        00:00:00 qmgr -l -t unix -u
root      73482  72956  0 19:57 pts/4    00:00:00 grep --color=auto postfix
```

[ì°¸ê³ ] kill & killall ëª…ë ¹ì–´

```bash
# kill PID 
# killall httpd
```

# í”„ë¡œì„¸ìŠ¤ ëª¨ë‹ˆí„°ë§

- **top**

    ```bash
    # top
    # top â€“u oracle
    # top â€“p [PID]
    ```

- **lsof**

    ```bash
    # lsof
    # lsof â€“I
    # lsof â€“p [PID]
    # lsof â€“c sendmail
    ```

---

## í”„ë¡œì„¸ìŠ¤ ëª¨ë‹ˆí„°ë§

ps ëª…ë ¹ì–´ëŠ” psë¥¼ ì…ë ¥í•œ ë‹¹ì‹œì˜ í”„ë¡œì„¸ìŠ¤ ìƒí™©ì„ ë³´ì—¬ì¤€ë‹¤. (ì‹¤ì‹œê°„ì´ ì•„ë‹ˆë‹¤)

ì‹¤ì‹œê°„ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœë¥¼ ë³´ê¸° ìœ„í•œ ëª…ë ¹ì–´

### [1] top ëª…ë ¹ (psì™€ ê°™ì€ ëª…ë ¹ì–´ - ì°¨ì´ì ? topì€ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§)

****[ì°¸ê³ ] ì„œë²„ì— ì ‘ì†í•˜ì—¬ ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§

```bash
[TERM1] (TUI) # top

[TERM2] (TUI) # tail -f /var/log/messages
```

ì‹¤ì‹œê°„ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœë‚˜ CPU, ë©”ëª¨ë¦¬, ì ‘ì†í•œ ì‚¬ìš©ìì˜ ìˆ˜ ë“±ì„ ì•Œ ìˆ˜ ìˆê²Œ ëœë‹¤. ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ì„ í™•ì¸í•˜ë ¤ í•  ë•Œ ë§ì´ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.

**ê¸°ë³¸ì„¤ì •**

- ëª…ë ¹ì–´ ìˆ˜í–‰ ì‹œê°„ ê°„ê²©(time interval)ì€ 3 ~ 4ì´ˆ
- CPU ì‚¬ìš©ëŸ‰ë³„ë¡œ ì •ë ¬(Sorting)

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# top 
# top -u oracle /* í•´ë‹¹ ì‚¬ìš©ìì˜ í”„ë¡œì„¸ìŠ¤ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ */
# top -p PID1,PID2,PID3/* í•´ë‹¹ ë²ˆí˜¸ì˜ í”„ë¡œì„¸ìŠ¤ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ */
# top â€“d [TIME]/* ìƒˆë¡œê³ ì¹¨ì˜ ì‹œê°„ì„ ë³€ê²½í•œë‹¤. */
```

### [EX1] top ëª…ë ¹ì–´ ê¸°ë³¸ ì‚¬ìš©ë°©ë²• ì‹¤ìŠµ

```bash
# top -h      (# top --help)
top: procps version 3.2.7
usage:  top -hv | -bcisSHM -d delay -n iterations [-u user | -U user] -p pid [,pid ...]
```

```bash
# top
top - 17:46:37 up  2:25,  4 users,  load average: 0.03, 0.03, 0.00
Tasks: 136 total,   1 running, 134 sleeping,   0 stopped,   1 zombie
Cpu(s):  2.0%us,  1.7%sy,  0.0%ni, 96.3%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   1035096k total,   718752k used,   316344k free,    68376k buffers
Swap:   522104k total,        0k used,   522104k free,   492140k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                     
 4203 root      16   0 84828  16m  11m S  2.7  1.6   0:09.65 gnome-terminal              
 3624 root      15   0 35972  10m 6360 S  0.7  1.1   0:16.60 Xorg                        
 3813 root      15   0 42812  10m 8520 S  0.2  1.1   0:01.10 vmware-user                 
    1 root      18   0  2072  616  532 S  0.0  0.1   0:01.26 init                        
    2 root      RT  -5     0    0    0 S  0.0  0.0   0:00.35 migration/0                 
    3 root      34  19     0    0    0 S  0.0  0.0   0:00.00 ksoftirqd/0                 
    4 root      RT  -5     0    0    0 S  0.0  0.0   0:00.00 watchdog/0                  
    5 root      RT  -5     0    0    0 S  0.0  0.0   0:00.15 migration/1                 
    6 root      36  19     0    0    0 S  0.0  0.0   0:00.00 ksoftirqd/1                 
    7 root      RT  -5     0    0    0 S  0.0  0.0   0:00.00 watchdog/1                  
    8 root      10  -5     0    0    0 S  0.0  0.0   0:00.03 events/0                    
    9 root      10  -5     0    0    0 S  0.0  0.0   0:00.00 events/1                    
   10 root      10  -5     0    0    0 S  0.0  0.0   0:00.01 khelper                     
   11 root      10  -5     0    0    0 S  0.0  0.0   0:00.00 kthread                     
   15 root      18  -5     0    0    0 S  0.0  0.0   0:00.03 kblockd/0                   
   16 root      10  -5     0    0    0 S  0.0  0.0   0:00.02 kblockd/1                   
   17 root      15  -5     0    0    0 S  0.0  0.0   0:00.00 kacpid                      
  183 root      11  -5     0    0    0 S  0.0  0.0   0:00.00 cqueue/0                    
  184 root      11  -5     0    0    0 S  0.0  0.0   0:00.00 cqueue/1                    
  187 root      10  -5     0    0    0 S  0.0  0.0   0:00.00 khubd                       
  189 root      10  -5     0    0    0 S  0.0  0.0   0:00.00 kseriod                     
  256 root      16   0     0    0    0 S  0.0  0.0   0:00.00 pdflush                     
  257 root      15   0     0    0    0 S  0.0  0.0   0:00.15 pdflush 
..... (ì¤‘ëµ) .....
========================
|  <----- 'h' ì…ë ¥     |
========================
Help for Interactive Commands - procps version 3.2.7
Window 1:Def: Cumulative mode Off.  System: Delay 3.0 secs; Secure mode Off.

  Z,B       Global: 'Z' change color mappings; 'B' disable/enable bold
  l,t,m     Toggle Summaries: 'l' load avg; 't' task/cpu stats; 'm' mem info
  1,I       Toggle SMP view: '1' single/separate states; 'I' Irix/Solaris mode

  f,o     . Fields/Columns: 'f' add or remove; 'o' change display order
  F or O  . Select sort field
  <,>     . Move sort field: '<' next col left; '>' next col right
  R,H     . Toggle: 'R' normal/reverse sort; 'H' show threads
  c,i,S   . Toggle: 'c' cmd name/line; 'i' idle tasks; 'S' cumulative time
  x,y     . Toggle highlights: 'x' sort field; 'y' running tasks
  z,b     . Toggle: 'z' color/mono; 'b' bold/reverse (only if 'x' or 'y')
  u       . Show specific user only
  n or #  . Set maximum tasks displayed

  k,r       Manipulate tasks: 'k' kill; 'r' renice
  d or s    Set update interval
  W         Write configuration file
  q         Quit
          ( commands shown with '.' require a visible task display window ) 
Press 'h' or '?' for help with Windows,
any other key to continue

PID to kill: <firedoxì˜ PIDë²ˆí˜¸ ì…ë ¥>
Kill PID 23846 with signal [15]: <9>
========================
| ì •ë ¬ ê¸°ì¤€ ë³€ê²½ : Fì…ë ¥|
========================
Current Sort Field:  K  for window 1:Def
Select sort field via field letter, type any other key to return

  a: PID        = Process Id              s: DATA       = Data+Stack size (kb)   not those in column display.  Thus,      t: SHR        = Shared Mem size (kb)   the TTY & WCHAN fields will violate      u: nFLT       = Page Fault count       strict ASCII collating sequence.         v: nDRT       = Dirty Pages count      (shame on you if WCHAN is chosen)
  f: GROUP      = Group Name              x: COMMAND    = Command name/line
  g: TTY        = Controlling Tty         y: WCHAN      = Sleeping in Function
  h: PR         = Priority                z: Flags      = Task Flags <sched.h>
  i: NI         = Nice value
  j: P          = Last used cpu (SMP)   Note1:
* K: %CPU       = CPU usage               If a selected sort field can't be
  l: TIME       = CPU Time                shown due to screen width or your
  m: TIME+      = CPU Time, hundredths    field order, the '<' and '>' keys
  n: %MEM       = Memory usage (RES)      will be unavailable until a field
  o: VIRT       = Virtual Image (kb)      within viewable range is chosen.
  p: SWAP       = Swapped size (kb)
  q: RES        = Resident size (kb)    Note2:
  r: CODE       = Code size (kb)          Field sorting uses internal values,
```

- (ì²« ë²ˆì§¸ ì¤„) ì‹œìŠ¤í…œì˜ í˜„ì¬ ì‹œê°„ê³¼ ì‹œìŠ¤í…œì´ ë¶€íŒ…ëœ í›„ ì‘ë™í•œ ì‹œê°„, í˜„ì¬ ì‚¬ìš©ì ìˆ˜ë¥¼ ë³´ì—¬ì£¼ë©°, load averageëŠ” CPU ë¡œë“œì˜ í‰ê·  ê°’ì„ ë³´ì—¬ì¤€ë‹¤. (1ë¶„ , 5ë¶„, 15ë¶„)
- (ë‘ ë²ˆì§¸ ì¤„) ì‹œìŠ¤í…œì— ë™ì‘ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœë¥¼ ë³´ì—¬ì¤€ë‹¤.
- (ì„¸ ë²ˆì§¸ ì¤„) CPUì˜ ìƒíƒœë¥¼ ë³´ì—¬ì¤€ë‹¤
- (ë„¤ ë²ˆì§¸ / ë‹¤ì„¯ ë²ˆì§¸ ì¤„) ì´ ì‚¬ìš© ê°€ëŠ¥ ë©”ëª¨ë¦¬, ì‚¬ìš©ëœ ë©”ëª¨ë¦¬, ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬, ê³µìœ  ë©”ëª¨ë¦¬, ë²„í¼ë¡œì‚¬ìš©ëœ ë©”ëª¨ë¦¬, ìŠ¤ì™‘ ë©”ëª¨ë¦¬ë“± ë©”ëª¨ë¦¬ì— ê´€í•œ ì •ë³´ë¥¼ ë³´ì—¬ì¤€ë‹¤. ê°ê°ì˜ ì‹œìŠ¤í…œ ìì›ì— ë”°ë¥¸ í”„ë¡œì„¸ìŠ¤ì˜ ì ìœ ìœ¨ì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

(top ëª…ë ¹ì–´ í•„ë“œ í•´ì„)

```bash
a: PID  --  Process Id
          The  task's  unique process ID, which periodically wraps, though never
          restarting at zero.

       b: PPID  --  Parent Process Pid
          The process ID of a task's parent.

       c: RUSER  --  Real User Name
          The real user name of the task's owner.

       d: UID  --  User Id
          The effective user ID of the task's owner.

       e: USER  --  User Name
          The effective user name of the task's owner.

       f: GROUP  --  Group Name
          The effective group name of the task's owner.

       g: TTY  --  Controlling Tty
          The name of the controlling terminal.   This  is  usually  the  device
          (serial port, pty, etc.) from which the process was started, and which
          it uses for input or output.  However, a task need not  be  associated
          with a terminal, in which case you'll see '?' displayed.

       h: PR  --  Priority
          The priority of the task.

       i: NI  --  Nice value
          The nice value of the task.  A negative nice value means higher prior-
          ity, whereas a positive nice value means lower priority.  Zero in this
          field  simply  means  priority  will  not be adjusted in determining a
          task's dispatchability.

       j: P  --  Last used CPU (SMP)
          A number representing the last used processor.  In a true SMP environ-
          ment this will likely change frequently since the kernel intentionally
          uses weak affinity.  Also, the very act of running top may break  this
          weak  affinity  and  cause  more  processes  to change CPUs more often
          (because of the extra demand for cpu time).

       k: %CPU  --  CPU usage
          The task's share of the elapsed CPU time since the last screen update,
          expressed  as  a percentage of total CPU time.  In a true SMP environ-
          ment, if 'Irix mode' is Off, top will operate in 'Solaris mode'  where
          a  task's  cpu usage will be divided by the total number of CPUs.  You
          toggle 'Irix/Solaris' modes with the 'I' interactive command.

       l: TIME  --  CPU Time
          Total CPU time the task has used since it started.   When  'Cumulative
          mode'  is On, each process is listed with the cpu time that it and its
          dead children has used.  You toggle 'Cumulative mode' with 'S',  which
          is  a  command-line  option  and  an interactive command.  See the 'S'
          interactive command for additional information regarding this mode.

       m: TIME+  --  CPU Time, hundredths
          The same as 'TIME', but reflecting more granularity through hundredths
          of a second.

       n: %MEM  --  Memory usage (RES)
          A task's currently used share of available physical memory.

       o: VIRT  --  Virtual Image (kb)
          The  total amount of virtual memory used by the task.  It includes all
          code, data and shared libraries plus pages that have been swapped out.
          (Note: you can define the STATSIZE=1 environment variable and the VIRT
          will be calculated from the /proc/#/state VmSize field.)

          VIRT = SWAP + RES.

       p: SWAP  --  Swapped size (kb)
          The swapped out portion of a task's total virtual memory image.

       q: RES  --  Resident size (kb)
          The non-swapped physical memory a task has used.

          RES = CODE + DATA.

       r: CODE  --  Code size (kb)
          The amount of physical memory devoted to executable code,  also  known
          as the 'text resident set' size or TRS.

       s: DATA  --  Data+Stack size (kb)
          The  amount  of physical memory devoted to other than executable code,
          also known as the 'data resident set' size or DRS.

       t: SHR  --  Shared Mem size (kb)
          The amount of shared memory used by a task.  It simply reflects memory
          that could be potentially shared with other processes.

       u: nFLT  --  Page Fault count
          The number of major page faults that have occurred for a task.  A page
          fault occurs when a process attempts to read from or write to  a  vir-
          tual page that is not currently present in its address space.  A major
          page fault is when disk access is involved in making that page  avail-
          able.

       v: nDRT  --  Dirty Pages count
          The number of pages that have been modified since they were last writ-
          ten to disk.  Dirty pages must be written to disk  before  the  corre-
          sponding  physical  memory location can be used for some other virtual
          page.

       w: S  --  Process Status
          The status of the task which can be one of:
             'D' = uninterruptible sleep
             'R' = running
             'S' = sleeping
             'T' = traced or stopped
             'Z' = zombie

          Tasks shown as running should be more properly thought of as 'ready to
          run'   --   their  task_struct is simply represented on the Linux run-
          queue.  Even without a true SMP machine, you may see numerous tasks in
          this state depending on top's delay interval and nice value.

       x: Command  --  Command line or Program name
          Display the command line used to start a task or the name of the asso-
          ciated program.  You toggle between command line and  name  with  'c',
          which is both a command-line option and an interactive command.

          When  you've chosen to display command lines, processes without a com-
          mand line (like kernel threads) will be shown with  only  the  program
          name in parentheses, as in this example:
                ( mdrecoveryd )

          Either  form of display is subject to potential truncation if it's too
          long to fit in this field's current width.  That  width  depends  upon
          other fields selected, their order and the current screen width.

          Note:  The  'Command' field/column is unique, in that it is not fixed-
          width.  When displayed, this column will be  allocated  all  remaining
          screen  width  (up  to  the maximum 512 characters) to provide for the
          potential growth of program names into command lines.

       y: WCHAN  --  Sleeping in Function
          Depending on the availability of the kernel link  map  ('System.map'),
          this field will show the name or the address of the kernel function in
          which the task is currently sleeping.  Running tasks  will  display  a
          dash ('-') in this column.

          Note:  By  displaying  this  field,  top's  own  working  set  will be
          increased by over 700Kb.  Your only means of  reducing  that  overhead
          will be to stop and restart top.

       z: Flags  --  Task Flags
          This  column  represents the task's current scheduling flags which are
          expressed in hexadecimal notation and with  zeros  suppressed.   These
          flags are officially documented in <linux/sched.h>.  Less formal docu-
          mentation can also be found on the 'Fields select' and 'Order  fields'
          screens.
------------------------------------------------------------------------------------
```

### [EX2] ì‚¬ìš©ì ë³„ë¡œ ëª¨ë‹ˆí„°ë§

[ëª…ë ¹ì–´í˜•ì‹]

```bash
# top -u root 
# top -u oracle 
# top -u wasuser
```

[TERM1] root ì‚¬ìš©ì ìœˆë„ìš°

```bash
# top -u fedora
```

[TERM2] fedora ì‚¬ìš©ì ìœˆë„ìš°

```bash
# telnet localhost
fedora ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸

$ id    
$ bash   -----> ê´€ë¦¬ì ìœˆë„ìš° í™•ì¸
$ ksh    -----> ê´€ë¦¬ì ìœˆë„ìš° í™•ì¸
$ vi /etc/passwd 
$ exit 
$ exit 
$ exit
```

[EX3] ëª‡ê°œì˜ í”„ë¡œì„¸ìŠ¤ë§Œ ëª¨ë‹ˆí„°ë§

```bash
[ëª…ë ¹ì–´ í˜•ì‹]
# top -p 1 
# top -p 1,3624

# ps    (# pstree 2371)
 PID TTY          TIME CMD
 2371 pts/3    00:00:00 bash
 6554 pts/3    00:00:00 ps
# top -p 1,2371
top - 17:51:27 up 1 day, 8 min,  4 users,  load average: 0.12, 0.16, 0.10
Tasks:   2 total,   0 running,   2 sleeping,   0 stopped,   0 zombie
Cpu(s):  7.4%us,  1.5%sy,  0.0%ni, 90.9%id,  0.0%wa,  0.0%hi,  0.3%si,  0.0%st
Mem:    515340k total,   500336k used,    15004k free,    63108k buffers
Swap:  1052248k total,        0k used,  1052248k free,   255872k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
    1 root      18   0  2068  620  532 S  0.0  0.1   0:00.49 init
 2371 root      15   0  5872 1496 1188 S  0.0  0.3   0:00.62 bash
-> í”„ë¡œì„¸ìŠ¤ PID ë²ˆí˜¸ ì„ íƒì€ ì¶œë ¥ í™”ë©´ ì°¸ì¡°
```

---

=================ì—¬ê¸°ë¶€í„° ë‹¤ìŒì— ë‹¤ì‹œ ë³¸ë‹¤==================

### [EX4] ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§(CPU/MEM)

```bash
(ì‹¤ìŠµ ì¤€ë¹„)
# mkdir â€“p /root/bin 
# cd /root/bin 

# yum -y install epel*
# yum clean all
# yum repolist
# yum list | grep cockpit
# yum -y install cockpit*
# systemctl start cockpit
# systemctl enable cockpit
# firewall-cmd --permanent --zone=public --add-service=cockpit
# firewall-cmd --reload 
```

â–  CPU ë¶€í•˜ëŸ‰ í…ŒìŠ¤íŠ¸

```bash
# cd /root/bin 
# cat cpu.sh
----------------------------------------------------------------------
#!/bin/bash

echo "+------------------------------------------+"
echo "| Control-C will terminate cpu.sh process. |"
echo "+------------------------------------------+"

START=0
END=1000000000000000000
while [ $START -le $END ]
do
        START=`expr $START + 1`
done
----------------------------------------------------------------------
# ./cpu.sh

# cat cpu2.sh
----------------------------------------------------------------------
#!/bin/bash

echo "+------------------------------------------+"
echo "| Control-C will terminate cpu2.sh process.|"
echo "+------------------------------------------+"

while true
do
        a=1
done
----------------------------------------------------------------------
# ./cpu2.sh

# cat cpu3.sh
----------------------------------------------------------------------
#!/bin/bash

echo "+------------------------------------------+"
echo "| Control-C will terminate cpu3.sh process.|"
echo "+------------------------------------------+"

trap 'killall cpu.sh ; exit 1' 2 3

./cpu.sh & 
sleep 10
./cpu.sh & 
sleep 10
./cpu.sh & 
sleep 10
./cpu.sh & 
sleep 3600

trap 2 3
----------------------------------------------------------------------
# ./cpu3.sh
```

â–  ë©”ëª¨ë¦¬ ë¶€í•˜ëŸ‰ í…ŒìŠ¤íŠ¸

```bash
# cat mem.c
----------------------------------------------------------------------
#include<stdio.h>
#include<stdlib.h>

int main()
{
        char *m;

        printf("+------------------------------------------+\n");
        printf("| Control-C will terminate mem process.    |\n");
        printf("+------------------------------------------+\n");

        while (1)
                m=malloc(1);
}
----------------------------------------------------------------------
# gcc -o mem mem.c         (# yum -y install gcc)
# ./mem
```

â–  ë””ìŠ¤í¬ ë¶€í•˜ëŸ‰ í…ŒìŠ¤íŠ¸

```bash
[TERM2] # top 
[TERM3] # gnome-system-monitor 
[TERM4] # while true
        > do
        > echo "----------------`date`-------------"
        > df -h / 
        > sleep 2 
        > done

watch 
```

```bash
# cat disk_exhaust.c
----------------------------------------------------------------------
#include<fcntl.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<unistd.h>
int main()
{
    int fd;
    char buf[10000];
    fd=open("tempfile", O_WRONLY | O_CREAT, 0777);
    unlink("./tempfile");
    while(1)
        write(fd, buf, sizeof(buf));
}
----------------------------------------------------------------------
# gcc -o disk_exhaust disk_exhaust.c 
# ./disk_exhaust
```

## lsof(List Open File) ëª…ë ¹ì–´

í”„ë¡œì„¸ìŠ¤ì— ì˜í•´ ì—´ë ¤ì§„ íŒŒì¼ë“¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. íŠ¹ì • íŒŒì¼ì„ ì ‘ê·¼í•˜ê³  ìˆëŠ” í”„ë¡œì„¸ìŠ¤ì¸ì§€ íŠ¹ì • í¬íŠ¸ë¡œ ì ‘ì†í•œ ì‚¬ìš©ìë¥¼ í™•ì¸ í•  ë•Œ ìœ ìš©í•œ í”„ë¡œì„¸ìŠ¤ì´ë‹¤.

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# lsof
# lsof -p <PIDë²ˆí˜¸> 
# lsof -c <ë°ëª¬ëª…>
```

### [EX] lsof ëª…ë ¹ì–´ ì‹¤ìŠµ

```bash
# ps -ef | grep sendmail
root    7939     1  0 03:06 ?      00:00:00 sendmail: accepting connections
root    7960  7601  0 03:13 pts/3  00:00:00 grep sendmail
smmsp  25319     1  0 Jan26 ?      00:00:00 sendmail: Queue runner@01:00:00 for /var/spool/clientmqueue

# lsof -p 7939
COMMAND   PID USER   FD   TYPE     DEVICE    SIZE    NODE NAME
sendmail 7939 root  cwd    DIR        8,1    4096 3095078 /var/spool/mqueue
sendmail 7939 root  rtd    DIR        8,1    4096       2 /
sendmail 7939 root  txt    REG        8,1  806460  928207 /usr/sbin/sendmail.sendmail
sendmail 7939 root  mem    REG        8,1 1011184 1140250 /lib/libdb-4.3.so
..... (ì¤‘ëµ) .....
```

```bash
Column          ì„¤ ëª… 
Command         í”„ë¡œì„¸ìŠ¤ì™€ ê´€ë ¨ëœ Unix command ì´ë¦„ 
PID             Process IDentification number 
PPID            Parent Process IDentification number(í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ì˜ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ ID) 
PGRP            Process Group IDentification number(í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ì™€ ê´€ë ¨ëœ í”„ë¡œì„¸ìŠ¤ ê·¸ë£¹ ID) 
USER            í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ë¥¼ ì†Œìœ í•œ ì‚¬ìš©ì ID ë˜ëŠ” login name 
FD              File Descriptor number
                (ex) cwd : current working directory
                r : read access / w : write access / u : read and write access 
TYPE            í•´ë‹¹ íŒŒì¼ê³¼ ê´€ë ¨í•œ ë…¸ë“œ íƒ€ì…
               (ex) inet : Internet domain socket 
DEVICE         device number 
SIZE
SIZE/OFF
OFFSET         file ì´ë‚˜ file offsetì˜ ì‚¬ì´ì¦ˆ 
INODENODE-ID   local file ì˜ node number ë˜ëŠ” Internet protocol type
               ë˜ëŠ” ì„œë²„ í˜¸ìŠ¤íŠ¸ì˜ NFS fileì˜ inode number 
NAME           í•´ë‹¹ íŒŒì¼ì´ ì†Œì†ëœ mount pointë‚˜ íŒŒì¼ ì‹œìŠ¤í…œì˜ ì´ë¦„
```

```bash
# lsof -i /* í˜„ì¬ ì‚¬ìš©í•˜ê³  ìˆëŠ” ëª¨ë“  ì†Œì¼“ ìƒíƒœë¥¼ í™•ì¸ ê°€ëŠ¥ */
COMMAND     PID   USER   FD   TYPE DEVICE SIZE NODE NAME
portmap    1930    rpc    3u  IPv4   5376       UDP *:sunrpc
portmap    1930    rpc    4u  IPv4   5377       TCP *:sunrpc (LISTEN)
rpc.statd  1962   root    3u  IPv4   5552       UDP *:869
rpc.statd  1962   root    6u  IPv4   5529       UDP *:866
rpc.statd  1962   root    7u  IPv4   5559       TCP *:872 (LISTEN)
# ssh root@172.16.9.252 
root ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸

# lsof -i@172.16.9.252    (# netstat -apn | grep EST)
COMMAND   PID  USER   FD   TYPE DEVICE SIZE NODE NAME
sshd     7561  root    3u  IPv6 152794       TCP linux200:ssh->192.168.0.2:50259 (ESTABLISHED)
sshd     7599  root    3u  IPv6 152898       TCP linux200:ssh->192.168.0.2:50261 (ESTABLISHED)
named   25482 named   21u  IPv4 125320       TCP linux200:domain (LISTEN)
named   25482 named  513u  IPv4 125319       UDP linux200:domain
# exit 
# lsof -c sshd | more /* íŠ¹ì • ë°ëª¬ì´ ì‚¬ìš©í•˜ê³  ìˆëŠ” ëª¨ë“  íŒŒì¼ì˜ ì •ë³´ ì¶œë ¥ */
COMMAND  PID USER   FD   TYPE DEVICE    SIZE    NODE NAME
sshd    7476 root  cwd    DIR    8,1    4096       2 /
sshd    7476 root  rtd    DIR    8,1    4096       2 /
sshd    7476 root  txt    REG    8,1  408384  935283 /usr/sbin/sshd
sshd    7476 root  mem    REG    8,1   76400 2023272 /lib/libresolv-2.5.so
sshd    7476 root  mem    REG    8,1   45288 2023297 /lib/libcrypt-2.5.so
....
```

# í”„ë¡œì„¸ìŠ¤ ëª¨ë‹ˆí„°ë§

---

- **pmap ëª…ë ¹ì–´**

    ```bash
     **# pmap PID**
    ```

- **pstree ëª…ë ¹ì–´**

    ```bash
    # pstree
    # pstree PID
    ```

- **nice / renice ëª…ë ¹ì–´**

    ```bash
    # nice â€“n (-20 ~ 18) CMD
    # renice â€“n (-20~20 PID
    ```

---

```bash
pCMD(ps, pmap, pstree, pwdx, ....)
# pmap PID
# pstree PID
# pwdx PID
```

## pmap ëª…ë ¹ì–´

í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë©”ëª¨ë¦¬ì˜ ì£¼ì†Œë¥¼ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. ì‘ìš©í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë  ë•Œ ì–¼ë§ˆë‚˜ ë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¡œë“œë˜ëŠ”ê°€ë¥¼ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# pmap PID
```

### [EX1] pmap ëª…ë ¹ì–´ ì‚¬ìš©ë²• ì‹¤ìŠµ

```bash
# ps -ef | grep senmail    (# pgrep -lf sendmail)
root      8024     1  0 03:28 ?        00:00:00 sendmail: accepting connections
smmsp     8032     1  0 03:28 ?        00:00:00 sendmail: Queue runner@01:00:00 for /var/spool/clientmq                                                            ueue
root      8073  8040  0 03:28 pts/1    00:00:00 grep sendmail

# pmap 8024/* í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë©”ëª¨ë¦¬ì˜ ì£¼ì†Œë¥¼ í™•ì¸ */
8024:   sendmail: accepting connections
00110000   1192K r-x--  /lib/libcrypto.so.0.9.8e
0023a000     76K rwx--  /lib/libcrypto.so.0.9.8e
0024d000     16K rwx--    [ anon ]
00251000    980K r-x--  /lib/libdb-4.3.so
00346000     12K rwx--  /lib/libdb-4.3.so
00349000     36K r-x--  /lib/libcrypt-2.5.so

..... (ì¤‘ëµ) .....

00fcf000     68K r-x--  /lib/libresolv-2.5.so
00fe0000      4K r-x--  /lib/libresolv-2.5.so
00fe1000      4K rwx--  /lib/libresolv-2.5.so
00fe2000      8K rwx--    [ anon ]
09c2e000    404K rw---    [ anon ]
b7f9f000     28K rw---    [ anon ]
bf95a000    200K rw---    [ stack ]
 total     9432K
```

## pstree í”„ë¡œì„¸ìŠ¤ ìƒê´€ë„

ì‹¤í–‰ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ìƒíƒœë¥¼ íŠ¸ë¦¬ êµ¬ì¡°ë¡œ ë³´ì—¬ì£¼ëŠ” ëª…ë ¹ì–´. í”„ë¡œì„¸ìŠ¤ì˜ ë¶€ëª¨ ìì‹ê´€ê³„ë¥¼ í˜•íƒœë¡œ ë³´ì—¬ì£¼ëŠ” ëª…ë ¹ì–´

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# pstree         (# pstree â€“l)
# pstree PID
# pstree user01
```

(ì„ ìˆ˜ì‘ì—…) í•„ìš”í•˜ë©´ ëª…ë ¹ì–´ ìˆ˜í–‰

```bash
# ps 
# sleep 500 & 
# sleep 600 & 
# sleep 700 & 
# ps
```

```bash
# ps
 PID TTY          TIME CMD
 8040 pts/1    00:00:00 bash
 8077 pts/1    00:00:00 sleep
 8082 pts/1    00:00:00 sleep
 8083 pts/1    00:00:00 sleep
 8099 pts/1    00:00:00 ps
# pstree -l /* í”„ë¡œì„¸ìŠ¤ì˜ ê´€ê³„ë¥¼ ê¸¸ê²Œ ì¶œë ¥ */
init-â”¬â”€acpid
     â”œâ”€atd
     â”œâ”€auditdâ”€â”¬â”€audispdâ”€â”€â”€{audispd}
     â”‚          â””â”€{auditd}
     â”œâ”€automountâ”€â”€â”€4*[{automount}]
     â”œâ”€avahi-daemonâ”€â”€â”€avahi-daemon
     â”œâ”€bonobo-activatiâ”€â”€â”€{bonobo-activati}
     â”œâ”€brcm_iscsiuioâ”€â”€â”€3*[{brcm_iscsiuio}]
     â”œâ”€bt-applet
     â”œâ”€clock-applet
     â”œâ”€crond
     â”œâ”€cupsd
     â”œâ”€2*[dbus-daemon]
     â”œâ”€dbus-launch
     â”œâ”€eggcups
     â”œâ”€escdâ”€â”€â”€{escd}
     â”œâ”€events/0
     â”œâ”€gam_server
     â”œâ”€gconfd-2
     â”œâ”€gdm-binaryâ”€â”€â”€gdm-binaryâ”€â”¬â”€Xorg
     â”‚                         â””â”€gnome-sessionâ”€â”€â”€Xsession
     â”œâ”€gdm-rh-securityâ”€â”€â”€{gdm-rh-security}
     â”œâ”€gnome-keyring-d
     â”œâ”€gnome-panel
     â”œâ”€gnome-power-man
     â”œâ”€gnome-screensav
     â”œâ”€gnome-settings-â”€â”€â”€{gnome-settings-}
     â”œâ”€gnome-terminalâ”€â”¬â”€bash
     â”‚                â”œâ”€gnome-pty-helpe
     â”‚                â””â”€{gnome-terminal}
     â”œâ”€gnome-vfs-daemo
     â”œâ”€gnome-volume-ma
     â”œâ”€gpm
     â”œâ”€haldâ”€â”€â”€hald-runnerâ”€â”¬â”€hald-addon-acpi
     â”‚                    â”œâ”€hald-addon-keyb
     â”‚                    â””â”€hald-addon-stor
     â”œâ”€hcid
     â”œâ”€hidd
     â”œâ”€hpiod
     â”œâ”€httpdâ”€â”¬â”€8*[httpd]
     â”‚       â””â”€{httpd}
     â”œâ”€2*[iscsid]
     â”œâ”€khelper
     â”œâ”€klogd
     â”œâ”€krfcommd
     â”œâ”€ksoftirqd/0
     â”œâ”€kthreadâ”€â”¬â”€aio/0
     â”‚         â”œâ”€ata/0
     â”‚         â”œâ”€ata_aux
     â”‚         â”œâ”€cqueue/0
     â”‚         â”œâ”€ib_addr
     â”‚         â”œâ”€ib_cm/0
     â”‚         â”œâ”€ib_inform
     â”‚         â”œâ”€ib_mcast
     â”‚         â”œâ”€iscsi_eh
     â”‚         â”œâ”€iw_cm_wq
     â”‚         â”œâ”€iw_cxgb3
     â”‚         â”œâ”€kacpid
     â”‚         â”œâ”€kauditd
     â”‚         â”œâ”€kblockd/0
     â”‚         â”œâ”€kgameportd
     â”‚         â”œâ”€khubd
     â”‚         â”œâ”€kjournald
     â”‚         â”œâ”€kmpath_handlerd
     â”‚         â”œâ”€kmpathd/0
     â”‚         â”œâ”€kpsmoused
     â”‚         â”œâ”€kseriod
     â”‚         â”œâ”€kstriped
     â”‚         â”œâ”€kswapd0
     â”‚         â”œâ”€local_sa
     â”‚         â”œâ”€mpt_poll_0
     â”‚         â”œâ”€2*[pdflush]
     â”‚         â”œâ”€rdma_cm
     â”‚         â”œâ”€rpciod/0
     â”‚         â””â”€scsi_eh_0
     â”œâ”€mapping-daemon
     â”œâ”€metacity
     â”œâ”€migration/0
     â”œâ”€6*[mingetty]
     â”œâ”€mixer_applet2â”€â”€â”€{mixer_applet2}
     â”œâ”€namedâ”€â”€â”€3*[{named}]
     â”œâ”€nautilus
     â”œâ”€nm-applet
     â”œâ”€nm-system-setti
     â”œâ”€notification-ar
     â”œâ”€nss_pcache
     â”œâ”€pam-panel-iconâ”€â”€â”€pam_timestamp_c
     â”œâ”€pcscdâ”€â”€â”€3*[{pcscd}]
     â”œâ”€portmap
     â”œâ”€puplet
     â”œâ”€python
     â”œâ”€rpc.idmapd
     â”œâ”€rpc.statd
     â”œâ”€scim-bridge
     â”œâ”€scim-helper-man
     â”œâ”€2*[scim-launcher]
     â”œâ”€scim-panel-gtkâ”€â”€â”€{scim-panel-gtk}
     â”œâ”€sdpd
     â”œâ”€2*[sendmail]
     â”œâ”€smartd
     â”œâ”€sshdâ”€â”€â”€sshdâ”€â”€â”€bashâ”€â”¬â”€pstree
     â”‚                    â””â”€2*[sleep]
     â”œâ”€syslogd
     â”œâ”€trashapplet
     â”œâ”€udevd
     â”œâ”€uuidd
     â”œâ”€watchdog/0
     â”œâ”€wnck-applet
     â”œâ”€xfs
     â”œâ”€xinetd
     â””â”€yum-updatesd
# pstree 8040 /* í”„ë¡œì„¸ìŠ¤ê°„ì˜ ë¶€ëª¨ ìì‹ê´€ê³„ë¥¼ íŠ¸ë¦¬ í˜•íƒœë¡œ ë³´ì—¬ ì¤Œ */
bash â”€â”¬â”€pstree
       â””â”€3*[sleep]

```

[ì°¸ê³ ] ì‹¤ìŠµì„ ìœ„í•œ ì¤€ë¹„

```bash
# bash 
# bash 
# ps 
# pstree 8040 
bashâ”€â”¬â”€bashâ”€â”€â”€bashâ”€â”€â”€pstree
      â””â”€3*[sleep]
# exit 
# exit 
# jobs
# kill %1
# kill %2
# kill %3

```

## pwdx CMD

ëŒ€ìƒ í”„ë¡œì„¸ìŠ¤ì˜ í˜„ì¬ ì‘ì—… ë””ë ‰í† ë¦¬ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

```bash
# ps
PID TTY          TIME CMD
21716 pts/2    00:00:00 bash
# pwdx 21716
21716: /root
# cd /etc/sysconfig 
# pwdx 21716
21716: /etc/sysconfig
```

=================ì—¬ê¸°ê¹Œì§€ ë‹¤ìŒì— ë‹¤ì‹œ ë³¸ë‹¤==================

---

## nice / renice ëª…ë ¹ì–´

í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ëŠ”ë° ìˆì–´ì„œ í”„ë¡œì„¸ìŠ¤ì—ê²Œ **ìš°ì„ ê¶Œì„ ë¶€ì—¬** í•  ìˆ˜ ìˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ë“¤ì€ ì„¤ì •ëœ ìš°ì„ ê¶Œ ìˆœìœ„ëŒ€ë¡œ ì‹¤í–‰ì´ ë˜ëŠ”ë° nice ëª…ë ¹ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ í”„ë¡œì„¸ìŠ¤ì˜ ì‹¤í–‰ ìš°ì„ ê¶Œì„ ë°”ê¿€ ìˆ˜ ìˆë‹¤. ìš°ì„ ê¶Œ ìˆœìœ„ëŠ” -20ì—ì„œ 19ê¹Œì§€ì˜ ë²”ìœ„ë¥¼ ê°€ì§€ë©° nice ê°’ì´ ì ì„ìˆ˜ë¡ ìš°ì„ ìˆœìœ„ ê°’ì´ ë†’ì•„ì§€ê²Œ ëœë‹¤.

í”„ë¡œì„¸ìŠ¤ì˜ ìš°ì„ ìˆœìœ„: í”„ë¡œì„¸ìŠ¤ê°€ ìš´ì˜ì²´ì œì˜ CPUë¥¼ ì„ ì í•  ìˆ˜ ìˆëŠ” ê¶Œí•œ

(í”„ë¡œì„¸ìŠ¤ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì¡°ì •í•˜ëŠ” ëª…ë ¹ì–´)

â–  nice ëª…ë ¹ì–´ : í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ë•Œ í”„ë¡œì„¸ìŠ¤ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ëª…ë ¹ì–´. ì‹¤í–‰ì‹œ ìš°ì„ ìˆœìœ„ ë¶€ì—¬
â–  renice ëª…ë ¹ì–´ : ì‹¤í–‰ì¤‘ì¸ í”„ë¡œê·¸ë¨ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì¡°ì •í•  ìˆ˜ ìˆëŠ” ëª…ë ¹ì–´. ìš°ì„ ìˆœìœ„ ë³€ê²½

```bash
#  ps -l 
F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD      /* NI : ë‚˜ì´ìŠ¤ê°’, PRI : priority(ìš°ì„ ìˆœìœ„) */
0 S     0   2489   2487  0  80   0 -  6514 -      pts/0    00:00:00 bash
0 R     0 124535   2489  0  80   0 - 10800 -      pts/0    00:00:00 ps
```

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# CMD                   (EX: # backup.sh)
# nice -(-20 ~ 19)   CMD(EX: # nice  -10 backup.sh (NI:  10))
# nice -n (-20 ~ 19) CMD(EX: # nice --10 backup.sh (NI: -10))

# renice (-20 ~ 20)    PID(EX: # renice  10 PID (NI:  10))
# renice -n (-20 ~ 20) PID(EX: # renice -10 PID (NI: -10))
```

### [EX] nice ëª…ë ¹ì–´ ì‹¤ìŠµ

```bash
# sleep 500 &
[1] 8077
# sleep 600 &
[2] 8082
		# nice -(-20 ~ 19)   CMD
		# nice -n (-20 ~ 19) CMD
# nice -15 sleep 700 &    (# nice -n 15 sleep 700 &)
[3] 8083
# ps -l
F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S     0   2489   2487  0  80   0 -  6514 -      pts/0    00:00:00 bash
0 S     0 124545   2489  0  80   0 -  1429 hrtime pts/0    00:00:00 sleep
0 S     0 124546   2489  0  80   0 -  1429 hrtime pts/0    00:00:00 sleep
0 S     0 124566   2489  0  95  15 -  1429 hrtime pts/0    00:00:00 sleep
0 R     0 124567   2489  0  80   0 - 10800 -      pts/0    00:00:00 ps
# nice --15 sleep 800 &   (# nice -n -15 sleep 800 &)
# ps â€“l
F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S     0   2489   2487  0  80   0 -  6514 -      pts/0    00:00:00 bash
0 S     0 124545   2489  0  80   0 -  1429 hrtime pts/0    00:00:00 sleep
0 S     0 124546   2489  0  80   0 -  1429 hrtime pts/0    00:00:00 sleep
0 S     0 124566   2489  0  95  15 -  1429 hrtime pts/0    00:00:00 sleep
4 S     0 124576   2489  0  65 -15 -  1429 hrtime pts/0    00:00:00 sleep
0 R     0 124577   2489  0  80   0 - 10800 -      pts/0    00:00:00 ps
		# renice (-20 ~ 20)    PID
		# renice -n (-20 ~ 20) PID
# renice -5 124566
124566 (process ID) old priority 15, new priority -5
# ps â€“l
F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S     0   2489   2487  0  80   0 -  6514 -      pts/0    00:00:00 bash
0 S     0 124545   2489  0  80   0 -  1429 hrtime pts/0    00:00:00 sleep
0 S     0 124546   2489  0  80   0 -  1429 hrtime pts/0    00:00:00 sleep
0 S     0 124566   2489  0  75  -5 -  1429 hrtime pts/0    00:00:00 sleep
4 S     0 124576   2489  0  65 -15 -  1429 hrtime pts/0    00:00:00 sleep
0 R     0 124589   2489  0  80   0 - 10800 -      pts/0    00:00:00 ps
# renice 5 124576
124576 (process ID) old priority -15, new priority 5
# ps -l
F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S     0   2489   2487  0  80   0 -  6514 -      pts/0    00:00:00 bash
0 S     0 124545   2489  0  80   0 -  1429 hrtime pts/0    00:00:00 sleep
0 S     0 124546   2489  0  80   0 -  1429 hrtime pts/0    00:00:00 sleep
0 S     0 124566   2489  0  75  -5 -  1429 hrtime pts/0    00:00:00 sleep
4 S     0 124576   2489  0  85   5 -  1429 hrtime pts/0    00:00:00 sleep
0 R     0 124600   2489  0  80   0 - 10800 -      pts/0    00:00:00 ps
```

(ì‹¤ë¬´ ì˜ˆ) nice, renice ì‚¬ìš© ì˜ˆ

```bash
(ë°±ì—…ìŠ¤í¬ë¦½íŠ¸/ë°ì´í„°ìˆ˜ì§‘ ìŠ¤í¬ë¦½íŠ¸)
(X) # /root/bin/backup.sh & 
(0) # nice -n 10 /root/bin/backup.sh & 
(ë¶€í•˜ëŸ‰ì„ ì£¼ëŠ” í”„ë¡œê·¸ë¨)
    # top 
    # renice 10 PID  (PID : ë¶€í•˜ëŸ‰ì„ ì£¼ëŠ” í”„ë¡œê·¸ë¨'s PID)
```

[ì°¸ê³ ]

```bash
PRIority NIce
í”„ë¡œì„¸ìŠ¤ë¥¼ ê¸°ë³¸ ì‹¤í–‰í•˜ë©´ NICEê°’ì€ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‹¤í–‰ë˜ê³  ìš°ì„ ìˆœìœ„ê°’ì€ 80ìœ¼ë¡œ ì‹¤í–‰í•œë‹¤. ê·¸ë¦¬ê³  ì´í›„ì— ë³€ê²½ì„ í†µí•´ì„œ í”„ë¡œì„¸ìŠ¤ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ë³€ê²½í• ìˆ˜ ìˆë‹¤. 
ê·¸ë ‡ë‹¤ë©´ ê¸°ì¡´ì— ì‹¤í–‰ëœ í”„ë¡œì„¸ìŠ¤ëŠ” PRI ê°’ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ”ê²ƒì¸ê°€? -> ë³€ê²½ì´ ëœë‹¤!
```

FREE ëª…ë ¹ì–´ì—ëŠ” bufferì™€ availableê°€ ìˆë‹¤. 

buffer - í˜„ì¬ ì„ì‹œ ë°ì´í„°ë¡œ ì‚¬ìš©ë˜ê³  ìˆëŠ” ì˜ì—­

available - ë‹¹ì¥ ì‚¬ìš©í• ìˆ˜ ìˆëŠ” ì˜ì—­

---

# ì›ê²©ì ‘ì†ê³¼ íŒŒì¼ì „ì†¡

telnet, rsh, rcp, ftp : ë³´ì•ˆì´ ë¬¸ì œ!!

# ë‹¨ì›ëª©í‘œ

- íŒŒì¼ì „ì†¡

    scp ëª…ë ¹ì–´

    sftp ëª…ë ¹ì–´

- ì›ê²© ì ‘ì†

    ssh ëª…ë ¹ì–´

    ```bash
    ssh ?
    SSL/TLS
    ì•”í˜¸í™” ê¸°ëŠ¥ ì¶”ê°€
    ì¸ì¦, ì•”í˜¸, 
    ë¹„ë°€í‚¤, ê³µê°œí‚¤(RSA) ì•ˆë³´ ì²´ê³„
    ```

---

```bash
# rpm -qa | grep ssh
# rpm -ql openssh-clients | grep ssh$
/usr/bin/ssh
```

# sCMD ëª…ë ¹ì–´

**â–  ssh Secure Shell(ì›ê²© ì ‘ì†) : telnet, rlogin**

**â–  scp Secure Copy (íŒŒì¼ ì „ì†¡) : rcp**

**â–  sftp Secure FTPÂ (íŒŒì¼ ì „ì†¡) : ftp**

---

# scp ëª…ë ¹ì–´

- **scp ëª…ë ¹ì–´(Secure Copy)**

    ```bash
    # scp file1 192.168.10.252:/tmp
    # scp file1 192.168.10.252:/tmp/centosXXX 
    # scp 192.168.10.252:/tmp/centos* /test
    # scp â€“r dir1 192.168.10.252:/tmp
    # scp â€“r dir1 root@192.168.10.252:/tmp
    ```

- **sftp ëª…ë ¹ì–´(Secure ftp)**

    ```bash
    # sftp 192.168.10.252
    # sftp fedora@192.168.10.252:/home/fedora/*
    ```

---

**sCMD ëª…ë ¹ì–´**

â–  ssh	Secure Shell(ì›ê²© ì ‘ì†) : telnet, rlogin, rsh
â–  scp	Secure Copy (íŒŒì¼ ì „ì†¡) : rcp
â–  sftp	Secure FTP (íŒŒì¼ ì „ì†¡) : ftp

[ì°¸ê³ ] **(TUI)**tcpdump, **(GUI)**ethereal, wireshark

## scp(Secure Copy)

scp ëŠ” secure copy client í”„ë¡œê·¸ë¨ìœ¼ë¡œ `ssh ë¥¼ ì„¤ì¹˜í•˜ë©´ ê°™ì´ ì„¤ì¹˜ë˜ëŠ” í”„ë¡œê·¸ë¨ì´`ë‹¤. ( rpm -ql openssh-clinets | grep scp )
ë³„ë„ì˜ ftp í´ë¼ì´ì–¸íŠ¸ë¥¼ êµ³ì´ ì„¤ì¹˜ í•˜ì§€ ì•Šë”ë¼ë„ ì†ì‰½ê²Œ íŒŒì¼ì „ì†¡ì„ ìˆ˜í–‰í• ìˆ˜ ìˆìœ¼ë©°, `ë°ì´í„°ë¥¼ ì•”í˜¸í™”ì‹œì¼œ ì „ì†¡í•´ì£¼ê²Œ ëœë‹¤.` 

ë‹¤ì‹œ ë§í•´ scpëŠ” ìì‹ ì˜ ì»´í“¨í„°ì—ì„œ ì›ê²©ì˜ ì»´í“¨í„°ë¡œ ë˜ëŠ” ì›ê²©ì˜ ì»´í“¨í„°ì—ì„œ ìì‹ ì˜ ì»´í“¨í„°ë¡œ ê°„ë‹¨í•˜ê²Œ íŒŒì¼ì„ ì „ì†¡ í•  ìˆ˜ ìˆëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤.

```bash
# rpm -ql openssh-clients | grep scp$
/usr/bin/scp
# rpm -ql openssh-clients | grep sftp$
/usr/bin/sftp
# rpm -ql openssh-clients | grep ssh$
/usr/bin/ssh
```

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
(ëª…ë ¹ì–´ í˜•ì‹)
# scp file1 192.168.10.252:/tmp/file2 
# scp file1 192.168.10.252:/test 
# scp 192.168.10.252:/test/file1 /test 
# scp -r dir1 192.168.10.252:/tmp
```

[ì°¸ê³ ] scp ëª…ë ¹ì–´ëŠ” cp ëª…ë ¹ì–´ í˜•ì‹ê³¼ ë¹„ìŠ·í•˜ë‹¤.

```bash
# cp file1 file2 
# cp file1 dir1 
# cp -r dir1 dir2
```

### [EX] scp ëª…ë ¹ì–´ ì‹¤ìŠµ

```bash
(ì‹¤ìŠµ ì „ ì¤€ë¹„ on server2)
# systemctl restart sshd
# systemctl status sshd
# pgrep -lf sshd 

(on server1)

# cd /test 
# cp /etc/passwd linux200.txt 
# echo "scp test" >> linux200.txt
# cat linux200.txt

# cd ~/.ssh 
# ls 
known_hosts
# > known_hosts
```

```bash
# scp /test/linux200.txt root@192.168.10.252:/tmp 
The authenticity of host '192.168.10.252 (192.168.10.252)' can not be established.
ECDSA key fingerprint is SHA256:VupU+fz6cK1zkTDfQxGuWW4YIt+aTy5yXNvxsVtHwz4.
ECDSA key fingerprint is MD5:27:8e:59:e4:ac:31:a7:4d:c6:92:88:bc:74:5c:45:c7.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '192.168.10.252' (ECDSA) to the list of known hosts.
root@192.168.10.252 is password: 
linux200.txt                                   100% 2274     1.8MB/s   00:00

# cp /etc/services /test/CentOS200
# scp -P **22** /test/CentOS200 root@192.168.10.252:/tmp   /* -P : Port Number */
root@192.168.10.252 is password: 
Centos200                                      100%  655KB  40.8MB/s   00:00

# ssh 192.168.10.252 ls /tmp/*200*
root@192.168.10.252's password: 
/tmp/Centos200
/tmp/linux200.txt
```

```bash
(on server2)
# useradd fedora
# passwd fedora

# su - fedora 
$ cp /etc/passwd testfile1
```

```bash
(on server1)
server2ì—ì„œ íŒŒì¼ì„ server1ë¡œ ë°›ì•„ì˜¤ê¸°

# hostname
server1.example.com
# ssh fedora@192.168.10.252 ls
fedora@192.168.10.252 is password: 
testfile1

# scp fedora@192.168.10.252:/home/fedora/testfile1 /test
fedora@192.168.10.252 is password: 
testfile1                            100%  890   823.1KB/s   00:0
# ls /test/testfile1
/test/testfile1
```

```bash
(on server1)
# ssh root@server2
[root@server2 ~]# mkdir /test
[root@server2 ~]# cd /test
[root@server2 test]# ls
[root@server2 test]# cat /etc/passwd | head -1 > echo.start
[root@server2 test]# ls
echo.start
[root@server2 test]# cat echo.start 
root:x:0:0:root:/root:/bin/bash
[root@server2 test]# mkdir testdir
[root@server2 test]# touch testdir/file1
[root@server2 test]# exit

# scp -r 192.168.10.252:/test /tmp
root@192.168.10.252 is password: 
echo.start                           100%   32    32.3KB/s   00:00    
file1                                100%    0     0.0KB/s   00:00
-> íŒŒì¼ë§Œ ë³µì‚¬ëœê²ƒ ì²˜ëŸ¼ ë³´ì¸ë‹¤. ì‹¤ì€ ë””ë ‰í† ë¦¬ë„ ë³µì‚¬ëœë‹¤. 
[root@server1 ~]# cd /tmp
[root@server1 tmp]# ls test
echo.start  testdir
[root@server1 tmp]# ls -ld test
drwxr-xr-x. 3 root root 39  3ì›” 24 11:17 test
[root@server1 tmp]# cd test
[root@server1 test]# ls
echo.start  testdir
[root@server1 test]# tree
.
â”œâ”€â”€ echo.start
â””â”€â”€ testdir
    â””â”€â”€ file1

1 directory, 2 files
```

## sftp

SFTPëŠ” Secure File Transfer Protocol ì˜ ì•½ìë¡œ ê¸°ì¡´ FTPì— ë³´ì•ˆì´ ê°•í™”ëœ ì „ì†¡ ë°©ì‹ì„ ë§í•œë‹¤. FTPëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì¸í„°ë„· ìƒì—ì„œ íŒŒì¼ì„ ì „ì†¡í•  ë•Œ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆëŠ” í”„ë¡œí† ì½œì´ë‚˜ ë¡œê·¸ì¸ ì •ë³´ ë° íŒŒì¼ ì •ë³´ë¥¼ ì•”í˜¸í™” í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì •ë³´ ë…¸ì¶œì˜ ìœ„í—˜ì„±ì´ ìˆë‹¤. ì´ëŸ° ìœ„í—˜ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ SFTPëŠ” íŒŒì¼ ì „ì†¡ ì‹œ ë¡œê·¸ì¸ ì •ë³´ ë° íŒŒì¼ ì •ë³´ë¥¼ ì•”í˜¸í™”í•´ì„œ í†µì‹ ì„ í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤.

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# sftp [ê³„ì •]@[ìƒëŒ€ë°©ì£¼ì†Œ]:[ì†ŒìŠ¤ê²½ë¡œ]
```

### [EX1] sftp ëª…ë ¹ì–´ ì‹¤ìŠµ

```bash
(on server2)
# su - fedora
$ pwd
/home/fedora
$ cp /etc/services file1 
$ cp file1 file2 
$ cp file1 file3 

(on server1)
# cd /test 
# rm -rf /test/* 

# sftp fedora@192.168.10.252:/home/fedora/*
fedora@192.168.10.252 is password: 
Connected to 192.168.10.252.
Fetching /home/fedora/file1 to file1
/home/fedora/file1                   100%  655KB  57.7MB/s   00:00    
Fetching /home/fedora/file2 to file2
/home/fedora/file2                   100%  655KB  62.5MB/s   00:00    
Fetching /home/fedora/file3 to file3
/home/fedora/file3                   100%  655KB  43.7MB/s   00:00

# pwd
/test
# ls
file1  file2  file3
# rm -rf /test/* 
# cp /etc/passwd linux200
# cp /etc/services linuxfile200 

# sftp fedora@192.168.10.252
fedora@192.168.10.252's password: 
Connected to 192.168.10.252.
sftp> help 

sftp> pwd
Remote working directory: /home/fedora (ì›ê²©ì§€ fedora ê³„ì •ì˜ í™ˆ ë””ë ‰í† ë¦¬ë¡œ ì ‘ì†)
sftp> ls
file1      file2      file3      testfile1  (ì›ê²©ì§€ì— ìˆëŠ” ë””ë ‰í† ë¦¬ì˜ íŒŒì¼ë“¤)
sftp> put linux* ë¡œì»¬ì˜ íŒŒì¼ì„ ì›ê²©ì§€ë¡œ ì „ì†¡(ì—…ë¡œë“œ)
Uploading linux200 to /home/fedora/linux200
linux200                             100% 2265     2.5MB/s   00:00    
Uploading linuxfile200 to /home/fedora/linuxfile200
linuxfile200                         100%  655KB  43.9MB/s   00:00    
sftp> ls
file1         file2         file3         linux200      linuxfile200  testfile1     
sftp> lcd /root (local cd )
sftp> mget linux* (ë‹¤ìš´ë¡œë“œ)
Fetching /home/fedora/linux200 to linux200
/home/fedora/linux200                100% 2265   556.3KB/s   00:00    
Fetching /home/fedora/linuxfile200 to linuxfile200
/home/fedora/linuxfile200            100%  655KB  55.7MB/s   00:00    
sftp> !ls
Desktop    Music     Templates	      initial-setup-ks.cfg Documents  Pictures  Videos
**linux200**   Downloads  Public          anaconda-ks.cfg      **linuxfile200**
sftp> quit
[root@server1 test]#
[root@server1 test]# ls
linux200  linuxfile200
[root@server1 test]# cd
[root@server1 ~]# ls
Desktop    Music     Templates        initial-setup-ks.cfg
Documents  Pictures  Videos           linux200
Downloads  Public    anaconda-ks.cfg  linuxfile200
```

# ì›ê²©ì ‘ì† ëª…ë ¹ì–´(ssh ëª…ë ¹ì–´)

---

- **ssh ëª…ë ¹ì–´**

    ```bash
    # ssh 192.168.10.252
    # ssh fedora@192.168.10.252
    # ssh 192.168.10.252 CMD
    # ssh 192.168.10.252 hostname
    # ssh 192.168.10.252 ls /tmp
    ```

---

## ssh

[ëª…ë ¹ì–´ í˜•ì‹]

```bash
# ssh **192.168.10.252**
# ssh root@**192.168.10.252**
# ssh fedora@**192.168.10.252**

# ssh **192.168.10.252** CMD
# ssh **192.168.10.252** ls /test
```

### [EX1] telnet/ssh ëª…ë ¹ì–´ ì‹¤ìŠµ

```bash
# telnet 192.168.10.252
root ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸

# hostname 
# id 
# exit 

# cd ~/.ssh 
# ls 
# > known_hosts 

# ssh 192.168.10.252
The authenticity of host '192.168.10.252 (192.168.10.252)' can not be established.
ECDSA key fingerprint is SHA256:VupU+fz6cK1zkTDfQxGuWW4YIt+aTy5yXNvxsVtHwz4.
ECDSA key fingerprint is MD5:27:8e:59:e4:ac:31:a7:4d:c6:92:88:bc:74:5c:45:c7.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '192.168.10.252' (ECDSA) to the list of known hosts.
root@192.168.10.252's password: 
Last login: Tue Mar 24 12:01:34 2020 from ::ffff:192.168.10.200
[root@server2 ~]#
# hostname 
# id 
# exit
```

### [EX2] ssh/scp ëª…ë ¹ì–´ë¥¼ í†µí•œ íŒŒì¼ ì „ì†¡

```bash
# cd /test 
# rm -rf /test/* 

# cp /usr/bin/* /test 
# mkdir -p /backup 
# tar cvzf /backup/linux200.tar.gz /test 

# scp /backup/linux200.tar.gz 192.168.10.252:/backup 
-> 192.168.10.252ì— /backup ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ backup ì´ë¼ëŠ” íŒŒì¼ë¡œ ìƒì„±ëœë‹¤.
[root@server2 /]# file backup 
backup: gzip compressed data, from Unix, last modified: Tue Mar 24 12:07:52 2020
[root@server2 /]# ls
backup  boot  etc   lib    media  opt   root  sbin  sys   tmp  var
bin     dev   home  lib64  mnt    proc  run   srv   test  usr
[root@server2 /]# rm -rf backup 
[root@server2 /]# mkdir /backup
[root@server2 /]# exit
logout
Connection to 192.168.10.252 closed.
[root@server1 backup]# scp /backup/linux200.tar.gz 192.168.10.252:/backup
root@192.168.10.252 is password: 
linux200.tar.gz                      100%  276MB 122.1MB/s   00:02    
[root@server1 backup]# ssh 192.168.10.252
root@192.168.10.252's password: 
Last login: Tue Mar 24 12:09:24 2020 from 192.168.10.200
[root@server2 ~]# cd /backup/
[root@server2 backup]# ls
linux200.tar.gz
> íŒŒì¼ëª…ì´ ë™ì¼í•˜ê²Œ ì›ê²© ë³µì‚¬ ë˜ì—ˆë‹¤.

# ssh 192.168.10.252 ls /backup
```

### [EX3] ë¡œì»¬ && ì›ê²© íŒŒì¼/ë””ë ‰í† ë¦¬ ë¹„êµ

```bash
# cat /etc/hosts 
# ssh 192.168.10.252 cat /etc/hosts 

# ls /test 
# ssh 192.168.10.252 ls /test
```
